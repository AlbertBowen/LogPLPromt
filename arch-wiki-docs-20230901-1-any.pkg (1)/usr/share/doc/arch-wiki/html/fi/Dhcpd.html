<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dhcpd (Suomi) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dhcpd_Suomi rootpage-Dhcpd_Suomi skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Asennus" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Asennus">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Asennus</div>
			</a>
			
			<ul id="toc-Asennus-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Käyttö" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#K%C3%A4ytt%C3%B6">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Käyttö</div>
			</a>
			
			<ul id="toc-Käyttö-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Konfiguraatio" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Konfiguraatio">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Konfiguraatio</div>
			</a>
			
				<button aria-controls="toc-Konfiguraatio-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Konfiguraatio subsection
				</button>
			
			<ul id="toc-Konfiguraatio-sublist" class="sidebar-toc-list">
				<li id="toc-Vain_yhden_käyttöliittymän_kuuntelu" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Vain_yhden_k%C3%A4ytt%C3%B6liittym%C3%A4n_kuuntelu">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Vain yhden käyttöliittymän kuuntelu</div>
			</a>
			
			<ul id="toc-Vain_yhden_käyttöliittymän_kuuntelu-sublist" class="sidebar-toc-list">
				<li id="toc-dhcpd:n_konfigurointi" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#dhcpd:n_konfigurointi">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1.1</span>dhcpd:n konfigurointi</div>
			</a>
			
			<ul id="toc-dhcpd:n_konfigurointi-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Palvelu_tiedosto" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Palvelu_tiedosto">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1.2</span>Palvelu tiedosto</div>
			</a>
			
			<ul id="toc-Palvelu_tiedosto-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Käyttö_PXE:lle" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#K%C3%A4ytt%C3%B6_PXE:lle">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Käyttö PXE:lle</div>
			</a>
			
			<ul id="toc-Käyttö_PXE:lle-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Katso_myös" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Katso_my%C3%B6s">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Katso myös</div>
			</a>
			
			<ul id="toc-Katso_myös-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../fi/Dhcpd.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Dhcpd_(Suomi)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">suomi</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../fi/Dhcpd.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Dhcpd_(Suomi)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Dhcpd_(Suomi)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../fi/Dhcpd.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dhcpd_(Suomi)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dhcpd_(Suomi)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="fi" dir="ltr">
<div class="mw-parser-output">
<p><span>
</span>
</p>
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Aiheeseen liittyen</p>
<ul>
<li><a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a></li>
</ul>
</div>
<p>dhcpd on <a rel="nofollow" class="external text" href="https://www.isc.org/downloads/dhcp/">Internet Systems Consortiumin</a> kehittämä DHCP palvelin. Se on käytännöllinen esimerkiksi laitteelle joka toimii reitittimenä LAN verkossa.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Huomautus:</strong> <i>dhcpd</i> (DHCP <b>(server)</b> daemon) ei ole sama kuin <a href="../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> (DHCP <b>client</b> daemon).</div>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Asennus">Asennus</span></h2>
<p><a href="../fi/Help:Reading.html#Pakettien_asennus" class="mw-redirect" title="Asenna">Asenna</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=dhcp">dhcp</a></span> paketti, joka löytyy <a href="../en/Official_repositories.html" title="Official repositories">virallisista pakettilähteistä</a>.
</p>
<h2>
<span id="K.C3.A4ytt.C3.B6"></span><span class="mw-headline" id="Käyttö">Käyttö</span>
</h2>
<p><i>dhcpd</i> sisältää kaksi yksikkötiedostoa <code>dhcpd4.service</code> ja <code>dhcpd6.service</code>, joita voidaan käyttää <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">hallitsemaan</a> taustaprosessia. Ne käynnistävät taustaprosessin <i>kaikki</i> <a href="../en/Network_configuration.html#Network_interfaces" class="mw-redirect" title="Network interfaces">verkkokäyttöliittymät</a> IPv4 ja IPv6 vastaavasti. Katso <a href="#Vain_yhden_k%C3%A4ytt%C3%B6liittym%C3%A4n_kuuntelu">#Vain yhden käyttöliittymän kuuntelu</a> vaihtoehtoiselle ratkaisulle.
</p>
<h2><span class="mw-headline" id="Konfiguraatio">Konfiguraatio</span></h2>
<p>Ohje staattisen IPv4 osoitteen asettamiseen käyttöliittymään, jota halutaan käyttää (tässä esimerkissä <code>eth0</code>). Ensimmäiset 3 tavua tästä osoitteesta eivät saa vastata muiden käyttöliittymien osoitteiden ensimmäisiä tavuja.
</p>
<pre># ip link set up dev eth0
# ip addr add 139.96.30.100/24 dev eth0 # arbitrary address
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Vinkki:</strong> Yleisesti jotain seuraavista käytetään yksityisissä verkoissa, jotka erityisesti tätä varten on varattuna ja eivät siksi aiheuta ristiriitoja minkään hostin kanssa verkossa:
<ul>
<li>
<code>192.168/16</code> (subnet <code>192.168.0.0</code>, netmask <code>255.255.0.0</code>)</li>
<li>
<code>172.16/12</code> (subnet <code>172.16.0.0</code>, netmask <code>255.240.0.0</code>)</li>
<li>
<code>10/8</code> (suurille verkoille; subnet <code>10.0.0.0</code>, netmask <code>255.0.0.0</code>)</li>
</ul>
Katso myös <a rel="nofollow" class="external text" href="https://www.ietf.org/rfc/rfc1918.txt">RFC 1918</a>.</div>
<p>Asettaaksesi staattisen ip osoitteen bootissa, katso <a href="../fi/Network_configuration.html#Staattinen_IP_osoite" title="Network configuration (Suomi)">Network configuration (Suomi)#Staattinen IP osoite</a>.
</p>
<p>Oletus <code>dhcpd.conf</code> sisältää monia kommentoimattomia esimerkkejä, joten kopioi se:
</p>
<pre># cp /etc/dhcpd.conf /etc/dhcpd.conf.example
</pre>
<p>Minimi konfiguraatio tiedosto voi näyttää tältä:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}
</pre>
<p>Jos kiinteälle IP osoitteelle on tarve yhdessä erityisessä laitteessa, voit määrittää isäntä osat:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">option domain-name-servers 8.8.8.8, 8.8.4.4;
option subnet-mask 255.255.255.0;
option routers 139.96.30.100;
subnet 139.96.30.0 netmask 255.255.255.0 {
  range 139.96.30.150 139.96.30.250;
}
host macbookpro{
  hardware ethernet 70:56:81:22:33:44;
  fixed-address 139.96.30.199;
}
</pre>
<p><code>domain-name-servers</code> vaihtoehto sisältää DNS palvelimien osotteita joita syötetään asiakasohjelmille (client). Tässä esimerkissä käytetään Googlen julkisia DNS palvelimia. Jos tiedät paikallisia DNS palvelimia (kuten esimerkiksi palveluntarjoajan omia), voit käyttää myös niitä. Jos olet konfiguroinut oman DNS paikallisessa koneessa, käytä sen osoitetta subnetissä (kuten <code>139.96.30.100</code> aikaisemmassa esimerkissä).
</p>
<p><code>subnet-mask</code> ja <code>routers</code> määrittää subnet peitteen ja listan käytettävistä reitittimistä subnetissä. Valtaosassa tapauksia pienissä verkoissa voidaan käyttää <code>255.255.255.0</code> peitteenä ja määrittää IP osoite koneesta missä ollaan konfiguroimassa DHCP palvelinta reitittimenä.
</p>
<p><code>subnet</code> osat määrittää vaihtoehdot muille subneteille, jotka on kartoitettu verkonkäyttöliittymiin, missä<i>dhcpd</i> on käynnissä. Meidän esimerkissä tämä subnet <code>139.96.30.0/24</code> on tälle käyttöliittymälle <code>eth0</code>, mille määriteltiin joukko valittavia IP osoitteita. Osoitteet tästä joukosta asetetaan liittyville asiakasohjelmille.
</p>
<h3>
<span id="Vain_yhden_k.C3.A4ytt.C3.B6liittym.C3.A4n_kuuntelu"></span><span class="mw-headline" id="Vain_yhden_käyttöliittymän_kuuntelu">Vain yhden käyttöliittymän kuuntelu</span>
</h3>
<p>Jos tietokone on jo osana yhtä tai useampaa verkkoa, se voi ilmentyä ongelmana jos koneesi rupeaa antamaan IP osoitteita muille laitteille muista verkoista. Se voidaan tehdä joko konfiguroimalla dhcpd tai käynnistämällä se taustaprosessina <a href="../fi/Systemd.html#Yksik%C3%B6iden_k%C3%A4ytt%C3%B6" title="Systemd (Suomi)">systemctl:än</a> avulla.
</p>
<h4><span class="mw-headline" id="dhcpd:n_konfigurointi">dhcpd:n konfigurointi</span></h4>
<p>Käyttöliittymän torjumiseen täytyy luoda tyhjä esittely subnetille, joka konfiguroidaan siinä käyttöliittymässä.
</p>
<p>Tämä tehdään muokkaamalla konfiguraatio tiedosto (esimerkiksi):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># No DHCP service in DMZ network (192.168.2.0/24)
subnet 192.168.2.0 netmask 255.255.255.0 {
}
</pre>
<h4><span class="mw-headline" id="Palvelu_tiedosto">Palvelu tiedosto</span></h4>
<p>Ei ole olemassa palvelu tiedostoja oletukselta, jotka käyttävät <i>dhcpd:tä</i> vain yhdessä käyttöliittymässä, jolloin sellainen pitää luoda. Aloita kopioimalla jo olemassa oleva palvelu:
</p>
<pre># cp /usr/lib/systemd/system/dhcpd4.service /etc/systemd/system/dhcpd4@.service
</pre>
<p>Sen jälkeen muokkaa ExecStart riviä sisältämään käyttöliittymä:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/dhcpd4@.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[Service]
...
ExecStart=/usr/bin/dhcpd -4 -q -cf /etc/dhcpd.conf -pf /run/dhcpd4/dhcpd.pid %I
...
</pre>
<p>Tämä on mallinne yksikkö, joka sitoo sen erityiseen käyttöliittymään, esimerkiksi <code>dhcpd4@<i>eth0</i>.service</code> missä <i>eth0</i> on käyttöliittymä, jonka näkee komennolla <code>ip link</code>.
</p>
<h3>
<span id="K.C3.A4ytt.C3.B6_PXE:lle"></span><span class="mw-headline" id="Käyttö_PXE:lle">Käyttö PXE:lle</span>
</h3>
<p>PXE konfiguraatio tehdään kahdella seuraavalla asetuksella:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/dhcpd.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">next-server 192.168.0.2;
tiedostonimi "/pxelinux.0";
</pre>
<p>Tämä osa voi olla kokonaisuudessa <code>subnet</code> tai vain <code>host</code> määritelmässä. <code>next-server</code> on TFTP palvelimen IP, ja <code>tiedostonimi</code> on tiedoston nimi kuvasta josta bootataan. Enemmän tietoa löytyy <a href="../en/Preboot_Execution_Environment.html" class="mw-redirect" title="PXE">PXE</a> artikkelista.
</p>
<h2>
<span id="Katso_my.C3.B6s"></span><span class="mw-headline" id="Katso_myös">Katso myös</span>
</h2>
<ul><li><a rel="nofollow" class="external text" href="https://kb.isc.org/docs/aa-00333">ISC DHCP Dokumentaatio</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fi/Category:DHCP.html" title="Category:DHCP (Suomi)">DHCP (Suomi)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dhcpd_(Suomi)&amp;oldid=668649">https://wiki.archlinux.org/index.php?title=Dhcpd_(Suomi)&amp;oldid=668649</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 May 2021, at 10:35.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
