<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>SSHFS (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-SSHFS_Français rootpage-SSHFS_Français skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
				<button aria-controls="toc-Installation-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Installation subsection
				</button>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
				<li id="toc-Montage" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Montage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Montage</div>
			</a>
			
			<ul id="toc-Montage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Démontage" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#D%C3%A9montage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>Démontage</div>
			</a>
			
			<ul id="toc-Démontage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Options" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Options">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Options</div>
			</a>
			
			<ul id="toc-Options-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Chrooting" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Chrooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Chrooting</div>
			</a>
			
			<ul id="toc-Chrooting-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Montage_automatique" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Montage_automatique">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Montage automatique</div>
			</a>
			
				<button aria-controls="toc-Montage_automatique-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Montage automatique subsection
				</button>
			
			<ul id="toc-Montage_automatique-sublist" class="sidebar-toc-list">
				<li id="toc-À_la_demande" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%C3%80_la_demande">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>À la demande</div>
			</a>
			
			<ul id="toc-À_la_demande-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Au_démarrage" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Au_d%C3%A9marrage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Au démarrage</div>
			</a>
			
			<ul id="toc-Au_démarrage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Accès_utilisateur_sécurisé" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Acc%C3%A8s_utilisateur_s%C3%A9curis%C3%A9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.3</span>Accès utilisateur sécurisé</div>
			</a>
			
			<ul id="toc-Accès_utilisateur_sécurisé-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Dépannage" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#D%C3%A9pannage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Dépannage</div>
			</a>
			
				<button aria-controls="toc-Dépannage-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Dépannage subsection
				</button>
			
			<ul id="toc-Dépannage-sublist" class="sidebar-toc-list">
				<li id="toc-Checklist" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Checklist">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>Checklist</div>
			</a>
			
			<ul id="toc-Checklist-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Réinitialisation_de_la_connexion_par_le_pair" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#R%C3%A9initialisation_de_la_connexion_par_le_pair">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>Réinitialisation de la connexion par le pair</div>
			</a>
			
			<ul id="toc-Réinitialisation_de_la_connexion_par_le_pair-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-L'hôte_distant_s'est_déconnecté" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#L'h%C3%B4te_distant_s'est_d%C3%A9connect%C3%A9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>L'hôte distant s'est déconnecté</div>
			</a>
			
			<ul id="toc-L'hôte_distant_s'est_déconnecté-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Problèmes_de_montage_fstab" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Probl%C3%A8mes_de_montage_fstab">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Problèmes de montage fstab</div>
			</a>
			
			<ul id="toc-Problèmes_de_montage_fstab-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Certains_répertoires_sont_vides" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Certains_r%C3%A9pertoires_sont_vides">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.5</span>Certains répertoires sont vides</div>
			</a>
			
			<ul id="toc-Certains_répertoires_sont_vides-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Fichiers_non_rafraîchis" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Fichiers_non_rafra%C3%AEchis">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.6</span>Fichiers non rafraîchis</div>
			</a>
			
			<ul id="toc-Fichiers_non_rafraîchis-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Transfert_limité_sur_un_réseau_rapide" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Transfert_limit%C3%A9_sur_un_r%C3%A9seau_rapide">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.7</span>Transfert limité sur un réseau rapide</div>
			</a>
			
			<ul id="toc-Transfert_limité_sur_un_réseau_rapide-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Voir_aussi" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Voir_aussi">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>Voir aussi</div>
			</a>
			
			<ul id="toc-Voir_aussi-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../fr/SSHFS.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:SSHFS_(Fran%C3%A7ais)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../fr/SSHFS.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=SSHFS_(Fran%C3%A7ais)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=SSHFS_(Fran%C3%A7ais)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../fr/SSHFS.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=SSHFS_(Fran%C3%A7ais)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=SSHFS_(Fran%C3%A7ais)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="fr" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/SSHFS.html" title="SSHFS">SSHFS</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=SSHFS&amp;diff=0&amp;oldid=743497">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/SCP_and_SFTP.html" title="SCP and SFTP">SCP and SFTP</a></li>
<li><a href="../en/SFTP_chroot.html" title="SFTP chroot">SFTP chroot</a></li>
<li><a href="../en/Pure-FTPd.html" title="Pure-FTPd">Pure-FTPd</a></li>
<li><a href="../en/Sftpman.html" title="Sftpman">sftpman</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://github.com/libfuse/sshfs">SSHFS</a> est un client de système de fichiers basé sur <a href="../en/FUSE.html" title="FUSE">FUSE</a> pour monter des répertoires distants via une connexion <a href="../fr/Secure_Shell.html" title="Secure Shell (Français)">Secure Shell</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Ce projet a été archivé par ses développeurs et n'est plus développé. Une alternative possible est la fonction mount de <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=rclone">rclone</a></span>.</div>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sshfs">sshfs</a></span>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Astuce:</strong> 
<ul>
<li>Si vous avez souvent besoin de monter des systèmes de fichiers sshfs, vous pouvez utiliser un assistant sshfs, tel que <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/qsshfs/">qsshfs</a></span><sup><small>AUR</small></sup>, <a href="../en/Sftpman.html" title="Sftpman">sftpman</a>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/sshmnt/">sshmnt</a></span><sup><small>AUR</small></sup> ou <a rel="nofollow" class="external text" href="https://github.com/lahwaacz/Scripts/blob/master/fmount.py">fmount.py</a>.</li>
<li>Vous pouvez vouloir utiliser <a href="../en/Google_Authenticator.html" title="Google Authenticator">Google Authenticator</a> qui fournit une sécurité supplémentaire comme dans l'authentification en deux étapes.</li>
<li>Les <a href="../en/SSH_keys.html" title="SSH keys">clés SSH</a> peuvent être utilisées pour remplacer l'authentification traditionnelle par mot de passe.</li>
</ul>
</div>
<h3><span class="mw-headline" id="Montage">Montage</span></h3>
<p>Pour pouvoir monter un répertoire, l'utilisateur SSH doit pouvoir y accéder. Appelez <i>sshfs</i> pour monter un répertoire distant :
</p>
<pre>$ sshfs <i>[user@]host :[dir] mountpoint [options]</i>
</pre>
<p>Par exemple :
</p>
<pre>$ sshfs myuser@mycomputer:/remote/path /local/path -C -p 9876
</pre>
<p>Ici, <code>-p 9876</code> spécifie le numéro de port et <code>-C</code> active la compression. Pour plus d'options, consultez la section <a href="#Options">#Options</a>.
</p>
<p>S'il n'est pas spécifié, le chemin distant prend par défaut le répertoire d'origine de l'utilisateur distant. Les noms d'utilisateurs et les options par défaut peuvent être prédéfinis sur une base hôte par hôte dans <code>~/.ssh/config</code> pour simplifier l'utilisation de <i>sshfs</i>. Pour plus d'informations, consultez <a href="../fr/OpenSSH.html#Utilisation_du_client" title="OpenSSH (Français)">OpenSSH (Français)#Utilisation du client</a>.
</p>
<p>SSH demandera le mot de passe, si nécessaire. Si vous ne voulez pas taper le mot de passe plusieurs fois par jour, consultez <a href="../en/SSH_keys.html" title="SSH keys">SSH keys</a>.
</p>
<h3>
<span id="D.C3.A9montage"></span><span class="mw-headline" id="Démontage">Démontage</span>
</h3>
<p>Pour démonter le système distant :
</p>
<pre>$ fusermount3 -u <i>mountpoint</i>
</pre>
<p>Exemple :
</p>
<pre>$ fusermount3 -u /local/path
</pre>
<h2><span class="mw-headline" id="Options">Options</span></h2>
<p><i>sshfs</i> peut convertir automatiquement les identifiants des utilisateurs locaux et distants. Utilisez l'option <code>idmap=user</code> pour convertir l'UID de l'utilisateur qui se connecte en l'utilisateur distant <code>myuser</code> (le GID reste inchangé) :
</p>
<pre>$ sshfs <i>myuser</i>@<i>mycomputer</i>:<i>/remote/path /local/path</i> -o idmap=user
</pre>
<p>Si vous avez besoin de plus de contrôle sur la traduction des UID et GID, consultez les options <code>idmap=file</code>, <code>uidfile</code> et <code>gidfile</code>.
</p>
<p>Une liste complète des options se trouve dans <span class="plainlinks archwiki-template-man" title="$ man 1 sshfs"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sshfs.1">sshfs(1)</a></span>.
</p>
<h2><span class="mw-headline" id="Chrooting">Chrooting</span></h2>
<p>Vous pouvez vouloir restreindre un utilisateur spécifique à un répertoire spécifique sur le système distant. Ceci peut être fait en éditant <code>/etc/ssh/sshd_config</code> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/sshd_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">.....
Match User <i>someuser</i> 
       ChrootDirectory <i>/chroot/%u</i>
       ForceCommand internal-sftp
       AllowTcpForwarding no
       X11Forwarding no
.....
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Le répertoire chroot <b>doit</b> appartenir à root, sinon vous ne pourrez pas vous connecter.</div>
<p>Consultez également <a href="../en/SFTP_chroot.html" title="SFTP chroot">SFTP chroot</a>. Pour plus d'informations, consultez la page de manuel <span class="plainlinks archwiki-template-man" title="$ man 5 sshd_config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sshd_config.5">sshd_config(5)</a></span> pour <code>Match</code>, <code>ChrootDirectory</code> et <code>ForceCommand</code>.
</p>
<h2><span class="mw-headline" id="Montage_automatique">Montage automatique</span></h2>
<p>Le montage automatique peut se faire au démarrage ou à la demande (lors de l'accès au répertoire). Dans les deux cas, la configuration se fait dans le fichier <a href="../fr/Fstab.html" title="Fstab (Français)">fstab</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> N'oubliez pas que le montage automatique est effectué par l'utilisateur root, vous ne pouvez donc pas utiliser les hôtes configurés dans <code>.ssh/config</code> de votre utilisateur normal.
<p>Pour laisser l'utilisateur root utiliser une clé SSH d'un utilisateur normal, spécifiez son chemin complet dans l'option <code>IdentityFile</code>.
</p>
<p><b>Surtout</b>, utilisez chaque montage sshfs au moins une fois manuellement <b>en root</b> sur la machine cliente afin que la signature de l'hôte soit ajoutée au fichier <code>/root/.ssh/known_hosts</code> du client. Cela peut également être fait manuellement en ajoutant une ou plusieurs clés publiques d'hôte du serveur SSH (les fichiers <code>/etc/ssh/ssh_host_*key.pub</code>) à <code>/root/.ssh/known_hosts</code>.
</p>
</div>
<h3>
<span id=".C3.80_la_demande"></span><span class="mw-headline" id="À_la_demande">À la demande</span>
</h3>
<p>Avec systemd, le montage à la demande est possible en utilisant les entrées <code>/etc/fstab</code>.
</p>
<p>Exemple :
</p>
<pre><i>user</i>@<i>host</i> : <i>/remote/path /local/path</i> fuse.sshfs noauto,x-systemd.automount,_netdev,users,idmap=user,IdentityFile=/home/<i>user</i>/.ssh/id_rsa,allow_other,reconnect 0 0
</pre>
<p>Les options de montage importantes ici sont <i>noauto,x-systemd.automount,_netdev</i>.
</p>
<ul>
<li>
<i>noauto</i> indique qu'il ne faut pas monter au démarrage.</li>
<li>
<i>x-systemd.automount</i> fait la magie à la demande</li>
<li>
<i>_netdev</i> indique qu'il s'agit d'un périphérique réseau et non d'un périphérique de type bloc (sans cela, des erreurs "No such device" peuvent se produire).</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Après avoir modifié <code>/etc/fstab</code>, <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Rechargez">rechargez</a> la configuration de systemd et les services requis, qui peuvent être trouvés en exécutant <code>systemctl list-unit-files --type automount</code>. </div>
<h3>
<span id="Au_d.C3.A9marrage"></span><span class="mw-headline" id="Au_démarrage">Au démarrage</span>
</h3>
<p>Exemple d'utilisation de sshfs pour monter un système de fichiers distant via <code>/etc/fstab</code>.
</p>
<pre><i>user</i>@<i>host</i> : <i>/remote/path /local/path</i> fuse.sshfs defaults,_netdev 0 0
</pre>
<p>Prenons par exemple la ligne <i>fstab</i> suivante
</p>
<pre>llib@192.168.1.200:/home/llib/FAH /media/FAH2 fuse.sshfs defaults,_netdev 0 0
</pre>
<p>Ce qui précède fonctionnera automatiquement si vous utilisez une clé SSH pour l'utilisateur. Consultez <a href="../en/SSH_keys.html" class="mw-redirect" title="Using SSH Keys">Using SSH Keys</a>.
</p>
<p>Si vous voulez utiliser sshfs avec plusieurs utilisateurs, ajoutez l'option suivante :
</p>
<pre>user@domain.org:/home/user /media/user fuse.sshfs defaults, <b>allow_other</b>,_netdev 0 0
</pre>
<p>Encore une fois, il est important de définir l'option de montage <i>_netdev</i> pour s'assurer que le réseau est disponible avant d'essayer de monter.
</p>
<h3>
<span id="Acc.C3.A8s_utilisateur_s.C3.A9curis.C3.A9"></span><span class="mw-headline" id="Accès_utilisateur_sécurisé">Accès utilisateur sécurisé</span>
</h3>
<p>Lors du montage automatique via <a href="../fr/Fstab.html" title="Fstab (Français)">fstab</a>, le système de fichiers sera généralement monté par root. Par défaut, cela produit des résultats indésirables si vous souhaitez accéder en tant qu'utilisateur ordinaire et limiter l'accès aux autres utilisateurs.
</p>
<p>Un exemple de configuration de point de montage :
</p>
<pre><i>user</i>@<i>host</i> : <i>/remote/path /local/path</i> fuse.sshfs noauto,x-systemd.automount,_netdev,user,idmap=user,follow_symlinks,identityfile=/home/<i>user</i>/.ssh/id_rsa,allow_other,default_permissions,uid=USER_ID_N,gid=USER_GID_N 0 0
</pre>
<p>Résumé des options pertinentes :
</p>
<ul>
<li>
<i>allow_other</i> - Autorise d'autres utilisateurs que le monteur (i.e. root) à accéder au partage.</li>
<li>
<i>default_permissions</i> - Autorise le noyau à vérifier les permissions, c'est-à-dire à utiliser les permissions réelles sur le système de fichiers distant. Cela permet d'interdire l'accès à tout le monde autrement accordé par <i>allow_other</i>.</li>
<li>
<i>uid</i>, <i>gid</i> - définit la propriété déclarée des fichiers à des valeurs données ; <i>uid</i> est l'ID numérique de votre utilisateur, <i>gid</i> est l'ID numérique du groupe de votre utilisateur.</li>
</ul>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3><span class="mw-headline" id="Checklist">Checklist</span></h3>
<p>Lisez d'abord <a href="../fr/OpenSSH.html#Checklist" title="OpenSSH (Français)">OpenSSH (Français)#Checklist</a>. Les autres points à vérifier sont :
</p>
<ol>
<li>Votre login SSH envoie-t-il des informations supplémentaires depuis le fichier <code>/etc/issue</code> du serveur, par exemple ? Cela peut perturber SSHFS. Vous devriez désactiver temporairement le fichier <code>/etc/issue</code> du serveur :<pre>$ mv /etc/issue /etc/issue.orig</pre>
</li>
<li>Gardez à l'esprit que la plupart des articles de dépannage liés à SSH que vous trouverez sur le web ne sont pas liés à systemd. Souvent, les définitions de <code>/etc/fstab</code> commencent par erreur par <pre><i>sshfs#</i>user@host:/mnt/server/directory ... fuse ...</pre> au lieu d'utiliser la syntaxe <pre>user@host:/mnt/server/directory ... fuse.<i>sshfs</i> ... <i>x-systemd</i>, ...</pre>
</li>
<li>Vérifiez que le propriétaire du répertoire source du serveur et de son contenu appartient à l'utilisateur du serveur.<pre>$ chown -R <i>user_s</i> : /mnt/servers/directory</pre>
</li>
<li>L'ID utilisateur du serveur peut être différent de celui du client. Évidemment, les deux noms d'utilisateur doivent être identiques. Il suffit de s'occuper des ID utilisateur du client. SSHFS traduira l'UID pour vous avec les options de montage suivantes :<pre>uid=<i>USER_C_ID</i>,gid=<i>GROUP_C_ID</i>.</pre>
</li>
<li>Vérifiez que le point de montage cible du client (directory) appartient à l'utilisateur du client. Ce répertoire doit avoir le même ID utilisateur que celui défini dans les options de montage de SSHFS.<pre>$ chown -R <i>user_c</i> : /mnt/client/directory</pre>
</li>
<li>Vérifiez que le point de montage (directory) du client est vide. Par défaut, vous ne pouvez pas monter des répertoires SSHFS sur des répertoires non vides.</li>
</ol>
<h3>
<span id="R.C3.A9initialisation_de_la_connexion_par_le_pair"></span><span class="mw-headline" id="Réinitialisation_de_la_connexion_par_le_pair">Réinitialisation de la connexion par le pair</span>
</h3>
<ul>
<li>Si vous essayez d'accéder au système distant avec un nom d'hôte, essayez d'utiliser son adresse IP, car il peut s'agir d'un problème de résolution de nom de domaine. Assurez-vous d'éditer <code>/etc/hosts</code> avec les détails du serveur.</li>
<li>Assurez-vous que votre utilisateur peut se connecter au serveur (surtout si vous utilisez <code>AllowUsers</code>).</li>
<li>Assurez-vous que <code>Subsystem sftp /usr/lib/ssh/sftp-server</code> est activé dans <code>/etc/ssh/sshd_config</code> sur le système distant.</li>
<li>Si vous utilisez un nom de clé autre que celui par défaut et que vous le transmettez sous la forme <code>-i .ssh/my_key</code>, cela ne fonctionnera pas. Vous devez utiliser <code>-o IdentityFile=/home/<i>user</i>/.ssh/<i>my_key</i></code>, avec le chemin complet de la clé.</li>
<li>Si votre <code>/root/.ssh/config/</code> est un lien symbolique, vous obtiendrez également cette erreur. Consultez <a rel="nofollow" class="external text" href="https://serverfault.com/questions/507748/bad-owner-or-permissions-on-root-ssh-config">ce sujet sur les erreurs de serveur</a>.</li>
<li>Ajout de l'option <code>sshfs_debug</code>. (comme dans <code>sshfs -o sshfs_debug <i>user</i>@<i>server</i> ...</code>) peut aider à résoudre le problème.</li>
<li>Si cela ne révèle rien d'utile, vous pouvez également essayer d'ajouter l'option <code>debug</code>.</li>
<li>Si vous essayez d'accéder par sshfs à un routeur fonctionnant sous DD-WRT ou autre, il existe une solution <a rel="nofollow" class="external text" href="https://www.dd-wrt.com/wiki/index.php/SFTP_with_DD-WRT">ici</a>. (Notez que l'option <code>-osftp_server=/opt/libexec/sftp-server</code> peut être utilisée pour la commande sshfs au lieu de patcher dropbear).</li>
<li>Si vous ne consultez ce message qu'au démarrage, il se peut que systemd tente d'effectuer un montage avant qu'une connexion réseau ne soit disponible. L'activation du <a href="../en/Systemd.html#Running_services_after_the_network_is_up" title="Systemd">wait-online service</a> approprié pour votre gestionnaire de réseau résout ce problème.</li>
<li>Ancien fil de discussion du forum : <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=27613">sshfs : Connexion réinitialisée par un pair</a>.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Lorsque vous fournissez plus d'une option pour sshfs, elles doivent être séparées par des virgules. Par exemple : <code>sshfs -o sshfs_debug,IdentityFile=<i>/path/to/key</i> <i>user</i>@<i>server</i> ...</code>).</div>
<h3>
<span id="L.27h.C3.B4te_distant_s.27est_d.C3.A9connect.C3.A9"></span><span class="mw-headline" id="L'hôte_distant_s'est_déconnecté">L'hôte distant s'est déconnecté</span>
</h3>
<p>Si vous recevez ce message directement après avoir essayé d'utiliser <i>sshfs</i> :
</p>
<ul>
<li>Assurez-vous d'abord que la machine <b>distante</b> a installé <i>sftp</i> ! Sinon, cela ne fonctionnera pas.</li>
<li>Ensuite, vérifiez que le chemin du <code>Subsystem sftp</code> dans <code>/etc/ssh/sshd_config</code> sur la machine distante est valide.</li>
</ul>
<h3>
<span id="Probl.C3.A8mes_de_montage_fstab"></span><span class="mw-headline" id="Problèmes_de_montage_fstab">Problèmes de montage fstab</span>
</h3>
<p>Pour obtenir une sortie de débogage verbeuse, ajoutez ce qui suit aux options de montage :
</p>
<pre>ssh_command=ssh\040-vv,sshfs_debug,debug
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Ici, <code>\040</code> représente un espace que fstab utilise pour séparer les champs.</div>
<p>Pour pouvoir exécuter <code>mount -av</code> et consulter la sortie de débogage, supprimez les éléments suivants :
</p>
<pre> noauto,x-systemd.automount
</pre>
<h3>
<span id="Certains_r.C3.A9pertoires_sont_vides"></span><span class="mw-headline" id="Certains_répertoires_sont_vides">Certains répertoires sont vides</span>
</h3>
<p>Par défaut, sshfs ne prend pas en charge les liens symboliques. Si ces répertoires étaient des liens symboliques, utilisez :
</p>
<pre>$ sshfs <i>user</i>@<i>host</i>:<i>/remote/path /local/path</i> -o follow_symlinks
</pre>
<h3>
<span id="Fichiers_non_rafra.C3.AEchis"></span><span class="mw-headline" id="Fichiers_non_rafraîchis">Fichiers non rafraîchis</span>
</h3>
<p>Si vous consultez du vieux contenu sur le serveur distant, pensez à utiliser l'option <code>dir_cache=no</code> :
</p>
<pre>$ sshfs <i>user</i>@<i>host</i>:<i>/remote/path /local/path</i> -o dir_cache=no
</pre>
<h3>
<span id="Transfert_limit.C3.A9_sur_un_r.C3.A9seau_rapide"></span><span class="mw-headline" id="Transfert_limité_sur_un_réseau_rapide">Transfert limité sur un réseau rapide</span>
</h3>
<p>Si vous observez un transfert inférieur aux capacités de votre réseau et une utilisation élevée du CPU sur la partie d'où les fichiers sont copiés, désactivez la compression (supprimez l'option <code>-C</code> ou définissez <code>-o compression=no</code>).
</p>
<h2><span class="mw-headline" id="Voir_aussi">Voir aussi</span></h2>
<ul><li>
<a rel="nofollow" class="external text" href="https://wiki.gilug.org/index.php/How_to_mount_SFTP_accesses">How to mount chrooted SSH filesystem</a>, avec une attention particulière aux questions de propriétaires et de permissions.</li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:FUSE.html" title="Category:FUSE (Français)">FUSE (Français)</a></li>
<li><a href="../fr/Category:Secure_Shell.html" title="Category:Secure Shell (Français)">Secure Shell (Français)</a></li>
<li><a href="../fr/Category:Network_sharing.html" title="Category:Network sharing (Français)">Network sharing (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=SSHFS_(Fran%C3%A7ais)&amp;oldid=765468">https://wiki.archlinux.org/index.php?title=SSHFS_(Français)&amp;oldid=765468</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 28 January 2023, at 01:54.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
