<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Hdparm (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Hdparm_Français rootpage-Hdparm_Français skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Utilisation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Utilisation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Utilisation</div>
			</a>
			
				<button aria-controls="toc-Utilisation-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Utilisation subsection
				</button>
			
			<ul id="toc-Utilisation-sublist" class="sidebar-toc-list">
				<li id="toc-Informations_sur_le_disque" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Informations_sur_le_disque">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Informations sur le disque</div>
			</a>
			
			<ul id="toc-Informations_sur_le_disque-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Benchmarking" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Benchmarking">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Benchmarking</div>
			</a>
			
			<ul id="toc-Benchmarking-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration_de_la_gestion_de_l'alimentation" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configuration_de_la_gestion_de_l'alimentation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Configuration de la gestion de l'alimentation</div>
			</a>
			
			<ul id="toc-Configuration_de_la_gestion_de_l'alimentation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Cache_en_écriture" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Cache_en_%C3%A9criture">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>Cache en écriture</div>
			</a>
			
			<ul id="toc-Cache_en_écriture-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Mettre_hors_tension_un_disque_dur" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Mettre_hors_tension_un_disque_dur">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.5</span>Mettre hors tension un disque dur</div>
			</a>
			
			<ul id="toc-Mettre_hors_tension_un_disque_dur-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Trucs_et_astuces" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Trucs_et_astuces">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Trucs et astuces</div>
			</a>
			
				<button aria-controls="toc-Trucs_et_astuces-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Trucs et astuces subsection
				</button>
			
			<ul id="toc-Trucs_et_astuces-sublist" class="sidebar-toc-list">
				<li id="toc-Interroger_l'état_du_disque_sans_le_réveiller" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Interroger_l'%C3%A9tat_du_disque_sans_le_r%C3%A9veiller">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Interroger l'état du disque sans le réveiller</div>
			</a>
			
			<ul id="toc-Interroger_l'état_du_disque_sans_le_réveiller-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration_persistante_à_l'aide_de_la_règle_udev" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configuration_persistante_%C3%A0_l'aide_de_la_r%C3%A8gle_udev">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Configuration persistante à l'aide de la règle udev</div>
			</a>
			
			<ul id="toc-Configuration_persistante_à_l'aide_de_la_règle_udev-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ré-application_de_la_configuration_après_le_réveil" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#R%C3%A9-application_de_la_configuration_apr%C3%A8s_le_r%C3%A9veil">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Ré-application de la configuration après le réveil</div>
			</a>
			
			<ul id="toc-Ré-application_de_la_configuration_après_le_réveil-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Mise_en_veille_d'un_lecteur_directement_après_le_démarrage" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Mise_en_veille_d'un_lecteur_directement_apr%C3%A8s_le_d%C3%A9marrage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>Mise en veille d'un lecteur directement après le démarrage</div>
			</a>
			
			<ul id="toc-Mise_en_veille_d'un_lecteur_directement_après_le_démarrage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Utilisation_de_matériel_non_pris_en_charge" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Utilisation_de_mat%C3%A9riel_non_pris_en_charge">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5</span>Utilisation de matériel non pris en charge</div>
			</a>
			
			<ul id="toc-Utilisation_de_matériel_non_pris_en_charge-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Gestion_de_l'alimentation_pour_les_disques_Western_Digital_Green" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Gestion_de_l'alimentation_pour_les_disques_Western_Digital_Green">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.6</span>Gestion de l'alimentation pour les disques Western Digital Green</div>
			</a>
			
			<ul id="toc-Gestion_de_l'alimentation_pour_les_disques_Western_Digital_Green-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Dépannage" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#D%C3%A9pannage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Dépannage</div>
			</a>
			
				<button aria-controls="toc-Dépannage-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Dépannage subsection
				</button>
			
			<ul id="toc-Dépannage-sublist" class="sidebar-toc-list">
				<li id="toc-Réinitialisation_du_niveau_APM_après_la_suspension" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#R%C3%A9initialisation_du_niveau_APM_apr%C3%A8s_la_suspension">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Réinitialisation du niveau APM après la suspension</div>
			</a>
			
			<ul id="toc-Réinitialisation_du_niveau_APM_après_la_suspension-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Consulter_aussi" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Consulter_aussi">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Consulter aussi</div>
			</a>
			
			<ul id="toc-Consulter_aussi-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../fr/Hdparm.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Hdparm_(Fran%C3%A7ais)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../fr/Hdparm.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Hdparm_(Fran%C3%A7ais)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Hdparm_(Fran%C3%A7ais)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../fr/Hdparm.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Hdparm_(Fran%C3%A7ais)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Hdparm_(Fran%C3%A7ais)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="fr" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Hdparm.html" title="Hdparm">Hdparm</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Hdparm&amp;diff=0&amp;oldid=742937">changements</a> dans la version anglaise.</div>
<p><i>hdparm</i> et <i>sdparm</i> sont des utilitaires en ligne de commande pour définir et visualiser les paramètres matériels des <a href="https://en.wikipedia.org/wiki/fr:Disque_dur" class="extiw" title="wikipedia:fr:Disque dur">Disque Dur</a>. <i>hdparm</i> peut également être utilisé comme un simple outil de <a href="../en/Benchmarking.html" title="Benchmarking">benchmarking</a>.
</p>
<p>A l'origine, <i>hdparm</i> a été créé pour les disques <a href="https://en.wikipedia.org/wiki/fr:Parallel_ATA" class="extiw" title="wikipedia:fr:Parallel ATA">IDE</a> et <i>sdparm</i> pour les disques <a href="https://en.wikipedia.org/wiki/fr:Small_Computer_System_Interface" class="extiw" title="wikipedia:fr:Small Computer System Interface">SCSI</a>. Comme les interfaces des périphériques de stockage depuis 2010 environ sont un mélange amélioré d'IDE et de SCSI, <i>hdparm</i> et <i>sdparm</i> se complètent.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Changer les paramètres par défaut du disque peut geler le système ou même endommager le disque de manière irréversible.</div>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=hdparm">hdparm</a></span>. Pour une utilisation avec des périphériques SCSI, installez le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=sdparm">sdparm</a></span>.
</p>
<h2><span class="mw-headline" id="Utilisation">Utilisation</span></h2>
<h3><span class="mw-headline" id="Informations_sur_le_disque">Informations sur le disque</span></h3>
<p>Pour obtenir des informations sur les disques durs, exécutez ce qui suit :
</p>
<pre># hdparm -I /dev/sda
</pre>
<h3><span class="mw-headline" id="Benchmarking">Benchmarking</span></h3>
<p>hdparm peut être utilisé pour du <a href="../en/Benchmarking.html#hdparm" title="Benchmarking">Benchmarking#hdparm</a>.
</p>
<h3>
<span id="Configuration_de_la_gestion_de_l.27alimentation"></span><span class="mw-headline" id="Configuration_de_la_gestion_de_l'alimentation">Configuration de la gestion de l'alimentation</span>
</h3>
<p>Les disques durs modernes prennent en charge de nombreuses fonctions de gestion de l'alimentation, les plus courantes sont résumées dans le tableau suivant. Consultez <span class="plainlinks archwiki-template-man" title="$ man 8 hdparm"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/hdparm.8">hdparm(8)</a></span> pour la liste complète.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Une gestion de l'alimentation trop agressive peut réduire la durée de vie des disques durs en raison de leurs stationnements et arrêts fréquents.</div>
<table class="wikitable">
<tbody>
<tr>
<th>Paramètre</th>
<th>Description
</th>
</tr>
<tr>
<td><code>-B</code></td>
<td>Définit la fonction <a href="https://en.wikipedia.org/wiki/fr:Advanced_Power_Management" class="extiw" title="wikipedia:fr:Advanced Power Management">Advanced Power Management</a>. Les valeurs possibles sont comprises entre 1 et 255, les valeurs faibles signifiant une gestion de l'énergie plus agressive et les valeurs élevées une meilleure performance. Les valeurs de 1 à 127 autorisent le spin-down, tandis que les valeurs de 128 à 254 ne le permettent pas. Une valeur de 255 désactive complètement la fonction.
</td>
</tr>
<tr>
<td><code>-S</code></td>
<td>Définissez le délai d'attente en mode veille (spin down) pour le disque. Ce délai spécifie le temps d'attente en mode veille (sans activité du disque) avant de couper le moteur pour économiser de l'énergie. La valeur 0 désactive le spindown, les valeurs de 1 à 240 spécifient des multiples de 5 secondes et les valeurs de 241 à 251 des multiples de 30 minutes.
</td>
</tr>
<tr>
<td><code>-M</code></td>
<td>Définit la fonction <a href="https://en.wikipedia.org/wiki/fr:Automatic_Acoustic_Management" class="extiw" title="wikipedia:fr:Automatic Acoustic Management">Automatic Acoustic Management</a>. La plupart des disques durs modernes ont la capacité d'accélérer les mouvements de la tête afin de réduire leur niveau de bruit. La valeur possible dépend du disque, certains disques peuvent ne pas prendre en charge cette fonctionnalité.
</td>
</tr>
</tbody>
</table>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Lorsque vous passez à la fois les paramètres <code>-B</code> et <code>-S</code>, les valeurs APM inférieures à 128 peuvent provoquer l'arrêt du disque avant la valeur de timeout <code>-S</code>. Consultez <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=216832">[1]</a>.</div>
<p>Pour demander la valeur actuelle, passez le paramètre sans valeur. Par exemple :
</p>
<pre># hdparm -B /dev/sda
</pre>
<p>Pour appliquer une valeur différente, par exemple définir APM à 127 :
</p>
<pre># hdparm -B 127 /dev/sda
</pre>
<h3>
<span id="Cache_en_.C3.A9criture"></span><span class="mw-headline" id="Cache_en_écriture">Cache en écriture</span>
</h3>
<p>La mise en cache en écriture est le processus de mise en cache temporaire des fichiers dans la <a href="https://en.wikipedia.org/wiki/Disk_buffer" class="extiw" title="wikipedia:Disk buffer">mémoire intégrée du disque</a> avant de les écrire sur le disque, ce qui constitue essentiellement une amélioration des performances. La mise en cache en écriture est une fonctionnalité fournie par la plupart des disques durs, et elle est activée par défaut dans la plupart des cas. Pour vérifier si c'est le cas, exécutez :
</p>
<pre>$ hdparm -W /dev/<i>sdX</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Bien que le cache en écriture améliore gratuitement les performances, il présente également un inconvénient. L'activation du cache en écriture augmente le risque de perte de données en cas de coupure soudaine de l'alimentation.</div>
<p>S'il est désactivé, on peut l'activer avec :
</p>
<pre>$ hdparm -W 1 /dev/<i>sdX</i>.
</pre>
<p>À l'inverse, pour le désactiver, on peut utiliser :
</p>
<pre>$ hdparm -W 0 /dev/<i>sdX</i>
</pre>
<h3><span class="mw-headline" id="Mettre_hors_tension_un_disque_dur">Mettre hors tension un disque dur</span></h3>
<p>Un cas d'utilisation typique, où une telle fonctionnalité est recherchée, est celui des disques connectés à un boîtier externe USB/SATA/FireWire bon marché, ou à un concentrateur. S'il n'émet pas correctement une commande d'arrêt au disque lors de la mise hors tension, le disque est forcé d'effectuer un retrait d'urgence de la tête. Si vous faites cela régulièrement, tôt ou tard, le disque sera cassé. Une solution consiste, une fois que l'on est sûr que les données ont été écrites sur le support, à exécuter une commande pour éteindre le lecteur :
</p>
<pre># hdparm -Y /dev/sd<i>X</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Soyez absolument certain que : 
<ol>
<li>Les données ont bien été écrites sur le support. Il est également conseillé d'attendre un certain temps pour que le lecteur devienne inactif.</li>
<li>Le périphérique, <code>/dev/sd<i>X</i></code> dans l'exemple, est celui que vous voulez éteindre.</li>
</ol>
</div>
<h2><span class="mw-headline" id="Trucs_et_astuces">Trucs et astuces</span></h2>
<h3>
<span id="Interroger_l.27.C3.A9tat_du_disque_sans_le_r.C3.A9veiller"></span><span class="mw-headline" id="Interroger_l'état_du_disque_sans_le_réveiller">Interroger l'état du disque sans le réveiller</span>
</h3>
<p>L'invocation de hdparm avec l'option query est connue pour réveiller certains disques.  Dans ce cas, considérez <code>smartctl</code> fourni par <a href="../fr/S.M.A.R.T..html" title="S.M.A.R.T. (Français)">smartmontools</a> pour interroger le périphérique qui ne réveillera pas un disque endormi. Par exemple :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># smartctl -i -n standby /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">smartctl 6.5 2016-05-07 r4318 [x86_64-linux-4.10.13-1-ARCH] (local build)
Copyright (C) 2002-16, Bruce Allen, Christian Franke, www.smartmontools.org

Device is in STANDBY mode, exit(2)
</pre>
<h3>
<span id="Configuration_persistante_.C3.A0_l.27aide_de_la_r.C3.A8gle_udev"></span><span class="mw-headline" id="Configuration_persistante_à_l'aide_de_la_règle_udev">Configuration persistante à l'aide de la règle udev</span>
</h3>
<p>Pour que la configuration soit persistante après un redémarrage, on peut utiliser une règle <a href="../fr/Udev.html" title="Udev (Français)">udev</a> :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/69-hdparm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="block", KERNEL=="sda", RUN+="/usr/bin/hdparm -B 254 -S 0 /dev/sda"</pre>
<p>Étant donné qu'un disque peut être attribué de manière aléatoire à un <code>/dev/sd<i>X</i></code> en tant que périphérique, le disque peut également être identifié par son numéro de série comme expliqué dans <a href="../fr/Udev.html#Identifier_un_disque_par_son_num%C3%A9ro_de_s%C3%A9rie" title="Udev (Français)">Udev (Français)#Identifier un disque par son numéro de série</a>.
</p>
<p>Les systèmes dotés de plusieurs disques durs peuvent appliquer la règle de manière flexible en fonction de certains critères. Par exemple, pour appliquer les paramètres d'économie d'énergie à tous les disques rotatifs (disque dur avec tête rotative, excluant en particulier les <a href="../en/Solid_state_drive.html" class="mw-redirect" title="Solid state drive (Français)">solid state drives</a>), utilisez la règle suivante :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/69-hdparm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add|change", KERNEL=="sd[a-z]", ATTRS{queue/rotational}=="1", RUN+="/usr/bin/hdparm -B 127 /dev/%k"</pre>
<h3>
<span id="R.C3.A9-application_de_la_configuration_apr.C3.A8s_le_r.C3.A9veil"></span><span class="mw-headline" id="Ré-application_de_la_configuration_après_le_réveil">Ré-application de la configuration après le réveil</span>
</h3>
<p>Si la configuration est perdue après une suspension/hibernation du système, elle peut être réappliquée en utilisant <a href="../en/Power_management.html#Hooks_in_/usr/lib/systemd/system-sleep" title="Power management">systemd-sleep</a>.
</p>
<p>Placez un script dans <code>/usr/lib/systemd/system-sleep</code> et rendez-le exécutable :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/lib/systemd/system-sleep/hdparm</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh

case $1 in post)
        /usr/bin/hdparm -B 254 -S 0 /dev/sda
        ; ;
esac</pre>
<h3>
<span id="Mise_en_veille_d.27un_lecteur_directement_apr.C3.A8s_le_d.C3.A9marrage"></span><span class="mw-headline" id="Mise_en_veille_d'un_lecteur_directement_après_le_démarrage">Mise en veille d'un lecteur directement après le démarrage</span>
</h3>
<p>Un périphérique qui est rarement utilisé peut être mis en veille directement à la fin du processus de démarrage. Cela ne fonctionne pas avec la règle udev ci-dessus car cela se produit trop tôt. Pour lancer la commande lorsque le démarrage est terminé, il suffit de créer un service <a href="../fr/Systemd.html" title="Systemd (Français)">systemd</a> puis <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activez">activez</a>-le :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/hdparm.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=hdparm sleep

[Service]
Type=oneshot
ExecStart=/usr/bin/hdparm -q -S 120 -y /dev/sdb

[Install]
WantedBy=multi-user.target</pre>
<h3>
<span id="Utilisation_de_mat.C3.A9riel_non_pris_en_charge"></span><span class="mw-headline" id="Utilisation_de_matériel_non_pris_en_charge">Utilisation de matériel non pris en charge</span>
</h3>
<p>Certains disques ne prennent pas en charge l'extinction via hdparm. Un message d'erreur de diagnostic similaire au suivant est une bonne indication que c'est le cas :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># hdparm -S 240 /dev/sda</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/dev/sda:
setting standby to 240 (20 minutes)
HDIO_DRIVE_CMD(setidle) failed: Invalid argument
</pre>
<p>Pour certains autres disques, la commande hdparm est reconnue mais le disque ne respecte pas les paramètres (soit APM ou spin down timer). Ceci a été observé avec un disque dur Toshiba P300 (modèle HDWD120).
</p>
<p>De tels disques peuvent être mis hors tension en utilisant <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/hd-idle/">hd-idle</a></span><sup><small>AUR</small></sup> qui est fourni avec un service <a href="../fr/Systemd.html" title="Systemd (Français)">systemd (Français)</a>. Éditez <code>/etc/conf.d/hd-idle</code> et la valeur <code>HD_IDLE_OPTS</code>, puis <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Démarrez">démarrez</a> et <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activez">activez</a> <code>hd-idle.service</code>.
</p>
<p>Exemple utilisant un temps d'inactivité de 10 min pour <code>/dev/sda</code> et un temps d'inactivité de 1 min pour <code>/dev/disk/by-uuid/01CF0AC9AA5EAF70</code> :
</p>
<pre>HD_IDLE_OPTS="-i 0 -a /dev/sda -i 600 -a /dev/disk/by-uuid/01CF0AC9AA5EAF70 -i 60"
</pre>
<p>le paramètre de départ <code>-i 0</code> indique que la fonction hd-idle est désactivée sur les autres disques.
</p>
<h3>
<span id="Gestion_de_l.27alimentation_pour_les_disques_Western_Digital_Green"></span><span class="mw-headline" id="Gestion_de_l'alimentation_pour_les_disques_Western_Digital_Green">Gestion de l'alimentation pour les disques Western Digital Green</span>
</h3>
<p>Les disques durs <i>Western Digital Green</i> ont une minuterie spéciale <i>idle3</i> qui contrôle le temps d'attente du disque avant de positionner ses têtes dans leur position de parking et d'entrer dans un état de faible consommation d'énergie.  Le réglage d'usine par défaut est agressivement fixé à 8 secondes, ce qui peut entraîner des milliers de cycles de chargement/déchargement des têtes en un court laps de temps et éventuellement une défaillance prématurée, sans parler de l'impact sur les performances du disque qui doit souvent se réveiller avant d'effectuer des E/S de routine. Western Digital a publié une <a rel="nofollow" class="external text" href="https://web.archive.org/web/20190129000226/http://wdc.custhelp.com/app/answers/detail/a_id/5357">information</a>, affirmant que Linux n'est pas optimisé pour les périphériques de stockage à faible consommation et conseillant de réduire la fréquence d'enregistrement. Il existe différentes façons de modifier l'état <i>idle3</i> :
</p>
<ol>
<li>Western Digital fournit un utilitaire DOS <i>wdidle3.exe</i> à <a rel="nofollow" class="external text" href="https://support.wdc.com/downloads.aspx?p=113">télécharger</a> permettant de modifier ce paramètre. Cet utilitaire est conçu pour mettre à jour uniquement le firmware des disques durs suivants : WD1000FYPS, WD7500AYPS, WD7501AYPS mais il est connu pour être capable de modifier la minuterie <i>idle3</i> d'autres modèles Green également.</li>
<li>hdparm propose une implémentation de rétro-ingénierie derrière le paramètre <code>-J</code>, qui n'est pas aussi complète que le programme officiel original, même si elle semble fonctionner sur au moins quelques disques. Un réglage de 30 secondes est recommandé pour une utilisation sous Linux. Spécifiez une valeur de zéro (0) pour désactiver complètement la minuterie idle3 de WD ('<i>non recommandé</i>):<pre># hdparm -J 30 --please-destroy-my-drive /dev/sda</pre> Consultez <a href="#Configuration_persistante_%C3%A0_l'aide_de_la_r%C3%A8gle_udev">#Configuration persistante à l'aide de la règle udev</a> pour utiliser automatiquement ce paramètre sur les disques durs pris en charge.</li>
<li>Un autre utilitaire non officiel est fourni par le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=idle3-tools">idle3-tools</a></span>. Une valeur brute <code>'<i>idle3</i></code> est passée en paramètre de la commande <i>idle3ctl</i>. La correspondance entre cette valeur et le délai d'attente en secondes est fournie dans le tableau inférieur de <span class="plainlinks archwiki-template-man" title="$ man 8 idle3ctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/idle3ctl.8">idle3ctl(8)</a></span>. La commande suivante définit le temporisateur à 30 secondes:<pre># idle3ctl -s 129 /dev/sdc</pre> La commande suivante désactive complètement le timer (<i>non recommandé</i>):<pre># idle3ctl -d /dev/sdc</pre>
</li>
</ol>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Un cycle d'alimentation complet est nécessaire pour que tout changement prenne effet, quel que soit le programme ci-dessus utilisé. Cela signifie que le disque doit être mis hors tension puis sous tension, un simple redémarrage ne suffit pas.</li>
<li>Certains disques Western Digital Green sont également connus pour avoir une interprétation différente du paramètre de délai de mise en veille de hparm, <code>-S 1</code>, ce qui entraîne un délai de 10 minutes au lieu de 5 secondes.</li>
<li>La consommation d'énergie d'un disque Green est généralement d'environ 5,3 W en lecture/écriture, 4,7 W en mode veille et 0,7 W en mode veille.</li>
</ul>
</div>
<h2>
<span id="D.C3.A9pannage"></span><span class="mw-headline" id="Dépannage">Dépannage</span>
</h2>
<h3>
<span id="R.C3.A9initialisation_du_niveau_APM_apr.C3.A8s_la_suspension"></span><span class="mw-headline" id="Réinitialisation_du_niveau_APM_après_la_suspension">Réinitialisation du niveau APM après la suspension</span>
</h3>
<p>Le niveau APM peut être réinitialisé après une suspension, ce qui nécessite de le réexécuter après chaque reprise. Ceci peut être automatisé avec l'unité <a href="../fr/Systemd.html" title="Systemd (Français)">systemd</a> suivante (adaptée d'un <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?id=151640">fil du forum</a>) :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/apm.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
Description=Local system resume actions
After=suspend.target hybrid-sleep.target hibernate.target

[Service]
Type=simple
ExecStart=/usr/bin/hdparm -B 254 /dev/sda

[Install]
WantedBy=sleep.target</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> La <code>sleep.target</code> est requise par toutes les cibles <code>suspend</code>, <code>hybrid-sleep</code> et <code>hibernate</code>, mais elle termine le démarrage <i>avant</i> que le système soit suspendu, donc les trois cibles doivent être spécifiées explicitement. Consultez <a rel="nofollow" class="external autonumber" href="https://wiki.archlinux.org/index.php?title=Talk:Hdparm&amp;oldid=440457#Troubleshooting_APM_settings_after_suspend.2C_hibernate_or_hybrid-sleep">[2]</a>.</div>
<p>Vous pouvez également créer un <a href="../en/Power_management.html#Hooks_in_/usr/lib/systemd/system-sleep" title="Power management">hook dans /usr/lib/systemd/system-sleep</a>.
</p>
<h2><span class="mw-headline" id="Consulter_aussi">Consulter aussi</span></h2>
<ul><li>
<a rel="nofollow" class="external free" href="https://sourceforge.net/projects/hdparm/">https://sourceforge.net/projects/hdparm/</a> - hdparm sur SourceForge</li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../fr/Category:File_systems.html" title="Category:File systems (Français)">File systems (Français)</a></li>
<li><a href="../fr/Category:Storage.html" title="Category:Storage (Français)">Storage (Français)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Hdparm_(Fran%C3%A7ais)&amp;oldid=774890">https://wiki.archlinux.org/index.php?title=Hdparm_(Français)&amp;oldid=774890</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 April 2023, at 05:10.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
