<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Swap (Français) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Swap_Français rootpage-Swap_Français skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Espace_de_pagination" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Espace_de_pagination">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Espace de pagination</div>
			</a>
			
			<ul id="toc-Espace_de_pagination-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Partition_de_swap" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Partition_de_swap">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Partition de swap</div>
			</a>
			
				<button aria-controls="toc-Partition_de_swap-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Partition de swap subsection
				</button>
			
			<ul id="toc-Partition_de_swap-sublist" class="sidebar-toc-list">
				<li id="toc-Activation_par_systemd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Activation_par_systemd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Activation par systemd</div>
			</a>
			
			<ul id="toc-Activation_par_systemd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Désactivation_de_la_swap" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#D%C3%A9sactivation_de_la_swap">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Désactivation de la swap</div>
			</a>
			
			<ul id="toc-Désactivation_de_la_swap-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Fichier_d'échange" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Fichier_d'%C3%A9change">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Fichier d'échange</div>
			</a>
			
				<button aria-controls="toc-Fichier_d'échange-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Fichier d'échange subsection
				</button>
			
			<ul id="toc-Fichier_d'échange-sublist" class="sidebar-toc-list">
				<li id="toc-Manuellement" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Manuellement">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Manuellement</div>
			</a>
			
			<ul id="toc-Manuellement-sublist" class="sidebar-toc-list">
				<li id="toc-Création_de_fichiers_d'échange" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Cr%C3%A9ation_de_fichiers_d'%C3%A9change">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1.1</span>Création de fichiers d'échange</div>
			</a>
			
			<ul id="toc-Création_de_fichiers_d'échange-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Supprimer_le_fichier_swap" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Supprimer_le_fichier_swap">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1.2</span>Supprimer le fichier swap</div>
			</a>
			
			<ul id="toc-Supprimer_le_fichier_swap-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Automatisé" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Automatis%C3%A9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Automatisé</div>
			</a>
			
			<ul id="toc-Automatisé-sublist" class="sidebar-toc-list">
				<li id="toc-systemd-swap" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#systemd-swap">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2.1</span>systemd-swap</div>
			</a>
			
			<ul id="toc-systemd-swap-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Chiffrement_de_la_swap" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Chiffrement_de_la_swap">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Chiffrement de la swap</div>
			</a>
			
			<ul id="toc-Chiffrement_de_la_swap-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Performance" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Performance">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Performance</div>
			</a>
			
				<button aria-controls="toc-Performance-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Performance subsection
				</button>
			
			<ul id="toc-Performance-sublist" class="sidebar-toc-list">
				<li id="toc-Swappiness" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Swappiness">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>Swappiness</div>
			</a>
			
			<ul id="toc-Swappiness-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Pression_du_cache_VFS" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Pression_du_cache_VFS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>Pression du cache VFS</div>
			</a>
			
			<ul id="toc-Pression_du_cache_VFS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Priorité" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Priorit%C3%A9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>Priorité</div>
			</a>
			
			<ul id="toc-Priorité-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Utilisation_de_zswap_ou_zram" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Utilisation_de_zswap_ou_zram">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Utilisation de zswap ou zram</div>
			</a>
			
			<ul id="toc-Utilisation_de_zswap_ou_zram-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Striping" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Striping">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.5</span>Striping</div>
			</a>
			
			<ul id="toc-Striping-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../fr/Swap.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Swap_(Fran%C3%A7ais)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">français</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../fr/Swap.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Swap_(Fran%C3%A7ais)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Swap_(Fran%C3%A7ais)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../fr/Swap.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Swap_(Fran%C3%A7ais)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Swap_(Fran%C3%A7ais)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="fr" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>État de la traduction:</strong> Cet article est la version francophone de <a href="../en/Swap.html" title="Swap">Swap</a>. Date de la dernière traduction: 2022-10-03. Vous pouvez aider à synchroniser la traduction s'il y a eu des <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Swap&amp;diff=0&amp;oldid=745512">changements</a> dans la version anglaise.</div>
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../fr/Fstab.html" title="Fstab (Français)">fstab (Français)</a></li>
<li><a href="../en/Power_management/Suspend_and_hibernate.html#Hibernation" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate#Hibernation</a></li>
<li><a href="../en/Zswap.html" title="Zswap">Zswap</a></li>
<li><a href="../en/Swap_on_video_RAM.html" class="mw-redirect" title="Swap on video ram">Swap on video ram</a></li>
<li><a href="../en/ZFS.html#Swap_volume" title="ZFS">ZFS#Swap volume</a></li>
<li><a href="../en/Dm-crypt/Swap_encryption.html" title="Dm-crypt/Swap encryption">dm-crypt/Swap encryption</a></li>
</ul>
</div>
<p>Cette page fournit une introduction à l'<a href="https://en.wikipedia.org/wiki/fr:Espace_d%27%C3%A9change" class="extiw" title="wikipedia:fr:Espace d'échange">espace d'échange («swap»)</a> sur GNU/Linux. Elle couvre la création et l'activation des partitions swap et des fichiers swap.
</p>
<p>Extrait de <a rel="nofollow" class="external text" href="https://www.linux.com/news/all-about-linux-swap-space/">All about Linux swap space</a> :
</p>
<dl><dd>Linux divise sa mémoire physique («RAM») en morceaux de mémoire appelés pages. «Swap»-er est le processus par lequel une page de mémoire est copiée dans l'espace préconfiguré sur le disque dur, appelé espace d'échange ou «swap», pour libérer cette page de mémoire. Les tailles combinées de la mémoire physique et de l'espace d'échange constituent la quantité de mémoire virtuelle disponible.</dd></dl>
<p>La prise en charge de l'espace d'échange est assurée par le noyau Linux et les utilitaires de l'espace utilisateur du paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=util-linux">util-linux</a></span>.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Espace_de_pagination">Espace de pagination</span></h2>
<p>L'espace de pagination peut prendre la forme d'une partition de disque ou d'un fichier. Les utilisateurs peuvent créer un espace de pagination pendant l'installation ou à tout moment par la suite. L'espace d'échange peut être utilisé à deux fins, pour étendre la mémoire virtuelle au-delà de la mémoire physique installée (RAM), et aussi pour prendre en charge la <a href="../en/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">suspension sur disque</a>.
</p>
<p>L'intérêt d'étendre la mémoire virtuelle avec le swap dépend de la quantité de mémoire physique installée. Si la quantité de mémoire physique est inférieure à la quantité de mémoire requise pour exécuter tous les programmes souhaités, alors il peut être bénéfique d'activer l'échange. Cela permet d'éviter le situations d'<a href="https://en.wikipedia.org/wiki/fr:Out_of_memory" class="extiw" title="wikipedia:fr:Out of memory">insuffisance de mémoire</a>, où le mécanisme «OOM killer» du noyau Linux tentera automatiquement de libérer de la mémoire en tuant les processus. Pour augmenter la quantité de mémoire virtuelle à la quantité requise, ajoutez la différence nécessaire (ou plus) comme espace d'échange.
</p>
<p>Le plus gros inconvénient de l'activation de l'espace d'échange est sa baisse de performance, consultez la section <a href="#Performance">#Performance</a>. Par conséquent, l'activation de l'espace de pagination est une question de préférence personnelle : certains préfèrent que les programmes soient tués plutôt que d'utiliser du «swap» et d'autres préfèrent utiliser la «swap» et un système plus lent lorsque la mémoire physique est épuisée.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Il n'y a aucune différence de performance entre l'utilisation d'une partition d'échange et d'un fichier d'échange contigu.</div>
<p>Pour vérifier l'état du swap, utilisez :
</p>
<pre>$ swapon --show
</pre>
<p>Ou pour afficher la mémoire physique ainsi que l'utilisation de l'espace de pagination :
</p>
<pre>$ free -h
</pre>
<h2><span class="mw-headline" id="Partition_de_swap">Partition de swap</span></h2>
<p>Une partition de swap peut être créée avec la plupart des <a href="../en/Partitioning.html#Partitioning_tools" class="mw-redirect" title="Partitioning tools">outils de partitionnement</a> GNU/Linux. Les partitions de swap sont désignées comme étant de type <code>82</code> en MBR et <code>0657FD6D-A4AB-43C4-84E5-0933C84B4F4F</code> en GPT.
</p>
<p>Pour configurer une partition comme «Linux swap», on utilise la commande <span class="plainlinks archwiki-template-man" title="$ man 8 mkswap"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/mkswap.8">mkswap(8)</a></span>. Par exemple :
</p>
<pre># mkswap /dev/sd<i>xy</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> Toutes les données de la partition spécifiée seront perdues.</div>
<p>Pour activer le périphérique pour la pagination :
</p>
<pre># swapon /dev/sd<i>xy</i>
</pre>
<p>Pour activer cette partition swap au démarrage, ajoutez une entrée à <code>/etc/fstab</code> :
</p>
<pre>UUID=<i>device_UUID</i> none swap defaults 0 0
</pre>
<p>où <code><i>device_UUID</i></code> est l'<a href="../fr/Persistent_block_device_naming.html#by-uuid" title="Persistent block device naming (Français)">UUID</a> de l'espace d'échange.
</p>
<p>Consultez <a href="../fr/Fstab.html" title="Fstab (Français)">fstab (Français)</a> pour la syntaxe du fichier.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'entrée fstab est facultative si la partition d'échange est située sur un périphérique utilisant GPT. Consultez <a href="#Activation_par_systemd">#Activation par systemd</a>.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Attention:</strong> L'activation du discard sur les configurations RAID à l'aide de mdadm provoquera un blocage du système au démarrage et pendant l'exécution, si vous utilisez swapon.</div>
<h3><span class="mw-headline" id="Activation_par_systemd">Activation par systemd</span></h3>
<p><a href="../fr/Systemd.html" title="Systemd (Français)">systemd</a> active les partitions d'échange selon deux mécanismes différents. Tous deux sont des exécutables dans <code>/usr/lib/systemd/system-generators</code>. Les générateurs sont exécutés au démarrage et créent des unités systemd natives pour les montages. Le premier, <code>systemd-fstab-generator</code>, lit le fstab pour générer des unités, y compris une unité pour le swap. Le second, <code>systemd-gpt-auto-generator</code> inspecte le disque racine pour générer des unités. Il fonctionne sur les disques GPT uniquement, et peut identifier les partitions d'échange par leur type GUID, consultez <a href="../fr/Systemd.html#Montage_automatique_d'une_partition_GPT" title="Systemd (Français)">Systemd (Français)#Montage automatique d'une partition GPT</a> pour plus d'informations.
</p>
<h3>
<span id="D.C3.A9sactivation_de_la_swap"></span><span class="mw-headline" id="Désactivation_de_la_swap">Désactivation de la swap</span>
</h3>
<p>Pour désactiver un espace d'échange spécifique :
</p>
<pre># swapoff /dev/sd<i>xy</i>
</pre>
<p>Vous pouvez également utiliser le paramètre <code>-a</code> pour désactiver tout l'espace d'échange.
</p>
<p>Comme l'espace d'échange est géré par systemd, il sera réactivé au prochain démarrage du système. Pour désactiver définitivement l'activation automatique la swap détecté, exécutez <code>systemctl --type swap</code> pour trouver l'unité <i>.swap</i> responsable et <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Masquez">masquez</a>-la.
</p>
<h2>
<span id="Fichier_d.27.C3.A9change"></span><span class="mw-headline" id="Fichier_d'échange">Fichier d'échange</span>
</h2>
<p>En tant qu'alternative à la création d'une partition entière, un fichier d'échange offre la possibilité de varier sa taille à la volée, et est plus facilement supprimé. Cela peut être particulièrement souhaitable si l'espace disque est limité (par exemple, un SSD de taille modeste).
</p>
<h3><span class="mw-headline" id="Manuellement">Manuellement</span></h3>
<h4>
<span id="Cr.C3.A9ation_de_fichiers_d.27.C3.A9change"></span><span class="mw-headline" id="Création_de_fichiers_d'échange">Création de fichiers d'échange</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../en/Btrfs.html" class="mw-redirect" title="Btrfs (Français)">Btrfs</a> prend en charge le fichier d'échange avec des limitations depuis la version 5.0 du noyau Linux, pour ce système de fichiers, suivez la procédure décrite dans <a href="../en/Btrfs.html#Swap_file" title="Btrfs">Btrfs#Swap file</a> pour initialiser le fichier d'échange.</div>
<p>Utilisez <a href="../en/Dd.html" title="Dd">dd</a> pour créer un fichier swap de la taille de votre choix. Par exemple, pour créer un fichier swap de 512 MiB :
</p>
<pre># dd if=/dev/zero of=/swapfile bs=1M count=512 status=progress
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'utilisation de <i>dd</i> pour allouer un fichier swap est la solution la plus portable, consultez <span class="plainlinks archwiki-template-man" title="$ man 8 swapon"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/swapon.8#Files_with_holes">swapon(8) § Files with holes</a></span> pour plus de détails.</div>
<p>Définissez les bonnes <a href="../en/File_permissions_and_attributes.html" class="mw-redirect" title="Permissions">permissions</a> (un fichier swap lisible par tous est une énorme vulnérabilité locale) :
</p>
<pre># chmod 0600 /swapfile
</pre>
<p>Après avoir créé le fichier de taille correcte, formatez-le en swap :
</p>
<pre># mkswap -U clear /swapfile
</pre>
<p>Activez le fichier d'échange :
</p>
<pre># swapon /swapfile
</pre>
<p>Enfin, modifiez la configuration fstab pour ajouter une entrée pour le fichier d'échange :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fstab</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">/swapfile none swap defaults 0 0
</pre>
<p>Pour plus d'informations, consultez <a href="../fr/Fstab.html#Utilisation" title="Fstab (Français)">Fstab (Français)#Utilisation</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Le fichier d'échange doit être spécifié par son emplacement sur le système de fichiers, et non par son UUID ou son LABEL.</li>
<li>Lorsque vous utilisez <a href="../en/Btrfs.html" class="mw-redirect" title="Btrfs (Français)">Btrfs</a>, n'oubliez pas d'ajouter également le sous-volume créé à la liste, et de supprimez les options <code>discard,autodefrag</code> du sous-volume monté en premier (qui contrôlera ces paramètres pour l'ensemble du FS).</li>
<li>La compression doit également être désactivée, mais l'attribut <code>No_COW</code> (précédemment défini avec <code>chattr +C</code>) s'en charge.</li>
</ul>
</div>
<h4><span class="mw-headline" id="Supprimer_le_fichier_swap">Supprimer le fichier swap</span></h4>
<p>Pour supprimer un fichier swap, il faut d'abord le désactiver, puis le supprimer :
</p>
<pre># swapoff /swapfile
# rm -f /swapfile
</pre>
<p>Enfin, supprimez l'entrée correspondante de <code>/etc/fstab</code>.
</p>
<h3>
<span id="Automatis.C3.A9"></span><span class="mw-headline" id="Automatisé">Automatisé</span>
</h3>
<h4><span class="mw-headline" id="systemd-swap">systemd-swap</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> L'auteur recommande maintenant <a rel="nofollow" class="external text" href="https://github.com/Nefelim4ag/systemd-swap#%EF%B8%8F-current-code-quality-and-commit-frequency-is-low-%EF%B8%8F">recommande</a> d'utiliser <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=zram-generator">zram-generator</a></span> à la place, en raison de la faible fréquence de commit et du fait que <a href="../fr/Improving_performance.html#zram_ou_zswap" class="mw-redirect" title="ZRAM (Français)">ZRAM</a>  couvre les besoins de la plupart des utilisateurs.</div>
<p>systemd-swap est un script permettant de créer un espace de pagination hybride à partir de <a href="../fr/Improving_performance.html#zram_ou_zswap" class="mw-redirect" title="ZRAM (Français)">ZRAM</a>  swap, de fichiers de pagination et de partitions de pagination. Il n'est pas affilié au projet systemd.
</p>
<p><a href="../fr/Help:Reading.html#Installation_de_paquets" class="mw-redirect" title="Installez">Installez</a> le paquet <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=systemd-swap">systemd-swap</a></span>. Décommentez et définissez <code>swapfc_enabled=1</code> dans la section <i>Swap File Chunked</i> de <code>/etc/systemd/swap.conf</code>. <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Démarrez">Démarrez</a> et <a href="../fr/Systemd.html#Utilisation_des_unit%C3%A9s" class="mw-redirect" title="Activez">activez</a> le service <code>systemd-swap</code>.
</p>
<p>Visitez la page <a rel="nofollow" class="external text" href="https://github.com/Nefelim4ag/systemd-swap">GitHub de l'auteur</a> pour plus d'informations et pour mettre en place la <a rel="nofollow" class="external text" href="https://github.com/Nefelim4ag/systemd-swap/blob/master/README.md#about-configuration">configuration recommandée</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>Si le journal continue à afficher l'avertissement suivant <code>systemd-swap[...] : WARN : swapFC : ENOSPC</code> et qu'aucun fichier d'échange n'est créé, vous devez décommenter et définir <code>swapfc_force_preallocated=1</code> dans <code>/etc/systemd/swap.conf</code>.</li>
<li>Le fichier d'échange créé par systemd-swap ne peut pas être facilement utilisé pour l'<a href="../en/Power_management/Suspend_and_hibernate.html#Hibernation" class="mw-redirect" title="Hibernation">hibernation</a>. Consultez <a rel="nofollow" class="external text" href="https://github.com/Nefelim4ag/systemd-swap/issues/85">systemd-swap issue 85</a>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Chiffrement_de_la_swap">Chiffrement de la swap</span></h2>
<p>Consultez <a href="../en/Dm-crypt/Swap_encryption.html" title="Dm-crypt/Swap encryption">Dm-crypt/Swap encryption</a>.
</p>
<h2><span class="mw-headline" id="Performance">Performance</span></h2>
<p>Les opérations de swap sont généralement beaucoup plus lentes que l'accès direct aux données en RAM. Désactiver entièrement le swap pour améliorer les performances peut parfois conduire à une dégradation, car cela diminue la mémoire disponible pour les caches du système de fichier virtuel (VFS), entraînant des utilisations du disque plus fréquentes et plus coûteuses.
</p>
<p>Les valeurs de swap peuvent être ajustées pour améliorer les performances :
</p>
<h3><span class="mw-headline" id="Swappiness">Swappiness</span></h3>
<p>Le paramètre <a href="../en/Sysctl.html" title="Sysctl">sysctl</a> <i>swappiness</i> représente la préférence (ou l'évitement) du noyau pour l'espace swap. Swappiness peut avoir une valeur entre 0 et 200 (max 100 si Linux &lt; 5.8), la valeur par défaut est 60. Une valeur basse fait que le noyau évite le swapping, une valeur élevée fait que le noyau essaie d'utiliser l'espace de swap, et une valeur de 100 signifie que le coût d'E/S est supposé être égal. L'utilisation d'une valeur faible sur une mémoire suffisante est connue pour améliorer la réactivité sur de nombreux systèmes.
</p>
<p>Pour vérifier la valeur actuelle de swapiness :
</p>
<pre>$ sysctl vm.swappiness
</pre>
<p>Alternativement, les fichiers <code>/sys/fs/cgroup/memory/memory.swappiness</code> (spécifique aux cgroup v1) ou <code>/proc/sys/vm/swappiness</code> peuvent être lus afin d'obtenir la valeur entière brute.
</p>
<p>Pour définir temporairement la valeur de swappiness :
</p>
<pre># sysctl -w vm.swappiness=10
</pre>
<p>Pour définir la valeur de permutation de manière permanente, créez un fichier de configuration <span class="plainlinks archwiki-template-man" title="$ man 5 sysctl.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.d.5">sysctl.d(5)</a></span>. Par exemple :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/99-swappiness.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">vm.swappiness=10</pre>
<p>Pour que le <a href="../fr/Arch_boot_process.html#Chargeur_d'amor%C3%A7age" class="mw-redirect" title="Chargeur d'amorçage">chargeur d'amorçage</a> définisse la «swappiness» lors du chargement du noyau, ajoutez un <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">paramètre du noyau</a>, par exemple <code>sysctl.vm.swappiness=10</code>.
</p>
<p>Pour tester et en savoir plus sur les raisons pour lesquelles cela peut fonctionner, jetez un œil à <a rel="nofollow" class="external text" href="https://rudd-o.com/en/linux-and-free-software/tales-from-responsivenessland-why-linux-feels-slow-and-how-to-fix-that">cet article</a>.
</p>
<h3><span class="mw-headline" id="Pression_du_cache_VFS">Pression du cache VFS</span></h3>
<p>Un autre paramètre <i>sysctl</i> qui affecte les performances de swap est <code>vm.vfs_cache_pressure</code>, qui contrôle la tendance du noyau à récupérer la mémoire qui est utilisée pour la mise en cache des caches VFS, par rapport au pagecache et au swap. L'augmentation de cette valeur augmente la vitesse à laquelle les caches VFS sont récupérés <a rel="nofollow" class="external autonumber" href="https://web.archive.org/web/20171004100853/http://doc.opensuse.org/documentation/leap/tuning/html/book.sle.tuning/cha.tuning.memory.html#cha.tuning.memory.vm.reclaim">[1]</a>. Pour plus d'informations, consultez la <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/sysctl/vm.html">documentation du noyau Linux</a>.
</p>
<h3>
<span id="Priorit.C3.A9"></span><span class="mw-headline" id="Priorité">Priorité</span>
</h3>
<p>Si vous avez plus d'un fichier d'échange ou d'une partition d'échange, vous devriez envisager d'attribuer une valeur de priorité (0 à 32767) pour chaque zone d'échange. Le système utilisera les zones d'échange de priorité supérieure avant d'utiliser les zones d'échange de priorité inférieure. Par exemple, si vous avez un disque plus rapide (<code>/dev/sda</code>) et un disque plus lent (<code>/dev/sdb</code>), attribuez une priorité plus élevée à la zone d'échange située sur le périphérique le plus rapide. Les priorités peuvent être attribuées dans <a href="../fr/Fstab.html" title="Fstab (Français)">fstab</a> via le paramètre <code>pri</code> :
</p>
<pre>/dev/sda1 none swap defaults,pri=100 0 0
/dev/sdb2 none swap defaults,pri=10 0 0
</pre>
<p>Ou via le paramètre <code>--priority</code> de <i>swapon</i> :
</p>
<pre># swapon --priority 100 /dev/sda1
</pre>
<p>Si deux zones ou plus ont la même priorité, et qu'il s'agit de la plus haute priorité disponible, les pages sont allouées entre elles en alternance stricte.
</p>
<h3><span class="mw-headline" id="Utilisation_de_zswap_ou_zram">Utilisation de zswap ou zram</span></h3>
<p><a href="../en/Zswap.html" title="Zswap">Zswap</a> est une fonctionnalité du noyau Linux qui fournit un cache en écriture compressé pour les pages échangées, <a href="../fr/Improving_performance.html#zram_ou_zswap" class="mw-redirect" title="ZRAM (Français)">ZRAM</a> crée un bloc d'échange virtuel compressé en mémoire comme alternative à un fichier ou une partition d'échange sur le disque. Les deux approches augmentent les performances et diminue les opérations d'entrée/sortie sur disque. 
</p>
<h3><span class="mw-headline" id="Striping">Striping</span></h3>
<p>Il n'est pas nécessaire d'utiliser <a href="../en/RAID.html" title="RAID">RAID</a> améliorer les performance du swap. Le noyau lui-même peut répartir le swap sur plusieurs périphériques, si vous leur donnez simplement la même priorité dans le fichier <code>/etc/fstab</code>. Reportez-vous à <a rel="nofollow" class="external text" href="https://unthought.net/Software-RAID.HOWTO/Software-RAID.HOWTO-2.html#ss2.3">The Software-RAID HOWTO</a> pour plus de détails.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../fr/Category:File_systems.html" title="Category:File systems (Français)">File systems (Français)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Swap_(Fran%C3%A7ais)&amp;oldid=772300">https://wiki.archlinux.org/index.php?title=Swap_(Français)&amp;oldid=772300</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 March 2023, at 12:33.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
