<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>IPv6 (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-IPv6_Русский rootpage-IPv6_Русский skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Обнаружение_соседей" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%9E%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%B5%D0%B9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Обнаружение соседей</div>
			</a>
			
			<ul id="toc-Обнаружение_соседей-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Автоконфигурация_узла_(SLAAC)" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%90%D0%B2%D1%82%D0%BE%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D1%83%D0%B7%D0%BB%D0%B0_(SLAAC)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Автоконфигурация узла (SLAAC)</div>
			</a>
			
				<button aria-controls="toc-Автоконфигурация_узла_(SLAAC)-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Автоконфигурация узла (SLAAC) subsection
				</button>
			
			<ul id="toc-Автоконфигурация_узла_(SLAAC)-sublist" class="sidebar-toc-list">
				<li id="toc-Клиент" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9A%D0%BB%D0%B8%D0%B5%D0%BD%D1%82">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Клиент</div>
			</a>
			
			<ul id="toc-Клиент-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Шлюз" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%A8%D0%BB%D1%8E%D0%B7">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Шлюз</div>
			</a>
			
			<ul id="toc-Шлюз-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Privacy_Extensions" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Privacy_Extensions">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Privacy Extensions</div>
			</a>
			
				<button aria-controls="toc-Privacy_Extensions-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Privacy Extensions subsection
				</button>
			
			<ul id="toc-Privacy_Extensions-sublist" class="sidebar-toc-list">
				<li id="toc-dhcpcd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#dhcpcd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>dhcpcd</div>
			</a>
			
			<ul id="toc-dhcpcd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#NetworkManager">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>NetworkManager</div>
			</a>
			
			<ul id="toc-NetworkManager-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-networkd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#systemd-networkd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>systemd-networkd</div>
			</a>
			
			<ul id="toc-systemd-networkd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-connman" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#connman">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>connman</div>
			</a>
			
			<ul id="toc-connman-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Постоянный_приватный_адрес" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%9F%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%BD%D1%8B%D0%B9_%D0%BF%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D1%8B%D0%B9_%D0%B0%D0%B4%D1%80%D0%B5%D1%81">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Постоянный приватный адрес</div>
			</a>
			
				<button aria-controls="toc-Постоянный_приватный_адрес-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Постоянный приватный адрес subsection
				</button>
			
			<ul id="toc-Постоянный_приватный_адрес-sublist" class="sidebar-toc-list">
				<li id="toc-NetworkManager_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#NetworkManager_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>NetworkManager</div>
			</a>
			
			<ul id="toc-NetworkManager_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Статический_адрес" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%A1%D1%82%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B0%D0%B4%D1%80%D0%B5%D1%81">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Статический адрес</div>
			</a>
			
			<ul id="toc-Статический_адрес-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-IPv6_и_PPPoE" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#IPv6_%D0%B8_PPPoE">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>IPv6 и PPPoE</div>
			</a>
			
			<ul id="toc-IPv6_и_PPPoE-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Делегирование_префикса_(DHCPv6-PD)" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%94%D0%B5%D0%BB%D0%B5%D0%B3%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%D0%B0_(DHCPv6-PD)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7</span>Делегирование префикса (DHCPv6-PD)</div>
			</a>
			
				<button aria-controls="toc-Делегирование_префикса_(DHCPv6-PD)-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Делегирование префикса (DHCPv6-PD) subsection
				</button>
			
			<ul id="toc-Делегирование_префикса_(DHCPv6-PD)-sublist" class="sidebar-toc-list">
				<li id="toc-dhcpcd_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#dhcpcd_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.1</span>dhcpcd</div>
			</a>
			
			<ul id="toc-dhcpcd_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-WIDE-DHCPv6" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#WIDE-DHCPv6">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.2</span>WIDE-DHCPv6</div>
			</a>
			
			<ul id="toc-WIDE-DHCPv6-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-networkd_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#systemd-networkd_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.3</span>systemd-networkd</div>
			</a>
			
			<ul id="toc-systemd-networkd_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Другие_клиенты" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BA%D0%BB%D0%B8%D0%B5%D0%BD%D1%82%D1%8B">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.4</span>Другие клиенты</div>
			</a>
			
			<ul id="toc-Другие_клиенты-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Отключение_IPv6" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_IPv6">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8</span>Отключение IPv6</div>
			</a>
			
				<button aria-controls="toc-Отключение_IPv6-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Отключение IPv6 subsection
				</button>
			
			<ul id="toc-Отключение_IPv6-sublist" class="sidebar-toc-list">
				<li id="toc-Отключение_функциональности" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%BE%D0%BD%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.1</span>Отключение функциональности</div>
			</a>
			
			<ul id="toc-Отключение_функциональности-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Другие_программы" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%94%D1%80%D1%83%D0%B3%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2</span>Другие программы</div>
			</a>
			
			<ul id="toc-Другие_программы-sublist" class="sidebar-toc-list">
				<li id="toc-dhcpcd_3" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#dhcpcd_3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.1</span>dhcpcd</div>
			</a>
			
			<ul id="toc-dhcpcd_3-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-NetworkManager_3" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#NetworkManager_3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.2</span>NetworkManager</div>
			</a>
			
			<ul id="toc-NetworkManager_3-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ntpd" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#ntpd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.3</span>ntpd</div>
			</a>
			
			<ul id="toc-ntpd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-GnuPG" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#GnuPG">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.4</span>GnuPG</div>
			</a>
			
			<ul id="toc-GnuPG-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-sshd" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#sshd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.5</span>sshd</div>
			</a>
			
			<ul id="toc-sshd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-systemd-timesyncd" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#systemd-timesyncd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.2.6</span>systemd-timesyncd</div>
			</a>
			
			<ul id="toc-systemd-timesyncd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-systemd-networkd_3" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#systemd-networkd_3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8.3</span>systemd-networkd</div>
			</a>
			
			<ul id="toc-systemd-networkd_3-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Использование_IPv4_вместо_IPv6" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_IPv4_%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%BE_IPv6">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">9</span>Использование IPv4 вместо IPv6</div>
			</a>
			
			<ul id="toc-Использование_IPv4_вместо_IPv6-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Смотрите_также" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">10</span>Смотрите также</div>
			</a>
			
			<ul id="toc-Смотрите_также-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../ru/IPv6.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">русский</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../ru/IPv6.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../ru/IPv6.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="ru" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Ссылки по теме</p>
<ul>
<li><a href="../en/IPv6_tunnel_broker_setup.html" title="IPv6 tunnel broker setup">IPv6 tunnel broker setup</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/IPv6.html" title="IPv6">IPv6</a>. Дата последней синхронизации: 10 июля 2021. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=IPv6&amp;diff=0&amp;oldid=684452">изменения</a>.</div>
<p>В Arch Linux протокол <a href="https://en.wikipedia.org/wiki/ru:IPv6" class="extiw" title="wikipedia:ru:IPv6">IPv6</a> включён по умолчанию.
</p>
<p>Статья <a rel="nofollow" class="external text" href="https://tldp.org/HOWTO/Linux+IPv6-HOWTO/index.html">Linux IPv6 HOWTO</a>, хоть и давно не обновлялась, содержит подробную информацию об IPv6, от основ до более сложных тем. Если вы слабо знакомы с данным протоколом, то стоит сначала прочесть её.
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id=".D0.9E.D0.B1.D0.BD.D0.B0.D1.80.D1.83.D0.B6.D0.B5.D0.BD.D0.B8.D0.B5_.D1.81.D0.BE.D1.81.D0.B5.D0.B4.D0.B5.D0.B9"></span><span class="mw-headline" id="Обнаружение_соседей">Обнаружение соседей</span>
</h2>
<p>Пинг по адресу многоадресной рассылки <code>ff02::1</code> заставит все хосты в локальной сети ответить. При этом нужно указать сетевой интерфейс:
</p>
<pre>$ ping ff02::1%eth0
</pre>
<p>После этого список "соседей" по локальной сети можно вывести командой
</p>
<pre>$ ip -6 neigh
</pre>
<p>Аналогично, если сделать пинг по адресу <code>ff02::2</code>, то ответят только маршрутизаторы локальной сети.
</p>
<p>Если добавить опцию <code>-I <i>ваш-глобальный-ipv6</i></code> в пинг-запрос, хосты локальной сети ответят с использованием глобальных адресов. В этом случае сетевой интерфейс можно не указывать:
</p>
<pre>$ ping -I 2001:4f8:fff6::21 ff02::1
</pre>
<h2>
<span id=".D0.90.D0.B2.D1.82.D0.BE.D0.BA.D0.BE.D0.BD.D1.84.D0.B8.D0.B3.D1.83.D1.80.D0.B0.D1.86.D0.B8.D1.8F_.D1.83.D0.B7.D0.BB.D0.B0_.28SLAAC.29"></span><span class="mw-headline" id="Автоконфигурация_узла_(SLAAC)">Автоконфигурация узла (SLAAC)</span>
</h2>
<p>Простейший способ получения IPv6-адреса в уже настроенной сети — автоконфигурация узла (SLAAC, Stateless address autoconfiguration). При этом адрес автоматически вычисляется на основании объявленного маршрутизатором префикса сети. Никакие дальнейшие настройки или использование специализированного ПО вроде DHCP-клиента не требуются.
</p>
<h3>
<span id=".D0.9A.D0.BB.D0.B8.D0.B5.D0.BD.D1.82"></span><span class="mw-headline" id="Клиент">Клиент</span>
</h3>
<p>Если вы используете <a href="../en/Netctl.html" class="mw-redirect" title="Netctl (Русский)">netctl</a>, то нужно только добавить одну строку в файл настроек вашей проводной или беспроводной сети.
</p>
<pre>IP6=stateless
</pre>
<p>Если вы используете <a href="../en/NetworkManager.html" class="mw-redirect" title="NetworkManager (Русский)">NetworkManager</a>, то он автоматически включит использование IPv6-адресов, если таковые объявлены в сети.
</p>
<p>Нужно также заметить, что для нормальной работы автоконфигурации должны быть разрешены пакеты ICMP для IPv6. Поэтому необходимо добавить разрешения для пакетов <code>ipv6-icmp</code> в настройки межсетевого экрана. Если вы используете <a href="../ru/Simple_stateful_firewall.html" title="Simple stateful firewall (Русский)">брандмауэр</a> на основе <a href="../ru/Iptables.html" title="Iptables (Русский)">iptables</a>, то добавьте следующее правило:
</p>
<pre>-A INPUT -p ipv6-icmp -j ACCEPT
</pre>
<p>Если вы используете другой интерфейс межсетевого экрана (ufw, shorewall и т.д.), то инструкции по разрешению пакетов <code>ipv6-icmp</code> нужно искать в документации.
</p>
<p>Если вы выбрали сетевой менеджер, который не поддерживает разрешение DNS с бесконтекстным (stateless) IPv6 (например, netctl), то для этох целей можно воспользоваться демоном  <span class="plainlinks archwiki-template-man" title="$ man 8 rdnssd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/rdnssd.8">rdnssd(8)</a></span> из пакета <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ndisc6">ndisc6</a></span>.
</p>
<h3>
<span id=".D0.A8.D0.BB.D1.8E.D0.B7"></span><span class="mw-headline" id="Шлюз">Шлюз</span>
</h3>
<p>Чтобы соответствующим образом работать с адресами IPv6 клиентских устройств вашей сети, нужно настроить демон объявлений (advertisement daemon). Для этой задачи используется входящий в <a href="../ru/Official_repositories.html" class="mw-redirect" title="Официальные репозитории">официальные репозитории</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=radvd">radvd</a></span>. Настройка <i>radvd</i> довольно проста. Добавьте следующие строки в файл <code>/etc/radvd.conf</code>, заменив <code>LAN</code> на название вашего сетевого интерфейса:
</p>
<pre>interface LAN {
  AdvSendAdvert on;
  MinRtrAdvInterval 3;
  MaxRtrAdvInterval 10;
  prefix ::/64 {
    AdvOnLink on;
    AdvAutonomous on;
    AdvRouterAddr on;
  };
};
</pre>
<p>Такая настройка скажет клиентам выбрать адреса из объявленного блока <code>/64</code>. Обратите внимание, что эта настройка объявляет <i>все доступные префиксы</i>, привязанные к сетевому интерфейсу. Если вы хотите указать конкретные префиксы, то замените <code>::/64</code> на необходимый, например, <code>2001:DB8::/64</code>. Блок настроек <code>prefix</code> нужно повторить для каждого указанного префикса.
</p>
<p>Чтобы объявить DNS-сервера клиентам вашей локальной сети, можно использовать предлагаемую протоколом обнаружения соседей <a href="https://en.wikipedia.org/wiki/ru:%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_%D0%BE%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%BE%D1%81%D0%B5%D0%B4%D0%B5%D0%B9#.D0.A2.D0.B5.D1.85.D0.BD.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B5_.D0.B4.D0.B5.D1.82.D0.B0.D0.BB.D0.B8" class="extiw" title="wikipedia:ru:Протокол обнаружения соседей">функциональность RDNSS</a>. Например, добавьте следующие строки к файлу <code>/etc/radvd.conf</code>, чтобы объявить DNSv6-сервер Google:
</p>
<pre>RDNSS 2001:4860:4860::8888 2001:4860:4860::8844 {
};
</pre>
<p>Шлюз должен также разрешать трафик <code>ipv6-icmp</code> во всех основных цепочках межсетевого экрана. Для <a href="../ru/Simple_stateful_firewall.html" title="Simple stateful firewall (Русский)">брэндмауэра</a>/<a href="../ru/Iptables.html" title="Iptables (Русский)">iptables</a> добавьте правила:
</p>
<pre>-A INPUT -p ipv6-icmp -j ACCEPT
-A OUTPUT -p ipv6-icmp -j ACCEPT
-A FORWARD -p ipv6-icmp -j ACCEPT
</pre>
<p>Для других интерфейсов межсетевого экрана выполните аналогичные настройки и в конце не забудьте <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Включить">включить</a> <code>radvd.service</code>.
</p>
<h2><span class="mw-headline" id="Privacy_Extensions">Privacy Extensions</span></h2>
<p>Когда устройство-клиент получает адрес посредством SLAAC, его IPv6-адрес вычисляется на основании префикса сети и MAC-адреса сетевого интерфейса. Это может иметь определённые последствия с точки зрения безопасности, поскольку MAC-адрес компьютера теперь можно узнать по IPv6-адресу. Для решения этой проблемы был разработан стандарт <i>IPv6 Privacy Extensions</i> (<a href="https://tools.ietf.org/html/rfc4941" class="extiw" title="rfc:4941">RFC 4941</a>). В соответствии с ним ядро видоизменяет исходный адрес, генерируя вместо него временный. Такой подход используется, когда необходимо скрыть настоящий адрес при подключении к удалённому серверу.
</p>
<p>Чтобы включить Privacy Extensions, добавьте в файл <code>/etc/sysctl.d/40-ipv6.conf</code> следующие строки:
</p>
<pre># Enable IPv6 Privacy Extensions
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
net.ipv6.conf.<i>nic0</i>.use_tempaddr = 2
...
net.ipv6.conf.<i>nicN</i>.use_tempaddr = 2
</pre>
<p>Здесь <code>nic0</code>...<code>nicN</code> — названия сетевых интерфейсов. В статье <a href="../ru/Network_configuration.html#%D0%9E%D0%B1%D0%BD%D0%B0%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D1%85_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%BE%D0%B2" class="mw-redirect" title="Настройка сети">Настройка сети#Обнаружение сетевых интерфейсов</a> описано, как узнать имена сетевых интерфейсов на вашей машине. Параметры <code>all.use_tempaddr</code> и <code>default.use_tempaddr</code> не будут применены к сетевым интерфейсам, которые уже определены в системе на момент выполнения файла настроек <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>.
</p>
<p>После перезагрузки Privacy Extensions будут включены.
</p>
<h3><span class="mw-headline" id="dhcpcd">dhcpcd</span></h3>
<p>Стандартная конфигурация <a href="../ru/Dhcpcd.html" title="Dhcpcd (Русский)">dhcpcd</a> содержит опцию <code>slaac private</code> (<a href="https://tools.ietf.org/html/rfc7217" class="extiw" title="rfc:7217">RFC 7217</a>), которая включает назначение стабильных приватных адресов вместо вычисления оных на основе аппаратных параметров. Дополнительная настройка не требуется, если, конечно, вы не хотите изменять адрес IPv6 чаще, чем в начале каждого нового подключения к сети. Если задать опцию <code>slaac hwaddr</code>, то будут назначаться постоянные адреса.
</p>
<h3><span class="mw-headline" id="NetworkManager">NetworkManager</span></h3>
<p><a href="../en/NetworkManager.html" title="NetworkManager">NetworkManager</a> использует IPv6 Privacy Extensions в соответствии с настройкой <code>ipv6.ip6-privacy</code> в файле <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span> или в профиле соединения. Если параметр не задан ни глобально, ни для соединения, NetworkManager будет использовать <code>/proc/sys/net/ipv6/conf/default/use_tempaddr</code>.
</p>
<p>Чтобы включить IPv6 Privacy Extensions явно, добавьте следующие строки в файл <span class="plainlinks archwiki-template-man" title="$ man 5 NetworkManager.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/NetworkManager.conf.5">NetworkManager.conf(5)</a></span>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/conf.d/ip6-privacy.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[connection]
ipv6.ip6-privacy=2</pre>
<p><a href="../en/NetworkManager.html#Configuration" title="NetworkManager">Примените настройки</a> и переподключитесь ко всем активным соединениям.
</p>
<p>Чтобы включить IPv6 Privacy Extensions для отдельных соединений под управлением NetworkManager, отредактируйте соответствующий нужному соединения файл в каталоге <code>/etc/NetworkManager/system-connections/</code>, добавив к разделу <code>[ipv6]</code> пару ключ-значение <code>ip6-privacy=2</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/NetworkManager/system-connections/<i>соединение</i>.nmconnection</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[ipv6]
method=auto
<b>ip6-privacy=2</b>
...</pre>
<p>Перезагрузите соединение и подключитесь к нему снова.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Может показаться, что временный адрес IPv6, созданный при включении Privacy Extensions, никогда не обновляется (он не переходит в статус <code>deprecated</code> после истечения времени жизни <code>valid_lft</code>). На самом деле это не совсем так: через больший промежуток времени адрес всё же изменится.</div>
<h3><span class="mw-headline" id="systemd-networkd">systemd-networkd</span></h3>
<p>Systemd-networkd тоже не учитывает настройки <code>net.ipv6.conf.xxx.use_tempaddr</code> в файле <code>/etc/sysctl.d/40-ipv6.conf</code>, если оцпия <code>IPv6PrivacyExtensions</code> в файле <code>.network</code> не установлена в значение <code>kernel</code>.
</p>
<p>Тем не менее, учитываются некоторые другие опции:
</p>
<pre>net.ipv6.conf.xxx.temp_prefered_lft
net.ipv6.conf.xxx.temp_valid_lft
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <code>temp_prefered_lft</code> — корректное имя переменной, хотя допущена грамматическая ошибка (правильно preferred).</div>
<p>См. также <a href="../ru/Systemd-networkd.html" title="Systemd-networkd (Русский)">systemd-networkd</a> и <span class="plainlinks archwiki-template-man" title="$ man 5 systemd.network"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.network.5">systemd.network(5)</a></span>.
</p>
<h3><span class="mw-headline" id="connman">connman</span></h3>
<p>Добавьте следующую строку в файл службы (например, <code>/var/lib/connman/<i>название_службы</i>/settings</code>):
</p>
<pre>IPv6.privacy=preferred
</pre>
<p>Подробнее смотрите <a href="../en/ConnMan.html" title="ConnMan">ConnMan</a>.
</p>
<h2>
<span id=".D0.9F.D0.BE.D1.81.D1.82.D0.BE.D1.8F.D0.BD.D0.BD.D1.8B.D0.B9_.D0.BF.D1.80.D0.B8.D0.B2.D0.B0.D1.82.D0.BD.D1.8B.D0.B9_.D0.B0.D0.B4.D1.80.D0.B5.D1.81"></span><span class="mw-headline" id="Постоянный_приватный_адрес">Постоянный приватный адрес</span>
</h2>
<p>Другой полезной возможностью являются описанные в <a href="https://tools.ietf.org/html/rfc7217" class="extiw" title="rfc:7217">RFC 7217</a> постоянные приватные IP-адреса (stable private addresses). Эта технология позволяет назначать интерфейсам постоянные адреса, для вычисления которых вместо MAC-адреса устройства используется специально сгенерированный ключ.
</p>
<p>Чтобы заставить ядро сгенерировать ключ (например, для интерфейса <code>wlan0</code>), необходимо задать <a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметр ядра">параметр ядра</a>:
</p>
<pre># sysctl net.ipv6.conf.wlan0.addr_gen_mode=3
</pre>
<p>Выключив/включив интерфейс и выполнив <code>ip addr show dev wlan0</code> вы увидите флаг <code>stable-privacy</code> рядом с каждым адресом IPv6. Ядро должно было создать 128-битный ключ для генерирования адресов этого интерфейса. Чтобы увидеть сам ключ, выполните команду <code>sysctl net.ipv6.conf.wlan0.stable_secret</code>. Чтобы ключ сохранялся после перезагрузок и был постоянным, нужно добавить в файл <code>/etc/sysctl.d/40-ipv6.conf</code> следующие строки:
</p>
<pre># Enable IPv6 stable privacy mode
net.ipv6.conf.wlan0.stable_secret = <i>ключ</i>
net.ipv6.conf.wlan0.addr_gen_mode = 2
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если адрес IPv6 полчен от <a href="../ru/Dhcpcd.html" title="Dhcpcd (Русский)">dhcpcd</a>, то флага <code>stable-privacy</code> у него не будет.</div>
<h3><span class="mw-headline" id="NetworkManager_2">NetworkManager</span></h3>
<p>Описанные выше настройки не работают для <a href="../en/NetworkManager.html" class="mw-redirect" title="NetworkManager (Русский)">NetworkManager</a>, но он использует постоянные приватные адреса по умолчанию <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/blob/nm-1-12/NEWS#L367-369">[1]</a>,<a rel="nofollow" class="external autonumber" href="https://bugzilla.redhat.com/show_bug.cgi?id=1279242#c15">[2]</a>.
</p>
<h2>
<span id=".D0.A1.D1.82.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D0.B9_.D0.B0.D0.B4.D1.80.D0.B5.D1.81"></span><span class="mw-headline" id="Статический_адрес">Статический адрес</span>
</h2>
<p>Иногда использование статического адреса может быть применено в качестве одной из мер обеспечения безопасности. Например, если ваш локальный маршрутизатор использует обнаружение соседей (Neighbor Discovery) или radvd (<a href="https://tools.ietf.org/html/rfc2461" class="extiw" title="rfc:2461">RFC 2461</a>), вашему интерфейсу будет автоматически присвоен адрес, который содержит часть MAC-адреса сетевого интерфейса (используя SLAAC). Это может быть не слишком хорошо для безопасности, так как позволяет без труда отслеживать систему даже если часть IPv6-адреса сменилась.
</p>
<p>Чтобы присвоить статический IP-адрес при помощи <a href="../en/Netctl.html" class="mw-redirect" title="Netctl (Русский)">netctl</a>, используйте шаблон профиля <code>/etc/netctl/examples/ethernet-static</code>. Следующие строки особенно важны:
</p>
<pre># For IPv6 static address configuration
IP6=static
Address6=('1234:5678:9abc:def::1/64' '1234:3456::123/96')
Routes6=('abcd::1234')
Gateway6='1234:0:123::abcd'
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Если вы подключены к сети только посредстмов IPv6, то необходимо определить соответствующий DNS-сервер. Например:
<pre>DNS=('6666:6666::1' '6666:6666::2')
</pre>
Если ваш провайдер не предоставляет DNS для IPv6 и вы не хотите настраивать свой сервер, то можно выбрать его по рекомендациям в статье <a href="../ru/Domain_name_resolution.html" class="mw-redirect" title="Разрешение доменных имён">Разрешение доменных имён</a>.</div>
<h2>
<span id="IPv6_.D0.B8_PPPoE"></span><span class="mw-headline" id="IPv6_и_PPPoE">IPv6 и PPPoE</span>
</h2>
<p>Стандартный инструмент для <a href="https://en.wikipedia.org/wiki/ru:PPPoE" class="extiw" title="wikipedia:ru:PPPoE">PPPoE</a>, <code>pppd</code>, позволяет использовать IPv6 в PPPoE, если это поддерживается вашим провайдером и модемом. Добавьте одну строку в файл <code>/etc/ppp/options</code>:
</p>
<pre>+ipv6
</pre>
<p>Если вы используете <a href="../en/Netctl.html" class="mw-redirect" title="Netctl (Русский)">netctl</a> для PPPoE, тогда вместо этого добавьте следующую строку в файл настроек netctl:
</p>
<pre>PPPoEIP6=yes
</pre>
<h2>
<span id=".D0.94.D0.B5.D0.BB.D0.B5.D0.B3.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.B5.D1.84.D0.B8.D0.BA.D1.81.D0.B0_.28DHCPv6-PD.29"></span><span class="mw-headline" id="Делегирование_префикса_(DHCPv6-PD)">Делегирование префикса (DHCPv6-PD)</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> В этом разделе рассматривается настройка пользовательского шлюза, а не клиентских машин. Для стандартных маршрутизаторов, доступных на рынке, рекомендуется предварительно изучить документацию по включению функции делегирования префикса.</div>
<p>Делегирование префикса (prefix delegation) — широко распространённая технология развёртывания IPv6, используемая многими интернет-провайдерами. Представляет собой метод назначения сетевого префикса пользователю (например, локальной сети). Маршрутизатор может быть настроен на привязку разных сетевых префиксов к различным подсетям. Провайдер выдаёт префикс с помощью DHCPv6 (обычно это префикс <code>/56</code> или <code>/64</code>), а dhcp-клиент назначает префикс локальной сети. В случае простого шлюза с двумя интерфейсами клиент обычно получает адрес через WAN-интерфейс (или псевдоинтерфейс вроде ppp) и на его основании присваивает IPv6-префикс интерфейсу, обращённому к локальной сети.
</p>
<p>Клиент DHCPv6 принимает входящие соединения на UDP-порт 546. Чтобы настроить доступ к этому порту в межсетевом экране <a href="../ru/Nftables.html" title="Nftables (Русский)">nftables</a>, в файле <code>/etc/nftables.conf</code> добавьте следующее правило в цепочку input:
</p>
<pre>table inet filter {
  chain input {
    udp dport dhcpv6-client accept
    ...
  }
...
}
</pre>
<h3><span class="mw-headline" id="dhcpcd_2">dhcpcd</span></h3>
<p><a href="../ru/Dhcpcd.html" title="Dhcpcd (Русский)">dhcpcd</a> помимо поддержки dhcp для IPv4 также предлагает полноценную реализацию протокола DHCPv6 (включая DHCPv6-PD). Если вы используете <code>dhcpcd</code>, отредактируйте файл <code>/etc/dhcpcd.conf</code>. Скорее всего, вы уже используете dhcpcd для IPv4, поэтому просто обновите существующую конфигурацию.
</p>
<pre>duid
noipv6rs
waitip 6
# Uncomment this line if you are running dhcpcd for IPv6 only.
#ipv6only

# use the interface connected to WAN
interface WAN
ipv6rs
iaid 1
# use the interface connected to your LAN
ia_pd 1 LAN
#ia_pd 1/::/64 LAN/0/64
</pre>
<p>Эта конфигурация запросит префикс на WAN-интерфейсе (<code>WAN</code>) и делегирует его внутреннему интерфейсу (<code>LAN</code>). Если вдруг с диапазоном <code>/64</code> возникнут проблемы, то нужно использовать вторую инструкцию <code>ia_pd</code>, которая в примере выше закомментирована. Кроме того, приведённая конфигурация также отключит вызовы маршрутизатора (router solicitation) для всех интерфейсов, кроме WAN.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> См. также <span class="plainlinks archwiki-template-man" title="$ man 8 dhcpcd"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.8">dhcpcd(8)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 5 dhcpcd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/dhcpcd.conf.5">dhcpcd.conf(5)</a></span>.</div>
<h3><span class="mw-headline" id="WIDE-DHCPv6">WIDE-DHCPv6</span></h3>
<p><a rel="nofollow" class="external text" href="http://wide-dhcpv6.sourceforge.net/">WIDE-DHCPv6</a> — свободная реализация протокола DHCP для IPv6 (DHCPv6), первоначально разработанная проектом KAME. <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">Установите</a> его с пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/wide-dhcpv6/">wide-dhcpv6</a></span><sup><small>AUR</small></sup>.
</p>
<p>Если вы используете <code>wide-dhcpv6</code>, отредактируйте файл <code>/etc/wide-dhcpv6/dhcp6c.conf</code>, заменив <code>WAN</code> и <code>LAN</code> названиями соответвующих интерфейсов:
</p>
<pre># use the interface connected to your WAN
interface WAN {
  send ia-pd 0;
};
 
id-assoc pd 0 {
  # use the interface connected to your LAN
  prefix-interface LAN {
    sla-id 1;
    sla-len 8;
  };
};
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Параметр <code>sla-len</code> нужно назначить таким образом, чтобы выполнялась формула <code>(WAN-prefix) + (sla-len) = 64</code>. В нашем случае  для сети с префиксом <code>/56</code> формула примет вид 56+8=64. Для префикса <code>/64</code> <code>sla-len</code> будет равен <code>0</code>.</div>
<p>Клиент wide-dhcpv6  можно <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Запустить">запустить</a>/<a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Включить">включить</a> с помощью файла юнита systemd <code>dhcp6c@<i>interface</i>.service</code>, где <code><i>interface</i></code> — название интерфейса в файле настроек, т.е. например для интерфейса "WAN" используйте <code>dhcp6c@WAN.service</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> См. также <span class="plainlinks archwiki-template-man" title="$ man 8 dhcp6c">dhcp6c(8)</span> и <span class="plainlinks archwiki-template-man" title="$ man 5 dhcp6c.conf">dhcp6c.conf(5)</span>.</div>
<h3><span class="mw-headline" id="systemd-networkd_2">systemd-networkd</span></h3>
<p>Настройте внешний (wan) и внутренний (lan) интерфейсы. Это включит DHCPv6-PD для интерфейса с запущенным DHCPv6-клиентом. Делегированные префиксы предоставляются посредством IPv6 Router Advertisement во внутренней (локальной) сети.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/wan.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Network]
# Укажите 'yes' вместо 'ipv6' для одновременной работы и ipv4, и ipv6.
DHCP=ipv6</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/network/lan.network</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Network]
IPv6SendRA=yes
DHCPv6PrefixDelegation=yes</pre>
<h3>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D1.8B"></span><span class="mw-headline" id="Другие_клиенты">Другие клиенты</span>
</h3>
<p><a href="../ru/Network_configuration.html#DHCP" title="Network configuration (Русский)">dhclient</a> также может запрашивать сетевой префикс, но для присваивания этого префикса или его части нужно использовать специальный скрипт. Пример программы: <a rel="nofollow" class="external free" href="https://github.com/jaymzh/v6-gw-scripts/blob/master/dhclient-ipv6">https://github.com/jaymzh/v6-gw-scripts/blob/master/dhclient-ipv6</a>.
</p>
<h2>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_IPv6"></span><span class="mw-headline" id="Отключение_IPv6">Отключение IPv6</span>
</h2>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Поддержка IPv6 встроена в ядро Arch Linux, поэтому отключить модуль просто добавив его в чёрный список не получится.</div>
<h3>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D1.84.D1.83.D0.BD.D0.BA.D1.86.D0.B8.D0.BE.D0.BD.D0.B0.D0.BB.D1.8C.D0.BD.D0.BE.D1.81.D1.82.D0.B8"></span><span class="mw-headline" id="Отключение_функциональности">Отключение функциональности</span>
</h3>
<p><a href="../ru/Kernel_parameters.html" class="mw-redirect" title="Параметр ядра">Параметр ядра</a> <code>ipv6.disable=1</code> отключает весь стек IPv6, что в большинстве случаев помогает добиться желаемого результата.
</p>
<p>Другой параметр, <code>ipv6.disable_ipv6=1</code>, оставит стек IPv6 работающим, но адреса IPv6 не будут присваиваться сетевым интерфейсам.
</p>
<p>Также вы можете отключить присвоение адреса IPv6 конкретным сетевым интерфейсам, добавив следующие строки в файл настроек <a href="../en/Sysctl.html" title="Sysctl">sysctl</a> <code>/etc/sysctl.d/40-ipv6.conf</code>:
</p>
<pre># Disable IPv6
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.<i>nic0</i>.disable_ipv6 = 1
...
net.ipv6.conf.<i>nicN</i>.disable_ipv6 = 1
</pre>
<p><a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Перезапустите">Перезапустите</a> юнит <code>systemd-sysctl.service</code>, чтобы изменения вступили в силу.
</p>
<p>Необходимо перечислить здесь все сетевые интерфейсы, для которых требуется отключение IPv6, так как опция <code>all.disable_ipv6</code> не будет применена к сетевым интерфейсам, которые уже включены на момент выполнения инструкций из файла настроек.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Обратите также внимание, что при таком способе отключения IPv6 необходимо закомментировать все IPv6-хосты в файле <code>/etc/hosts</code>. В противном случае могут происходить ошибки подключения, если при определении адреса произошло разрешение имени хоста на недоступный IPv6-адрес.</div>
<h3>
<span id=".D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B3.D1.80.D0.B0.D0.BC.D0.BC.D1.8B"></span><span class="mw-headline" id="Другие_программы">Другие программы</span>
</h3>
<p>Отключение IPv6 в ядре не предотвращает другие программы от попытки использования версии IPv6. В большинстве случаев это не приводит к проблемам, однако, если они все-таки появляются, вам остается лишь искать в man-страницах или на просторах сети способ отключить эту функциональность.
</p>
<h4><span class="mw-headline" id="dhcpcd_3">dhcpcd</span></h4>
<p>Например, <i>dhcpcd</i> будет продолжать пытаться запрашивать настройки сети у маршрутизаторов IPv6 (т.н. <i>Router solicitation</i>). Чтобы отключить это, добавьте следующие строки в файл <code>/etc/dhcpcd.conf</code>:
</p>
<pre>noipv6rs
noipv6
</pre>
<h4><span class="mw-headline" id="NetworkManager_3">NetworkManager</span></h4>
<p>Чтобы отключить IPv6 в NetworkManager, вызовите контекстное меню значка статуса сети и перейдите в <i>Edit Connections &gt; Wired &gt; Network name &gt; Edit &gt; IPv6 Settings &gt; Method</i>, затем выберите <i>Method</i> как <i>Ignore/Disabled</i>.
</p>
<h4><span class="mw-headline" id="ntpd">ntpd</span></h4>
<p>Чтобы определить, как systemd должен запускать службу ntpd, необходимо <a href="../ru/Systemd.html#Drop-in_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B" title="Systemd (Русский)">внести изменения</a> в файл <code>ntpd.service</code>.
</p>
<p>Это создаст drop-in сниппет, который будет запускаться вместо стандартного <code>ntpd.service</code>. Флаг <code>-4</code> отключает использование IPv6 демоном ntp. Поместите следующее в drop-in сниппет:
</p>
<pre>[Service]
ExecStart=
ExecStart=/usr/bin/ntpd -4 -g -u ntp:ntp
</pre>
<p>Здесь сначала очищается значение <code>ExecStart</code>, а затем устанавливается новая команда.
</p>
<h4><span class="mw-headline" id="GnuPG">GnuPG</span></h4>
<p>Отключите IPv6 в настройка <i>dirmngr</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">~/.gnupg/dirmngr.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">disable-ipv6
</pre>
<p>После этого перезапустите <a href="../ru/Systemd/User.html" class="mw-redirect" title="Systemd/Пользователь">пользовательскую службу</a> <code>dirmngr.service</code>.
</p>
<h4><span class="mw-headline" id="sshd">sshd</span></h4>
<p>Добавьте следующие строки в файл <code>sshd_config</code>, чтобы убедиться, что <i>sshd</i> использует IPv4-адрес:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/ssh/ssh_config</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">AddressFamily inet
</pre>
<p>После этого <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Перезапустите">перезапустите</a> службу <code>sshd.service</code>.
</p>
<h4><span class="mw-headline" id="systemd-timesyncd">systemd-timesyncd</span></h4>
<p>Иногда <a href="../en/Systemd-timesyncd.html" title="Systemd-timesyncd">systemd-timesyncd</a> пытается отправлять запросы IPv6-серверу времени, даже если IPv6 отключён. Это может привести к тому, что системные часы не будут обновляться, а в журнале появятся сообщения об ошибках следующего вида:
</p>
<pre>systemd-timesyncd[336]: Failed to set up connection socket: Address family not supported by protocol
</pre>
<p>Команда <code>systemctl status systemd-timesyncd</code> в пункте "Status" выведет IPv6-адрес целевого сервера:
</p>
<pre>Status: "Connecting to time server [2001:19f0:8001:afd:5400:1ff:fe9d:cba]:123 (2.pool.ntp.org)"
</pre>
<p>Как видно из <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/59806">FS#59806</a>, по протоколу IPv6 работают "2."-сервера ntp.org. Чтобы запретить подключение к ним, удалите в файле <code>/etc/systemd/timesyncd.conf</code> записи <code>2.arch.pool.ntp.org</code> и <code>2.pool.ntp.org</code> из параметров NTP and FallbackNTP соответственно.
</p>
<h3><span class="mw-headline" id="systemd-networkd_3">systemd-networkd</span></h3>
<p>networkd позволяет отключить IPv6 для отдельного интерфейса. Когда в разделе <code>[Network]</code> сетевого юнита указан параметр <code>LinkLocalAddressing=ipv4</code> или <code>LinkLocalAddressing=no</code>, networkd не будет настраивать IPv6 на соответствующих сетевых интерфейсах.
</p>
<p>Следует однако отметить, что даже при использовании указанных выше опций networkd всё еще будет ожидать получения "объявлений маршрутизатора" (router advertisements, RA), если IPv6 не был отключён глобально для всей системы. Если трафик IPv6 не будет доходить до интерфейса (например, из-за настроек sysctl или ip6tables), то интерфейс останется в состоянии настройки и потенциально может стать причиной превышения времени ожидания (timeout) для служб, требующих полной настройки сети. Чтобы этого избежать, добавьте опцию <code>IPv6AcceptRA=no</code> в раздел <code>[Network]</code>.
</p>
<h2>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_IPv4_.D0.B2.D0.BC.D0.B5.D1.81.D1.82.D0.BE_IPv6"></span><span class="mw-headline" id="Использование_IPv4_вместо_IPv6">Использование IPv4 вместо IPv6</span>
</h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Это отключит другие настройки по умолчанию. <a rel="nofollow" class="external autonumber" href="https://serverfault.com/a/93782/">[3]</a> (Discuss in <a href="../en/Talk:IPv6.html#Factual_accuracy_-_Prefer_IPv4_over_IPv6" title="Talk:IPv6">Talk:IPv6#Factual accuracy - Prefer IPv4 over IPv6</a>)</div>
</div>
<p>Раскомментируйте следующую строку в файле <code>/etc/gai.conf</code>:
</p>
<pre>#
#    For sites which prefer IPv4 connections change the last line to
#
precedence ::ffff:0:0/96  100
</pre>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://docs.kernel.org/networking/ipv6.html">IPv6</a> — документация на kernel.org.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.ipsidixit.net/2012/08/09/ipv6-temporary-addresses-and-privacy-extensions/">IPv6 temporary addresses</a> — временные адреса и расширения приватности.</li>
<li>
<a rel="nofollow" class="external text" href="https://mirrors.deepspace6.net/howtos/Linux+IPv6-HOWTO.html#AEN520">IPv6 prefixes</a> — о типах префиксов.</li>
<li>
<a rel="nofollow" class="external text" href="https://tldp.org/HOWTO/Linux+IPv6-HOWTO/ch11s02.html">net.ipv6 options</a> — документация параметров ядра.</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Networking.html" title="Category:Networking (Русский)">Networking (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=IPv6_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=757158">https://wiki.archlinux.org/index.php?title=IPv6_(Русский)&amp;oldid=757158</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 16 November 2022, at 06:43.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
