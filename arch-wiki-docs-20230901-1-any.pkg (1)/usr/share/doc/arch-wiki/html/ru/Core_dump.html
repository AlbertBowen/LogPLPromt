<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Core dump (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Core_dump_Русский rootpage-Core_dump_Русский skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Отключение_автоматических_дампов_памяти" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%9E%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D1%85_%D0%B4%D0%B0%D0%BC%D0%BF%D0%BE%D0%B2_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Отключение автоматических дампов памяти</div>
			</a>
			
				<button aria-controls="toc-Отключение_автоматических_дампов_памяти-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Отключение автоматических дампов памяти subsection
				</button>
			
			<ul id="toc-Отключение_автоматических_дампов_памяти-sublist" class="sidebar-toc-list">
				<li id="toc-Используя_sysctl" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_sysctl">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Используя sysctl</div>
			</a>
			
			<ul id="toc-Используя_sysctl-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_systemd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_systemd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>Используя systemd</div>
			</a>
			
			<ul id="toc-Используя_systemd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_PAM_limits" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_PAM_limits">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.3</span>Используя PAM limits</div>
			</a>
			
			<ul id="toc-Используя_PAM_limits-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Используя_ulimit" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F_ulimit">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4</span>Используя ulimit</div>
			</a>
			
			<ul id="toc-Используя_ulimit-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Создание_дампа_памяти" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Создание дампа памяти</div>
			</a>
			
				<button aria-controls="toc-Создание_дампа_памяти-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Создание дампа памяти subsection
				</button>
			
			<ul id="toc-Создание_дампа_памяти-sublist" class="sidebar-toc-list">
				<li id="toc-Куда_они_попадают?" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9A%D1%83%D0%B4%D0%B0_%D0%BE%D0%BD%D0%B8_%D0%BF%D0%BE%D0%BF%D0%B0%D0%B4%D0%B0%D1%8E%D1%82?">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Куда они попадают?</div>
			</a>
			
			<ul id="toc-Куда_они_попадают?-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Изучение_дампа_памяти" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%98%D0%B7%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Изучение дампа памяти</div>
			</a>
			
			<ul id="toc-Изучение_дампа_памяти-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Удаление_дампов_памяти" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A3%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%BE%D0%B2_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Удаление дампов памяти</div>
			</a>
			
			<ul id="toc-Удаление_дампов_памяти-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Смотрите_также" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Смотрите также</div>
			</a>
			
			<ul id="toc-Смотрите_также-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../ru/Core_dump.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">русский</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../ru/Core_dump.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../ru/Core_dump.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="ru" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Core_dump.html" title="Core dump">Core dump</a>. Дата последней синхронизации: 15 февраля 2022. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Core_dump&amp;diff=0&amp;oldid=715027">изменения</a>.</div>
<p><a href="https://en.wikipedia.org/wiki/ru:%D0%94%D0%B0%D0%BC%D0%BF_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8" class="extiw" title="wikipedia:ru:Дамп памяти">Дамп памяти</a> (core dump) — это файл, в который записывается адресное пространство (память) процесса при его нештатном завершении. Дампы ядра могут создаваться по требованию (например, <a href="#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B4%D0%B0%D0%BC%D0%BF%D0%B0_%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8">отладчиком</a>) или автоматически при завершении процесса. Дампы памяти создаются ядром при сбое программы и могут быть переданы вспомогательной программе (например, <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-coredump"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-coredump.8">systemd-coredump(8)</a></span>) для дальнейшей обработки. Дамп памяти обычно не используется обычным пользователем, но может быть передан разработчикам по их запросу, которым будет очень полезно иметь снимок состояния программы на момент сбоя, особенно если сбой трудно воспроизвести.
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id=".D0.9E.D1.82.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B0.D0.B2.D1.82.D0.BE.D0.BC.D0.B0.D1.82.D0.B8.D1.87.D0.B5.D1.81.D0.BA.D0.B8.D1.85_.D0.B4.D0.B0.D0.BC.D0.BF.D0.BE.D0.B2_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Отключение_автоматических_дампов_памяти">Отключение автоматических дампов памяти</span>
</h2>
<p>Пользователи могут захотеть отключить автоматические дампы памяти по нескольким причинам:
</p>
<ul>
<li>Производительность: создание дампа для процессов, занимающих много памяти, может привести к трате системных ресурсов и задержке очистки памяти.</li>
<li>Дисковое пространство: дампы процессов, занимающих много памяти, могут занимать место на диске, равное, а то и большее, чем объём памяти процесса, если их не сжимать.</li>
<li>Безопасность: хотя дампы обычно может читать только root, они могут содержать конфиденциальные данные (например, пароли или криптографические ключи), которые записываются на диск после сбоя.</li>
</ul>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_sysctl"></span><span class="mw-headline" id="Используя_sysctl">Используя sysctl</span>
</h3>
<p>Можно использовать <a href="../en/Sysctl.html" title="Sysctl">sysctl</a>, чтобы изменить <code>kernel.core_pattern</code> для отключения дампов. Создайте файл:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/sysctl.d/50-coredump.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">kernel.core_pattern=/dev/null</pre>
<p>Для немедленного применения изменений используйте команду <code>sysctl</code>:
</p>
<pre># sysctl -p /etc/sysctl.d/50-coredump.conf
</pre>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_systemd"></span><span class="mw-headline" id="Используя_systemd">Используя systemd</span>
</h3>
<p>Поведение <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a> по умолчанию определено в файле <code>/usr/lib/sysctl.d/50-coredump.conf</code>, который прописывает <code>kernel.core_pattern</code> для вызова <code>systemd-coredump</code>. Он сохраняет дампы ядра для всех процессов в <code>/var/lib/systemd/coredump</code>. Поведение <code>systemd-coredump</code> можно переопределить, создав в <code>/etc/systemd/coredump.conf.d/</code> файл (<span class="plainlinks archwiki-template-man" title="$ man 5 coredump.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredump.conf.5#DESCRIPTION">coredump.conf(5) § DESCRIPTION</a></span>,, <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=214207">[1]</a>):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/coredump.conf.d/custom.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Coredump]
Storage=none</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Не забудьте прописать имя секции <code>[Coredump]</code>, иначе опция будет проигнорирована.</div>
<p>Затем <a href="../ru/Systemd.html#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Перезагрузите">перезагрузите</a> настройки systemd.
</p>
<p>Одного этого метода обычно достаточно для отключения записи дампов, если в системе нет других программ, включающих автоматические дампы, но дамп памяти всё равно генерируется в памяти и systemd-coredump всё равно запускается.
</p>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_PAM_limits"></span><span class="mw-headline" id="Используя_PAM_limits">Используя PAM limits</span>
</h3>
<p>Максимальный размер дампа памяти для пользователей, вошедших в систему через <a href="../en/PAM.html" title="PAM">PAM</a>, задаётся в файле <a href="../en/Limits.conf.html" title="Limits.conf">limits.conf</a>. Установка нулевого значения полностью отключает дампы памяти. <a rel="nofollow" class="external autonumber" href="https://www.cyberciti.biz/faq/linux-disable-core-dumps/">[2]</a>
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/security/limits.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">* hard core 0</pre>
<h3>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D1.83.D1.8F_ulimit"></span><span class="mw-headline" id="Используя_ulimit">Используя ulimit</span>
</h3>
<p><a href="../ru/Command-line_shell.html" title="Command-line shell (Русский)">Командные оболочки</a> вроде <i>bash</i> и <i>zsh</i> имеют встроенную команду <i>ulimit</i>, которую можно использовать для просмотра или изменения ограничений на ресурсы оболочки и запускаемых ею процессов. Подробнее смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 bash"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/bash.1#SHELL_BUILTIN_COMMANDS">bash(1) § SHELL BUILTIN COMMANDS</a></span> или <span class="plainlinks archwiki-template-man" title="$ man 1 zshbuiltins"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/zshbuiltins.1">zshbuiltins(1)</a></span>.
</p>
<p>Отключение дампов памяти в текущей командной оболочке:
</p>
<pre>$ ulimit -c 0
</pre>
<h2>
<span id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.B0_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Создание_дампа_памяти">Создание дампа памяти</span>
</h2>
<p>Чтобы сгенерировать дамп памяти произвольного процесса, сначала <a href="../ru/Help:Reading.html#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2" class="mw-redirect" title="Установите">установите</a> пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=gdb">gdb</a></span>. Затем найдите PID запущенного процесса, например, с помощью <i>pgrep</i>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ pgrep -f <i>firefox</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">2071 firefox
</pre>
<p>Подключитесь отладчиком к этому процессу:
</p>
<pre>$ gdb -p 2071
</pre>
<p>И затем в отладчике выполните:
</p>
<pre>(gdb) generate-core-file
Saved corefile core.2071
(gdb) quit
</pre>
<p>Теперь у вас есть дамп памяти в файле <code>core.2071</code>.
</p>
<h3>
<span id=".D0.9A.D1.83.D0.B4.D0.B0_.D0.BE.D0.BD.D0.B8_.D0.BF.D0.BE.D0.BF.D0.B0.D0.B4.D0.B0.D1.8E.D1.82.3F"></span><span class="mw-headline" id="Куда_они_попадают?">Куда они попадают?</span>
</h3>
<p>sysctl <code>kernel.core_pattern</code> определяет, куда отправляются автоматические дампы памяти. По умолчанию их принимает <i>systemd-coredump</i>, который настраивается через файл <code>/etc/systemd/coredump.conf</code>. По умолчанию он записывает дампы в <code>/var/lib/systemd/coredump</code> (опция <code>Storage=external</code>), сжимая их с помощью zstd (опция <code>Compress=yes</code>). Кроме того, можно настроить различные ограничения на размер хранилища.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Значение по умолчанию для <code>kernel.core_pattern</code> задаётся в файле <code>/usr/lib/sysctl.d/50-coredump.conf</code>. Этот файл может быть замаскирован или переопределён для использования другого значения в соответствии с обычными правилами <span class="plainlinks archwiki-template-man" title="$ man 5 sysctl.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/sysctl.d.5">sysctl.d(5)</a></span>.</div>
<p>Чтобы получить дамп памяти из журнала, смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 coredumpctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredumpctl.1">coredumpctl(1)</a></span>.
</p>
<h2>
<span id=".D0.98.D0.B7.D1.83.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.B0_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Изучение_дампа_памяти">Изучение дампа памяти</span>
</h2>
<p>Команда <i>coredumpctl</i> покажет список сохранённых дампов, среди которых можно найти нужный:
</p>
<pre># coredumpctl list
</pre>
<p>Для поиска нужного дампа можно использовать PID, имя исполняемого файла, путь к исполняемому файлу или предикат <a href="../ru/Systemd/Journal.html" title="Systemd (Русский)/Journal (Русский)">journalctl</a> (подробнее: <span class="plainlinks archwiki-template-man" title="$ man 1 coredumpctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/coredumpctl.1">coredumpctl(1)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 1 journalctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/journalctl.1">journalctl(1)</a></span>). Просмотр подробностей о дампах ядра:
</p>
<pre># coredumpctl info <i>соответствие</i>
</pre>
<p>Обратите внимание на строку "Signal", она поможет определить причину сбоя. Для более глубокого анализа вы можете изучить backtrace с помощью <i>gdb</i>:
</p>
<pre># coredumpctl gdb <i>соответствие</i>
</pre>
<p>После запуска <i>gdb</i> можно использовать команду <code>bt</code> для получения backtrace:
</p>
<pre>(gdb) bt
</pre>
<p>Если отладочные символы нужны, но не найдены, можно попробовать получить их, как описано в статье <a href="../ru/Debugging/Getting_traces.html" class="mw-redirect" title="Отладка/Трассировка">Отладка/Трассировка</a>.
</p>
<h2>
<span id=".D0.A3.D0.B4.D0.B0.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.B4.D0.B0.D0.BC.D0.BF.D0.BE.D0.B2_.D0.BF.D0.B0.D0.BC.D1.8F.D1.82.D0.B8"></span><span class="mw-headline" id="Удаление_дампов_памяти">Удаление дампов памяти</span>
</h2>
<p>Файлы дампов памяти, хранящиеся в <code>/var/lib/systemd/coredump/</code>, будут автоматически очищаться командой <code>systemd-tmpfiles --clean</code>, которая запускается ежедневно с помощью <code>systemd-tmpfiles-clean.timer</code>. Дампы памяти настроены на хранение не менее 3 дней, смотрите <code>systemd-tmpfiles --cat-config</code>.
</p>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://lcamtuf.coredump.cx/afl/">american fuzzy lop</a> - Инструмент для автоматизированного тестирования ядра и программ</li>
<li>
<a rel="nofollow" class="external text" href="https://lwn.net/Articles/637151/">Filesystem fuzzing</a> - Статья LWN о тестировании файловых систем на наличие ошибок</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../ru/Category:Development.html" title="Category:Development (Русский)">Development (Русский)</a></li>
<li><a href="../ru/Category:Security.html" title="Category:Security (Русский)">Security (Русский)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Core_dump_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=775028">https://wiki.archlinux.org/index.php?title=Core_dump_(Русский)&amp;oldid=775028</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 April 2023, at 07:37.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
