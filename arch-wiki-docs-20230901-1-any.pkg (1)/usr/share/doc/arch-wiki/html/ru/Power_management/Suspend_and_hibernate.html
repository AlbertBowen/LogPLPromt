<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Power management (Русский)/Suspend and hibernate (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Power_management_Русский_Suspend_and_hibernate_Русский rootpage-Power_management_Русский skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Низкоуровневые_интерфейсы" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%9D%D0%B8%D0%B7%D0%BA%D0%BE%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D0%B5%D0%B2%D1%8B%D0%B5_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Низкоуровневые интерфейсы</div>
			</a>
			
				<button aria-controls="toc-Низкоуровневые_интерфейсы-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Низкоуровневые интерфейсы subsection
				</button>
			
			<ul id="toc-Низкоуровневые_интерфейсы-sublist" class="sidebar-toc-list">
				<li id="toc-Ядро_(swsusp)" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%AF%D0%B4%D1%80%D0%BE_(swsusp)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Ядро (swsusp)</div>
			</a>
			
			<ul id="toc-Ядро_(swsusp)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-uswsusp" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#uswsusp">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>uswsusp</div>
			</a>
			
			<ul id="toc-uswsusp-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Интерфейсы_высокого_уровня" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B_%D0%B2%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%B3%D0%BE_%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D1%8F">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Интерфейсы высокого уровня</div>
			</a>
			
				<button aria-controls="toc-Интерфейсы_высокого_уровня-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Интерфейсы высокого уровня subsection
				</button>
			
			<ul id="toc-Интерфейсы_высокого_уровня-sublist" class="sidebar-toc-list">
				<li id="toc-systemd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#systemd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>systemd</div>
			</a>
			
			<ul id="toc-systemd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Гибернация" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Гибернация</div>
			</a>
			
				<button aria-controls="toc-Гибернация-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Гибернация subsection
				</button>
			
			<ul id="toc-Гибернация-sublist" class="sidebar-toc-list">
				<li id="toc-Про_размер_раздела/файла_подкачки" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9F%D1%80%D0%BE_%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80_%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0/%D1%84%D0%B0%D0%B9%D0%BB%D0%B0_%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%87%D0%BA%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Про размер раздела/файла подкачки</div>
			</a>
			
			<ul id="toc-Про_размер_раздела/файла_подкачки-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Настройка_initramfs" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_initramfs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Настройка initramfs</div>
			</a>
			
			<ul id="toc-Настройка_initramfs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Необходимые_параметры_ядра" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9D%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D1%8B%D0%B5_%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B_%D1%8F%D0%B4%D1%80%D0%B0">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Необходимые параметры ядра</div>
			</a>
			
			<ul id="toc-Необходимые_параметры_ядра-sublist" class="sidebar-toc-list">
				<li id="toc-Гибернация_в_файл_подкачки" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F_%D0%B2_%D1%84%D0%B0%D0%B9%D0%BB_%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%87%D0%BA%D0%B8">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3.1</span>Гибернация в файл подкачки</div>
			</a>
			
			<ul id="toc-Гибернация_в_файл_подкачки-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Гибернация_в_файл_подкачки_на_Btrfs" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F_%D0%B2_%D1%84%D0%B0%D0%B9%D0%BB_%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%87%D0%BA%D0%B8_%D0%BD%D0%B0_Btrfs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3.2</span>Гибернация в файл подкачки на Btrfs</div>
			</a>
			
			<ul id="toc-Гибернация_в_файл_подкачки_на_Btrfs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Гибернация_в_томе_LVM_с_тонкой_провизией" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#%D0%93%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F_%D0%B2_%D1%82%D0%BE%D0%BC%D0%B5_LVM_%D1%81_%D1%82%D0%BE%D0%BD%D0%BA%D0%BE%D0%B9_%D0%BF%D1%80%D0%BE%D0%B2%D0%B8%D0%B7%D0%B8%D0%B5%D0%B9">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3.3</span>Гибернация в томе LVM с тонкой провизией</div>
			</a>
			
			<ul id="toc-Гибернация_в_томе_LVM_с_тонкой_провизией-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Технология_Intel_Rapid_Start_(IRST)" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A2%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%8F_Intel_Rapid_Start_(IRST)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Технология Intel Rapid Start (IRST)</div>
			</a>
			
			<ul id="toc-Технология_Intel_Rapid_Start_(IRST)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Исправление_проблем" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Исправление проблем</div>
			</a>
			
				<button aria-controls="toc-Исправление_проблем-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Исправление проблем subsection
				</button>
			
			<ul id="toc-Исправление_проблем-sublist" class="sidebar-toc-list">
				<li id="toc-ACPI_OS_NAME" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#ACPI_OS_NAME">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>ACPI_OS_NAME</div>
			</a>
			
			<ul id="toc-ACPI_OS_NAME-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Пользователям_VAIO" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9F%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC_VAIO">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>Пользователям VAIO</div>
			</a>
			
			<ul id="toc-Пользователям_VAIO-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Ждущий/Спящий_режим_не_работает_или_сбоит" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%96%D0%B4%D1%83%D1%89%D0%B8%D0%B9/%D0%A1%D0%BF%D1%8F%D1%89%D0%B8%D0%B9_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC_%D0%BD%D0%B5_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82_%D0%B8%D0%BB%D0%B8_%D1%81%D0%B1%D0%BE%D0%B8%D1%82">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>Ждущий/Спящий режим не работает или сбоит</div>
			</a>
			
			<ul id="toc-Ждущий/Спящий_режим_не_работает_или_сбоит-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Wake-on-LAN" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Wake-on-LAN">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Wake-on-LAN</div>
			</a>
			
			<ul id="toc-Wake-on-LAN-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Мгновенный_запуск_из_режима_ожидания" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9C%D0%B3%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA_%D0%B8%D0%B7_%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0_%D0%BE%D0%B6%D0%B8%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.5</span>Мгновенный запуск из режима ожидания</div>
			</a>
			
			<ul id="toc-Мгновенный_запуск_из_режима_ожидания-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../../ru/Power_management/Suspend_and_hibernate.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">русский</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../../ru/Power_management/Suspend_and_hibernate.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../../ru/Power_management/Suspend_and_hibernate.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../../ru/Power_management.html" title="Power management (Русский)">Power management (Русский)</a></span></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="ru" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Ссылки по теме</p>
<ul>
<li><a href="../../en/Uswsusp.html" title="Uswsusp">Uswsusp</a></li>
<li><a href="../../ru/Systemd.html" title="Systemd (Русский)">systemd (Русский)</a></li>
<li><a href="../../en/Power_management.html" title="Power management">Power management</a></li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../../en/Power_management/Suspend_and_hibernate.html" title="Power management/Suspend and hibernate">Power management/Suspend and hibernate</a>. Дата последней синхронизации: 25 сентября 2021. Вы можете <a href="../../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Power_management/Suspend_and_hibernate&amp;diff=0&amp;oldid=482651">изменения</a>.</div>
<p>В настоящее время существует три метода приостановки работы компьютера: <b>suspend to RAM</b> обычно называемая просто <b>suspend</b>(приостановка, ждущий режим, сон, STR, S3 ), <b>suspend to disk</b> известный как <b>hibernate</b>( гибернация, спящий режим, STD, S4 ), и <b>hybrid suspend</b>( гибридная приостановка, гибридный спящий режим, иногда применяется название <b>suspend to both</b>):
</p>
<ul><li>
<b>Suspend to RAM</b> отключает питание большинства частей компьютера, кроме ОЗУ, что требуется для восстановления состояния машины. Из-за большой экономии энергии рекомендуется, чтобы ноутбуки автоматически входили в этот режим, когда компьютер работает от батарей, и крышка закрыта или пользователь неактивен в течение некоторого времени.</li></ul>
<ul><li>
<b>Suspend to disk</b> метод сохраняет состояние машины на диске <a href="../../ru/Swap.html" title="Swap (Русский)">Swap (Русский)</a> и полностью отключает компьютер, потребления электроэнергии нет. Когда устройство включается, состояние восстанавливается.</li></ul>
<ul><li>
<b>Suspend to both</b> сохраняет состояние машины на диске в свопе, но не выключает ее. Вместо этого  выполняется обычная приостановка в ОЗУ. Поэтому, если батарея не разряжена, система может возобновиться из ОЗУ. Если батарея разряжена, система может быть возобновлена с диска, что намного медленнее, чем возобновление работы из ОЗУ, но состояние машины не будет потеряно.</li></ul>
<p>Существует несколько низкоуровневых интерфейсов, обеспечивающих базовые функции, а также некоторые интерфейсы высокого уровня, обеспечивающие трюки для обработки проблемных аппаратных драйверов / модулей ядра (например, повторная инициализация видеокарты).
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id=".D0.9D.D0.B8.D0.B7.D0.BA.D0.BE.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D0.B5.D0.B2.D1.8B.D0.B5_.D0.B8.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B"></span><span class="mw-headline" id="Низкоуровневые_интерфейсы">Низкоуровневые интерфейсы</span>
</h2>
<p>Хотя эти интерфейсы могут использоваться напрямую, рекомендуется использовать какой-либо из <a href="#%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D1%8B_%D0%B2%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%B3%D0%BE_%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D1%8F">#Интерфейсы высокого уровня</a> для ждущего / спящего режима. Использование низкоуровневых интерфейсов напрямую существенно быстрее, чем использование любого интерфейса высокого уровня, поскольку запуск всех хуков  перед и после режима приостановки требует времени, но хуки могут правильно устанавливать аппаратные часы, восстанавливать беспроводное соединение и т.д.
</p>
<h3>
<span id=".D0.AF.D0.B4.D1.80.D0.BE_.28swsusp.29"></span><span class="mw-headline" id="Ядро_(swsusp)">Ядро (swsusp)</span>
</h3>
<p>Самый простой подход для входа в режим сна заключается в прямом информировании встроенного программного кода ядра (swsusp); точный метод и состояние зависят от уровня аппаратной поддержки. В современных ядрах основным механизмом переключения режимов является запись соответствующих значений в <code>/sys/power/state</code>.
</p>
<p>Cмотрите <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/pm/sleep-states.html">документацию</a> для подробностей.
</p>
<h3><span class="mw-headline" id="uswsusp">uswsusp</span></h3>
<p>Uswsusp ('Userspace Software Suspend') представляет собой оболочку ядерного механизма приостановки в ОЗУ, которая выполняет некоторые манипуляции с графическим адаптером из пользовательского пространства перед приостановкой и после возобновления.
</p>
<p>Смотрите основную статью <a href="../../en/Uswsusp.html" title="Uswsusp">Uswsusp</a>.
</p>
<h2>
<span id=".D0.98.D0.BD.D1.82.D0.B5.D1.80.D1.84.D0.B5.D0.B9.D1.81.D1.8B_.D0.B2.D1.8B.D1.81.D0.BE.D0.BA.D0.BE.D0.B3.D0.BE_.D1.83.D1.80.D0.BE.D0.B2.D0.BD.D1.8F"></span><span class="mw-headline" id="Интерфейсы_высокого_уровня">Интерфейсы высокого уровня</span>
</h2>
<p>Конечной целью этих пакетов является предоставление программ( двоичных файлов/скриптов), которые могут быть вызваны для выполнения приостановки компьютера. Фактическая привязка их к кнопкам питания, щелчкам меню или событиям крышки ноутбука обычно предоставляется другим инструментам. Чтобы автоматически приостановить работу при определенных событиях, таких как закрытие крышки ноутбука или процент истощения батареи, вам может потребоваться запустить <a href="../../en/Acpid.html" title="Acpid">Acpid</a>.
</p>
<h3><span class="mw-headline" id="systemd">systemd</span></h3>
<p><a href="../../ru/Systemd.html" title="Systemd (Русский)">systemd</a> предоставляет собственные команды для ждущего, спящего и гибридного режима приостановки, смотрите <a href="../../en/Power_management.html#Power_management" title="Power management">Power management#Power management</a> для деталей. Это интерфейс по умолчанию, используемый в Arch Linux.
Смотрите <a href="../../en/Power_management.html#Sleep_hooks" title="Power management">Power management#Sleep hooks</a> для получения дополнительной информации о настройке хуков режимов сна. Также смотрите <span class="plainlinks archwiki-template-man" title="$ man 1 systemctl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemctl.1">systemctl(1)</a></span>, <span class="plainlinks archwiki-template-man" title="$ man 8 systemd-sleep"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd-sleep.8">systemd-sleep(8)</a></span> и <span class="plainlinks archwiki-template-man" title="$ man 7 systemd.special"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/systemd.special.7">systemd.special(7)</a></span>.
</p>
<h2>
<span id=".D0.93.D0.B8.D0.B1.D0.B5.D1.80.D0.BD.D0.B0.D1.86.D0.B8.D1.8F"></span><span class="mw-headline" id="Гибернация">Гибернация</span>
</h2>
<p>Чтобы использовать спящий режим, вам нужно создать <a href="../../en/Swap.html" title="Swap">swap</a> раздел или файл. Вам нужно будет указать ядру на своп, используя параметр <code>resume=</code>, который настраивается через загрузчик. Вам также понадобится <a href="#%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0_initramfs">настроить initramfs</a>. Это говорит ядру попытаться возобновить работу с указанного свопа в раннем пользовательском пространстве. Эти три этапа подробно описаны ниже.
</p>
<h3>
<span id=".D0.9F.D1.80.D0.BE_.D1.80.D0.B0.D0.B7.D0.BC.D0.B5.D1.80_.D1.80.D0.B0.D0.B7.D0.B4.D0.B5.D0.BB.D0.B0.2F.D1.84.D0.B0.D0.B9.D0.BB.D0.B0_.D0.BF.D0.BE.D0.B4.D0.BA.D0.B0.D1.87.D0.BA.D0.B8"></span><span class="mw-headline" id="Про_размер_раздела/файла_подкачки">Про размер раздела/файла подкачки</span>
</h3>
<p>Даже если ваш раздел подкачки меньше ОЗУ, у вас все еще есть большая вероятность успешно перейти в спящий режим. Согласно <a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/pm/sleep-states.html?highlight=image_size#basic-sysfs-interfaces-for-system-suspend-and-hibernation">ядерной документации</a>:
</p>
<p><i><code>/sys/power/image_size</code> управляет размером образа, создаваемого механизмом приостановки на диск. Это может быть строка, представляющая неотрицательное целое число, которое будет использоваться в качестве верхнего предела размера образа в байтах. Механизм приостановки сделает все возможное, чтобы размер образа не превышал это число. Однако, если это окажется невозможным, он попытается приостановить все равно, используя наименьший возможный размер образа. В частности, если в этот файл записать «0», размер образа будет настолько мал на сколько это возможно. Чтение из этого файла отображает текущее ограничение размера образа, которое по умолчанию установлено на 2/5 доступного ОЗУ. </i>
</p>
<p>Вы можете либо уменьшить значение <code>/sys/power/image_size</code>, чтобы сделать образ как можно меньшим (для небольших разделов подкачки) или увеличить его, чтобы ускорить процесс гибернации.
</p>
<h3>
<span id=".D0.9D.D0.B0.D1.81.D1.82.D1.80.D0.BE.D0.B9.D0.BA.D0.B0_initramfs"></span><span class="mw-headline" id="Настройка_initramfs">Настройка initramfs</span>
</h3>
<ul><li>Когда используется <a href="../../ru/Arch_boot_process.html#initramfs" class="mw-redirect" title="Initramfs (Русский)">initramfs</a> с хуком <code>base</code>, а по умолчанию это так, хук <code>resume</code> требуется в <code>/etc/mkinitcpio.conf</code>. Будь то по метке или по UUID раздел подкачки ссылается на файл устройства создаваемый udev, поэтому хук <code>resume</code> должен идти «после» хука <code>udev</code>. Этот пример был сделан на основе конфигурации хуков по умолчанию:</li></ul>
<dl><dd><pre>HOOKS="base udev <b>resume</b> autodetect modconf block filesystems keyboard fsck"</pre></dd></dl>
<dl><dd>Не забудьте <a href="../../ru/Mkinitcpio.html#%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BE%D1%87%D0%BD%D0%BE%D0%B3%D0%BE_%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B0" title="Mkinitcpio (Русский)">пересобрать образ initramfs</a> чтобы эти изменения вступили в силу.</dd></dl>
<dl><dd><div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> <a href="../../en/LVM.html" title="LVM">LVM</a> пользователи должны добавить <code>resume</code> хук после <code>lvm2</code>.</div></dd></dl>
<ul><li>Когда используется initramfs с хуком <code>systemd</code>, механизм возобновления уже предоставлен и дополнительные хуки не нужны.</li></ul>
<h3>
<span id=".D0.9D.D0.B5.D0.BE.D0.B1.D1.85.D0.BE.D0.B4.D0.B8.D0.BC.D1.8B.D0.B5_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D1.8B_.D1.8F.D0.B4.D1.80.D0.B0"></span><span class="mw-headline" id="Необходимые_параметры_ядра">Необходимые параметры ядра</span>
</h3>
<p>Должен быть использован параметр ядра <code>resume=<i>swap_partition</i></code>. Либо имя, назначенное ядром для раздела, либо его <a href="../../ru/Persistent_block_device_naming.html#by-uuid" title="Persistent block device naming (Русский)">UUID</a>, можно использовать как <code><i>swap_partition</i></code>. Например:
</p>
<ul>
<li><code>resume=/dev/sda1</code></li>
<li><code>resume=UUID=4209c845-f495-4c43-8a03-5363dd433153</code></li>
<li>
<code>resume=/dev/mapper/archVolumeGroup-archLogicVolume</code> -- если используется LVM</li>
</ul>
<p>В общем, метод именования, используемый для параметра <code>resume</code>, должен быть таким же, как и для параметра <code>root</code>.
Конфигурация зависит от используемого <a href="../../ru/Arch_boot_process.html#%D0%97%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D1%87%D0%B8%D0%BA" class="mw-redirect" title="Загрузчик">загрузчика</a>, обратитесь к статье <a href="../../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">Параметры ядра</a> за деталями.
</p>
<h4>
<span id=".D0.93.D0.B8.D0.B1.D0.B5.D1.80.D0.BD.D0.B0.D1.86.D0.B8.D1.8F_.D0.B2_.D1.84.D0.B0.D0.B9.D0.BB_.D0.BF.D0.BE.D0.B4.D0.BA.D0.B0.D1.87.D0.BA.D0.B8"></span><span class="mw-headline" id="Гибернация_в_файл_подкачки">Гибернация в файл подкачки</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> <a href="../../en/Btrfs.html#Swap_file" title="Btrfs">BTRFS</a> на ядре Linux ниже 5.0 не поддерживает файлы подкачки. Несоблюдение этого предупреждения может привести к повреждению файловой системы. В то же время когда файл подкачки монтируется через устройство <code>/dev/loop</code> его можно использовать и на Btrfs, но это приведет к значительному ухудшению производительности подкачки.</div>
<p>Для использования файла подкачки также необходимо установить <a href="../../ru/Kernel_parameters.html" class="mw-redirect" title="Параметры ядра">параметры ядра</a> <code>resume=<i>swap_device</i></code> и <code>resume_offset=<i>swap_file_offset</i></code>. Смотрите <a rel="nofollow" class="external text" href="https://docs.kernel.org/power/swsusp-and-swap-files.html">документацию ядра</a>.
</p>
<p>Значение <code><i>swap_file_offset</i></code> можно получить запустив <code>filefrag -v <i>swap_file</i></code>, требуемое значение расположено в столбце  <code>physical_offset</code> первого ряда таблицы выводимой командой. Например:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># filefrag -v /swapfile</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Filesystem type is: ef53
File size of /swapfile is 4294967296 (1048576 blocks of 4096 bytes)
 ext:     logical_offset:        physical_offset: length:   expected: flags:
   0:        0..       0:      38912..     38912:      1:            
   1:        1..   22527:      38913..     61439:  22527:             unwritten
   2:    22528..   53247:     899072..    929791:  30720:      61440: unwritten
...
</pre>
<p>В этом примере значение <code><i>swap_file_offset</i></code> это первое число <code>38912</code> с двумя точками.
</p>
<p>Значение <code><i>swap_file_offset</i></code> так же может быть получено с помощью <code>swap-offset <i>swap_file</i></code>. Файл команды <i>swap-offset</i> предоставляется пакетом <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/uswsusp-git/">uswsusp-git</a></span><sup><small>AUR</small></sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>Параметр ядра <code>resume</code> определяет устройство, раздел которого содержит файл подкачки, а не сам файл подкачки. О местонахождении файла подкачки на утройстве возобновления систему информирует параметр <code>resume_offset</code>. Перед первой гибернацией требуется перезагрузка для их активации.</li>
<li>Если вы используете <a href="../../en/Uswsusp.html" title="Uswsusp">uswsusp</a>, то эти два параметра должны быть представлены в <code> /etc/suspend.conf</code> с помощью ключей <code>resume device</code> и <code>resume offset</code>. В этом случае перезагрузка не требуется.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Возможно, вы захотите уменьшить <a href="../../en/Swap.html#Swappiness" title="Swap">Swap#Swappiness</a> для вашего файла подкачки, если единственная цель способность обеспечить спящий режим, а не расширение ОЗУ.</div>
<h4>
<span id=".D0.93.D0.B8.D0.B1.D0.B5.D1.80.D0.BD.D0.B0.D1.86.D0.B8.D1.8F_.D0.B2_.D1.84.D0.B0.D0.B9.D0.BB_.D0.BF.D0.BE.D0.B4.D0.BA.D0.B0.D1.87.D0.BA.D0.B8_.D0.BD.D0.B0_Btrfs"></span><span class="mw-headline" id="Гибернация_в_файл_подкачки_на_Btrfs">Гибернация в файл подкачки на Btrfs</span>
</h4>
<p>Число resume_offset может быть вычислено с помощью <a rel="nofollow" class="external text" href="https://github.com/osandov/osandov-linux/blob/master/scripts/btrfs_map_physical.c">инструмента btrfs_map_physical.c</a>.
Не пытайтесь использовать инструмент filefrag, на <a href="../../en/Btrfs.html" title="Btrfs">Btrfs</a> "физическое" смещение, которое вы получаете от filefrag, не является реальным физическим смещением на диске; существует виртуальное адресное пространство диска для поддержки нескольких устройств. <a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=202803">[1]</a>
</p>
<p>Загрузите или скопируйте <a rel="nofollow" class="external text" href="https://github.com/osandov/osandov-linux/blob/master/scripts/btrfs_map_physical.c">инструмент btrfs_map_physical.c</a> в файл с именем <code>btrfs_map_physical.c</code>, затем скомпилируйте его,
</p>
<pre>$ gcc -O2 -o btrfs_map_physical btrfs_map_physical.c
</pre>
<p>и запустите его. Пример вывода показан ниже.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># ./btrfs_map_physical <i>/path/to/swapfile</i></pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">FILE OFFSET  EXTENT TYPE  LOGICAL SIZE  LOGICAL OFFSET  PHYSICAL SIZE  DEVID  PHYSICAL OFFSET
0            regular      4096          2927632384      268435456      1      <b>4009762816</b>
4096         prealloc     268431360     2927636480      268431360      1      4009766912
268435456    prealloc     268435456     3251634176      268435456      1      4333764608
536870912    prealloc     268435456     3520069632      268435456      1      4602200064
805306368    prealloc     268435456     3788505088      268435456      1      4870635520
1073741824   prealloc     268435456     4056940544      268435456      1      5139070976
1342177280   prealloc     268435456     4325376000      268435456      1      5407506432
1610612736   prealloc     268435456     4593811456      268435456      1      5675941888
</pre>
<p>Обратите внимание на первое физическое смещение, возвращаемое этим инструментом. В этом примере мы используем <code>4009762816</code>. Также обратите внимание на размер страницы, который можно найти с помощью <code>getconf PAGESIZE</code>.
</p>
<p>Чтобы вычислить значение <code>resume_offset</code>, разделите физическое смещение на размер страницы. В данном примере это <code>4009762816 / 4096 = 978946</code>.
</p>
<h4>
<span id=".D0.93.D0.B8.D0.B1.D0.B5.D1.80.D0.BD.D0.B0.D1.86.D0.B8.D1.8F_.D0.B2_.D1.82.D0.BE.D0.BC.D0.B5_LVM_.D1.81_.D1.82.D0.BE.D0.BD.D0.BA.D0.BE.D0.B9_.D0.BF.D1.80.D0.BE.D0.B2.D0.B8.D0.B7.D0.B8.D0.B5.D0.B9"></span><span class="mw-headline" id="Гибернация_в_томе_LVM_с_тонкой_провизией">Гибернация в томе LVM с тонкой провизией</span>
</h4>
<p>Спящий режим в томе <a href="../../en/LVM.html" title="LVM">LVM</a> с тонкой провизией возможен, но необходимо убедиться, что том полностью выделен. В противном случае возобновление работы с него будет неудачным, см. <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/50703">FS#50703</a>.
</p>
<p>Вы можете полностью выделить том LVM, просто заполнив его нулями. Например:
</p>
<pre># dd if=/dev/zero of=/dev/vg0/swap bs=1M status=progress
</pre>
<p>Для проверки того, что том полностью выделен, можно использовать:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lvs</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"> LV                   VG  Attr       LSize   Pool Origin    Data%  Meta%  Move Log Cpy%Sync Convert
 swap                 vg0 Vwi-aot--- 10.00g  pool           100
</pre>
<p>Полностью выделенный том будет отображаться как использующий 100% данных.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Не используйте <a href="../../en/Solid_state_drive.html#TRIM" class="mw-redirect" title="TRIM">TRIM</a> на своп-томах с тонкой провизией, которые используются для спящего режима, т.е. не используйте <code>discard</code> в <code>/etc/fstab</code> и опцию <code>-d</code>/<code>--discard</code> в <i>swapon</i>. В противном случае используемое пространство будет деаллоцировано</div>
<h2>
<span id=".D0.A2.D0.B5.D1.85.D0.BD.D0.BE.D0.BB.D0.BE.D0.B3.D0.B8.D1.8F_Intel_Rapid_Start_.28IRST.29"></span><span class="mw-headline" id="Технология_Intel_Rapid_Start_(IRST)">Технология Intel Rapid Start (IRST)</span>
</h2>
<p>При включенной технологии Intel Rapid Start Technology (IRST) для выхода из глубокого сна требуется "<a rel="nofollow" class="external text" href="https://mjg59.dreamwidth.org/26022.html">на несколько секунд больше, чем для выхода из S3, но намного меньше, чем для выхода из спящего режима</a>". 
</p>
<p>Многие системы на базе Intel имеют встроенную поддержку IRST, но для этого требуется специальный раздел на SSD (а не на HDD). OEM-развертывания Windows могут уже иметь уже существующий раздел IRST, который можно сохранить во время процесса установки Arch Linux (вместо очистки и перераспределения всего SSD). Он должен отображаться как неотформатированный раздел, равный размеру ОЗУ системы. 
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Важно:</strong> Раздел Intel Rapid Start не зашифрован; "Intel рекомендует отключить технологию Intel Rapid Start, если вы используете программное шифрование диска". <a rel="nofollow" class="external autonumber" href="https://www.intel.com/content/www/us/en/support/articles/000024080/technologies.html">[2]</a>
</div>
<p>Однако, если вы собираетесь стереть и переразбить весь диск (или уже сделали это), то раздел IRST необходимо создать заново, если вы планируете использовать эту технологию. Это можно сделать, создав пустой раздел, равный размеру ОЗУ системы, и установив для него тип раздела <a href="https://en.wikipedia.org/wiki/GUID_Partition_Table#Partition_type_GUIDs" class="extiw" title="wikipedia:GUID Partition Table">GUID</a> <code> D3BFE2DE-3DAF-11DF-BA40- E3A556D89593</code> для раздела <a href="../../en/Partitioning.html#GUID_Partition_Table" class="mw-redirect" title="GPT">GPT</a> или <a href="https://en.wikipedia.org/wiki/Partition_type" class="extiw" title="wikipedia:Partition type">ID</a> <code> 0x84</code> для раздела <a href="../../en/Partitioning.html#Master_Boot_Record" class="mw-redirect" title="MBR">MBR</a>. Вам также может потребоваться включить поддержку IRST в настройках прошивки вашей системы.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> Время до срабатывания IRST (после приостановки) можно настроить в настройках прошивки системы.</div>
<p>Продолжительность процесса гибернации IRST (например, копирования "всего содержимого ОЗУ в специальный раздел") зависит от размера ОЗУ системы и скорости SSD и, таким образом, может занять 20–60 секунд. Некоторые системы могут сигнализировать о завершении процесса светодиодным индикатором (LED), например, когда он перестает мигать. 
</p>
<p>Смотрите также <a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/support/articles/000024078/technologies.html">общие вопросы и ответы</a> и <a rel="nofollow" class="external text" href="https://www.intel.com/content/www/us/en/support/articles/000005836/boards-and-kits/desktop-boards.html">руководства пользователей</a><sup title="Статус последней проверки: 404">[<a href="https://en.wikipedia.org/wiki/ru:%D0%92%D0%B8%D0%BA%D0%B8%D0%BF%D0%B5%D0%B4%D0%B8%D1%8F:%D0%9C%D1%91%D1%80%D1%82%D0%B2%D1%8B%D0%B5_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8" class="extiw" title="wikipedia:ru:Википедия:Мёртвые ссылки">устаревшая ссылка</a> 2023-07-30 ⓘ]</sup> для технологии Intel Rapid Start.
</p>
<h2>
<span id=".D0.98.D1.81.D0.BF.D1.80.D0.B0.D0.B2.D0.BB.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B1.D0.BB.D0.B5.D0.BC"></span><span class="mw-headline" id="Исправление_проблем">Исправление проблем</span>
</h2>
<h3><span class="mw-headline" id="ACPI_OS_NAME">ACPI_OS_NAME</span></h3>
<p>Возможно, вы захотите настроить свою <b>таблицу DSDT</b>, чтобы заставить ее работать. Смотрите статью <a href="../../en/DSDT.html" title="DSDT">DSDT</a>
</p>
<h3>
<span id=".D0.9F.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D1.82.D0.B5.D0.BB.D1.8F.D0.BC_VAIO"></span><span class="mw-headline" id="Пользователям_VAIO">Пользователям VAIO</span>
</h3>
<p>Добавьте <b>acpi_sleep=nonvs</b> параметр ядра в ваш загрузчик и возьмите себе с полки пирожок!
</p>
<h3>
<span id=".D0.96.D0.B4.D1.83.D1.89.D0.B8.D0.B9.2F.D0.A1.D0.BF.D1.8F.D1.89.D0.B8.D0.B9_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC_.D0.BD.D0.B5_.D1.80.D0.B0.D0.B1.D0.BE.D1.82.D0.B0.D0.B5.D1.82_.D0.B8.D0.BB.D0.B8_.D1.81.D0.B1.D0.BE.D0.B8.D1.82"></span><span class="mw-headline" id="Ждущий/Спящий_режим_не_работает_или_сбоит">Ждущий/Спящий режим не работает или сбоит</span>
</h3>
<p>There have been many reports about the screen going black without easily viewable errors or the ability to do anything when going into and coming back from suspend and/or hibernate. These problems have been seen on both laptops and desktops. This is not an official solution, but switching to an older kernel, especially the LTS-kernel, will probably fix this.
</p>
<p>Sometimes the screen goes black due to device initialization from within the initramfs. Removing any modules you might have in <a href="../../en/Mkinitcpio.html#MODULES" title="Mkinitcpio">Mkinitcpio#MODULES</a> and rebuilding the initramfs, can possibly solve this issue, specially graphics drivers for <a href="../../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">early KMS</a>. Initializing such devices before resuming can cause inconsistencies that prevents the system resuming from hibernation. This does not affect resuming from RAM. Also, check this <a rel="nofollow" class="external text" href="https://01.org/blogs/rzhang/2015/best-practice-debug-linux-suspend/hibernate-issues">article</a> for the best practices to debug suspend/hibernate issues.
</p>
<p>For Intel graphics drivers, enabling early KMS may help to solve the blank screen issue. Refer to <a href="../../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a> for details.
</p>
<h3><span class="mw-headline" id="Wake-on-LAN">Wake-on-LAN</span></h3>
<p>If <a href="../../en/Wake-on-LAN.html" title="Wake-on-LAN">Wake-on-LAN</a> is active, the network interface card will consume power even if the computer is hibernated.
</p>
<h3>
<span id=".D0.9C.D0.B3.D0.BD.D0.BE.D0.B2.D0.B5.D0.BD.D0.BD.D1.8B.D0.B9_.D0.B7.D0.B0.D0.BF.D1.83.D1.81.D0.BA_.D0.B8.D0.B7_.D1.80.D0.B5.D0.B6.D0.B8.D0.BC.D0.B0_.D0.BE.D0.B6.D0.B8.D0.B4.D0.B0.D0.BD.D0.B8.D1.8F"></span><span class="mw-headline" id="Мгновенный_запуск_из_режима_ожидания">Мгновенный запуск из режима ожидания</span>
</h3>
<p>For some Intel Haswell systems with the LynxPoint and LynxPoint-LP chipset, instantaneous wakeups after suspend are reported. They are linked to erroneous BIOS ACPI implementations and how the <code>xhci_hcd</code> module interprets it during boot. As a work-around reported affected systems are added to a blacklist (named <code>XHCI_SPURIOUS_WAKEUP</code>) by the kernel case-by-case.<a rel="nofollow" class="external autonumber" href="https://bugzilla.kernel.org/show_bug.cgi?id=66171#c6">[3]</a> 
</p>
<p>Instantaneous resume may happen, for example, if a USB device is plugged during suspend and ACPI wakeup triggers are enabled. A viable work-around for such a system, if it is not on the blacklist yet, is to disable the wakeup triggers. An example to disable wakeup through USB is described as follows.<a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?pid=1575617">[4]</a> 
</p>
<p>To view the current configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ cat /proc/acpi/wakeup</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Device  S-state   Status   Sysfs node
...
EHC1      S3    *enabled  pci:0000:00:1d.0
EHC2      S3    *enabled  pci:0000:00:1a.0
XHC       S3    *enabled  pci:0000:00:14.0
...
</pre>
<p>The relevant devices are <code>EHC1</code>, <code>EHC1</code> and <code>XHC</code> (for USB 3.0). To toggle their state you have to echo the device name to the file as root.
</p>
<pre># echo EHC1 &gt; /proc/acpi/wakeup
# echo EHC2 &gt; /proc/acpi/wakeup
# echo XHC &gt; /proc/acpi/wakeup
</pre>
<p>This should result in suspension working again. However, this settings are only temporary and would have to be set at every reboot. To automate this take a look at <a href="../../ru/Systemd.html#%D0%9D%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2_%D1%8E%D0%BD%D0%B8%D1%82%D0%BE%D0%B2" title="Systemd (Русский)">systemd#Написание файлов юнитов</a>. See <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1575617#p1575617">BBS thread</a> for a possible solution and more information.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../ru/Category:Power_management.html" title="Category:Power management (Русский)">Power management (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Power_management_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Suspend_and_hibernate_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=784054">https://wiki.archlinux.org/index.php?title=Power_management_(Русский)/Suspend_and_hibernate_(Русский)&amp;oldid=784054</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2023, at 08:44.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
