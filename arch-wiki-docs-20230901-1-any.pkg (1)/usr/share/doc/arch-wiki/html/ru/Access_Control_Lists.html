<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Access Control Lists (Русский) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Access_Control_Lists_Русский rootpage-Access_Control_Lists_Русский skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Установка" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Установка</div>
			</a>
			
			<ul id="toc-Установка-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Включение_ACL" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Включение ACL</div>
			</a>
			
			<ul id="toc-Включение_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Использование" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Использование</div>
			</a>
			
				<button aria-controls="toc-Использование-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Использование subsection
				</button>
			
			<ul id="toc-Использование-sublist" class="sidebar-toc-list">
				<li id="toc-Изменение_ACL" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Изменение ACL</div>
			</a>
			
			<ul id="toc-Изменение_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Просмотр_ACL" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9F%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82%D1%80_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Просмотр ACL</div>
			</a>
			
			<ul id="toc-Просмотр_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Примеры" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Примеры</div>
			</a>
			
				<button aria-controls="toc-Примеры-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Примеры subsection
				</button>
			
			<ul id="toc-Примеры-sublist" class="sidebar-toc-list">
				<li id="toc-Вывод_команды_ls" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%92%D1%8B%D0%B2%D0%BE%D0%B4_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B_ls">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Вывод команды ls</div>
			</a>
			
			<ul id="toc-Вывод_команды_ls-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Права_на_выполнение_личных_файлов" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#%D0%9F%D1%80%D0%B0%D0%B2%D0%B0_%D0%BD%D0%B0_%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D1%85_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Права на выполнение личных файлов</div>
			</a>
			
			<ul id="toc-Права_на_выполнение_личных_файлов-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Смотрите_также" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B8%D1%82%D0%B5_%D1%82%D0%B0%D0%BA%D0%B6%D0%B5">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Смотрите также</div>
			</a>
			
			<ul id="toc-Смотрите_также-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../ru/Access_Control_Lists.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">русский</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../ru/Access_Control_Lists.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../ru/Access_Control_Lists.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="ru" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Состояние перевода:</strong> На этой странице представлен перевод статьи <a href="../en/Access_Control_Lists.html" title="Access Control Lists">Access Control Lists</a>. Дата последней синхронизации: 10 июля 2021. Вы можете <a href="../ru/ArchWiki:Translation_Team.html" title="ArchWiki:Translation Team (Русский)">помочь</a> синхронизировать перевод, если в английской версии произошли <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Access_Control_Lists&amp;diff=0&amp;oldid=675570">изменения</a>.</div>
<p><a href="https://en.wikipedia.org/wiki/ru:ACL" class="extiw" title="wikipedia:ru:ACL">Списки управления доступом</a> (Access Control Lists, ACL) — расширенный, более гибкий механизм прав доступа для <a href="../ru/File_systems.html" title="File systems (Русский)">файловых систем</a>, разработанный как дополнение к стандартным правам доступа UNIX. ACL позволяет задавать права доступа к объектам на диске для пользователей и групп.
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id=".D0.A3.D1.81.D1.82.D0.B0.D0.BD.D0.BE.D0.B2.D0.BA.D0.B0"></span><span class="mw-headline" id="Установка">Установка</span>
</h2>
<p>Пакет <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acl">acl</a></span> уже установлен, так как является зависимостью <a href="../ru/Systemd.html" title="Systemd (Русский)">systemd</a>.
</p>
<h2>
<span id=".D0.92.D0.BA.D0.BB.D1.8E.D1.87.D0.B5.D0.BD.D0.B8.D0.B5_ACL"></span><span class="mw-headline" id="Включение_ACL">Включение ACL</span>
</h2>
<p>Для использования ACL файловая система должна быть смонтирована с опцией <code>acl</code>. Файл <a href="../ru/Fstab.html" title="Fstab (Русский)">fstab</a> позволяет настроить постоянное монтирование с данной опцией.
</p>
<p>В некоторых файловых системах параметр монтирования <code>acl</code> включён по умолчанию. К таким файловым системам относятся <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> и Ext2/<a href="../en/Ext3.html" title="Ext3">3</a>/<a href="../en/Ext4.html" title="Ext4">4</a>. Следующая команда позволяет проверить раздел с файловой системой ext* на наличие параметра <code>acl</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># tune2fs -l /dev/sd<i>XY</i> | grep "Default mount options:"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Default mount options:    user_xattr acl
</pre>
<p>Убедитесь, что используемая по умолчанию опция не была переопределена. Об этом будет свидетельствовать параметр <code>noacl</code> в соответствующей строке файла <code>/proc/mounts</code>.
</p>
<p>Задать параметры монтирования файловой системы по умолчанию можно командой <code>tune2fs -o <i>параметр</i> <i>раздел</i></code>, например:
</p>
<pre># tune2fs -o acl /dev/sd<i>XY</i>
</pre>
<p>Это очень удобно при работе с внешними дисками, поскольку такой диск будет монтироваться с опцией <code>acl</code> и на других Linux-машинах. В противном случае придётся редактировать файл <code>/etc/fstab</code> на каждой системе.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> 
<ul>
<li>
<code>acl</code> используется как опция монтирования по умолчанию при создании файловой системы ext2/3/4. Это настраивается в файле <code>/etc/mke2fs.conf</code>.</li>
<li>Параметры монтирования по умолчанию в <code>/proc/mounts</code> не указаны.</li>
</ul>
</div>
<h2>
<span id=".D0.98.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5"></span><span class="mw-headline" id="Использование">Использование</span>
</h2>
<h3>
<span id=".D0.98.D0.B7.D0.BC.D0.B5.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_ACL"></span><span class="mw-headline" id="Изменение_ACL">Изменение ACL</span>
</h3>
<p>Для изменения прав ACL используется команда <i>setfacl</i>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Совет:</strong> 
<ul>
<li>Флаг <code>--test</code> позволяет вывести изменения прав доступа к файлу/каталогу без их реального применения (т.н. dry-run).</li>
<li>Флаг <code>-R</code>/<code>--recursive</code> позволяет применять действия рекурсивно.</li>
</ul>
</div>
<p>Задать права пользователя (в качестве <code><i>пользователь</i></code> можно использовать имя пользователя или его ID):
</p>
<pre># setfacl -m "u:<i>пользователь:права</i>" &lt;file/dir&gt;
</pre>
<p>Задать права группы (в качестве  <code><i>группа</i></code>  можно использовать имя группы или её ID):
</p>
<pre># setfacl -m "g:<i>группа:права</i>" &lt;file/dir&gt;
</pre>
<p>Задать права для остальных:
</p>
<pre># setfacl -m "other:<i>права</i>" &lt;file/dir&gt;
</pre>
<p>Настроить наследование <i>новыми</i> файлами и каталогами записей ACL родительского каталога (не относится к файлам/каталогам, которые <i>копируются</i> в каталог):
</p>
<pre># setfacl -dm "<i>запись_ACL</i>" &lt;dir&gt;
</pre>
<p>Удалить определённую запись ACL:
</p>
<pre># setfacl -x "<i>запись_ACL</i>" &lt;file/dir&gt;
</pre>
<p>Удалить записи по умолчанию:
</p>
<pre># setfacl -k &lt;file/dir&gt;
</pre>
<p>Удалить все записи ACL:
</p>
<pre># setfacl -b &lt;file/dir&gt;
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Оригинальное замечание об опции <code>--mask</code> (взятое из <span class="plainlinks archwiki-template-man" title="$ man 1 setfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/setfacl.1">setfacl(1)</a></span>) было признано неточным, но новый вариант также, судя по всему, неверен. Подробности см. по ссылке на обсуждение. (Discuss in <a href="../en/Talk:Access_Control_Lists.html#ACL_mask_entry" title="Talk:Access Control Lists">Talk:Access Control Lists#ACL mask entry</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> По умолчанию <i>setfacl</i> вычисляет значение маски ACL, если она не была задана явно флагом <code>--mask</code>. С помощью маски задаются максимальные права, которые могут быть даны пользователю (не владельцу) или группе. Если маска не задаётся явно, то ей присваивается значение прав "группы по умолчанию". Например, предположим, что группа определённого каталога имеет права <code>r-x</code>. Если добавить ACL-пользователя или группу с правами <code>rwx</code>, то <i>эффективными</i> правами этого пользователя/группы применительно к данному каталогу будут <code>r-x</code>. Причина подобного поведения заключается в предотвращении "сюрпризов" при перемещении файлов из системы, не поддерживающей ACL, в систему с ACL.</div>
<h3>
<span id=".D0.9F.D1.80.D0.BE.D1.81.D0.BC.D0.BE.D1.82.D1.80_ACL"></span><span class="mw-headline" id="Просмотр_ACL">Просмотр ACL</span>
</h3>
<p>Вывести права доступа ACL:
</p>
<pre># getfacl &lt;file/dir&gt;
</pre>
<h2>
<span id=".D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80.D1.8B"></span><span class="mw-headline" id="Примеры">Примеры</span>
</h2>
<p>Установить все права доступа к файлу <code>abc</code> для пользователя <code>johnny</code>:
</p>
<pre># setfacl -m "u:johny:rwx" abc
</pre>
<p>Проверка:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
user:johny:rwx
group::r--
mask::rwx
other::r--
</pre>
<p>Измененить права для пользователя <code>johnny</code>:
</p>
<pre># setfacl -m "u:johny:r-x" abc
</pre>
<p>Проверка:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
user:johny:r-x
group::r--
mask::r-x
other::r--
</pre>
<p>Удалить все записи ACL:
</p>
<pre># setfacl -b abc
</pre>
<p>Проверка:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
group::r--
other::r--
</pre>
<h3>
<span id=".D0.92.D1.8B.D0.B2.D0.BE.D0.B4_.D0.BA.D0.BE.D0.BC.D0.B0.D0.BD.D0.B4.D1.8B_ls"></span><span class="mw-headline" id="Вывод_команды_ls">Вывод команды ls</span>
</h3>
<p>Символ <code><b>+</b></code> (плюс) после прав доступа Unix в выводе команды <code>ls -l</code> указывает на использование ACL:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /dev/audio</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">crw-rw----+ 1 root audio 14, 4 nov.   9 12:49 /dev/audio
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getfacl /dev/audio</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">getfacl: Removing leading '/' from absolute path names
# file: dev/audio
# owner: root
# group: audio
user::rw-
user:solstice:rw-
group::rw-
mask::rw-
other::---
</pre>
<h3>
<span id=".D0.9F.D1.80.D0.B0.D0.B2.D0.B0_.D0.BD.D0.B0_.D0.B2.D1.8B.D0.BF.D0.BE.D0.BB.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BB.D0.B8.D1.87.D0.BD.D1.8B.D1.85_.D1.84.D0.B0.D0.B9.D0.BB.D0.BE.D0.B2"></span><span class="mw-headline" id="Права_на_выполнение_личных_файлов">Права на выполнение личных файлов</span>
</h3>
<p>Ниже описано, как процесс вроде <a href="../en/List_of_applications/Internet.html#Web_servers" class="mw-redirect" title="Web server">веб-сервера</a> может получить доступ к файлам в домашнем каталоге пользователя без ущерба для безопасности.
</p>
<p>Будем считать что веб-сервер работает от пользователя <code>http</code> и получает доступ к домашнему каталогу <code>/home/geoffrey</code> пользователя <code>geoffrey</code>.
</p>
<p>Санчала предоставим права на выполнение для пользователя <code>http</code>:
</p>
<pre># setfacl -m "u:http:--x" /home/geoffrey
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Примечание:</strong> Права на исполнение для каталога позволяют процессу просматривать его содержимое.</div>
<p>Поскольку пользователь <code>http</code> теперь имеет доступ к файлам в <code>/home/geoffrey</code> то безопаснее будет удалить доступ для остальных пользователей:
</p>
<pre># chmod o-rx /home/geoffrey
</pre>
<p>Проверим изменения с помощью <code>getfacl</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getfacl /home/geoffrey</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">getfacl: Removing leading '/' from absolute path names
# file: home/geoffrey
# owner: geoffrey
# group: geoffrey
user::rwx
user:http:--x
group::r-x
mask::r-x
other::---
</pre>
<p>Как видно из вывода, <code>other</code> больше не имеют никаких прав, но пользователь <code>http</code> всё ещё может обращаться к файлам.
</p>
<p>Если необходимо будет выдать пользователю <code>http</code> права доступа на запись в определённые файлы/каталоги, выполните:
</p>
<pre># setfacl -dm "u:http:rwx" /home/geoffrey/project1/cache
</pre>
<h2>
<span id=".D0.A1.D0.BC.D0.BE.D1.82.D1.80.D0.B8.D1.82.D0.B5_.D1.82.D0.B0.D0.BA.D0.B6.D0.B5"></span><span class="mw-headline" id="Смотрите_также">Смотрите также</span>
</h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 1 getfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/getfacl.1">getfacl(1)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 1 setfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/setfacl.1">setfacl(1)</a></span></li>
<li><a rel="nofollow" class="external text" href="https://www.usenix.org/legacy/publications/library/proceedings/usenix03/tech/freenix03/full_papers/gruenbacher/gruenbacher_html/main.html">POSIX Access Control Lists on Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in-a-directory">How to set default file permissions for all folders/files in a directory?</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../ru/Category:Access_control.html" title="Category:Access control (Русский)">Access control (Русский)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Access_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)&amp;oldid=687438">https://wiki.archlinux.org/index.php?title=Access_Control_Lists_(Русский)&amp;oldid=687438</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 10 July 2021, at 07:11.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
