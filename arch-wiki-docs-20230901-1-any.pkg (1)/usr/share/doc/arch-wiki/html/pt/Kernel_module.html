<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Kernel module (Português) - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kernel_module_Português rootpage-Kernel_module_Português skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Obtendo_informações" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Obtendo_informa%C3%A7%C3%B5es">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Obtendo informações</div>
			</a>
			
			<ul id="toc-Obtendo_informações-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Carregamento_automático_de_módulos_com_systemd" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Carregamento_autom%C3%A1tico_de_m%C3%B3dulos_com_systemd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Carregamento automático de módulos com systemd</div>
			</a>
			
			<ul id="toc-Carregamento_automático_de_módulos_com_systemd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manuseio_de_módulos_de_kernel" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Manuseio_de_m%C3%B3dulos_de_kernel">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Manuseio de módulos de kernel</div>
			</a>
			
			<ul id="toc-Manuseio_de_módulos_de_kernel-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Opções_de_configuração_de_módulos" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Op%C3%A7%C3%B5es_de_configura%C3%A7%C3%A3o_de_m%C3%B3dulos">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Opções de configuração de módulos</div>
			</a>
			
				<button aria-controls="toc-Opções_de_configuração_de_módulos-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Opções de configuração de módulos subsection
				</button>
			
			<ul id="toc-Opções_de_configuração_de_módulos-sublist" class="sidebar-toc-list">
				<li id="toc-Carregá-lo_manualmente_usando_modprobe" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Carreg%C3%A1-lo_manualmente_usando_modprobe">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Carregá-lo manualmente usando modprobe</div>
			</a>
			
			<ul id="toc-Carregá-lo_manualmente_usando_modprobe-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_arquivos_em_/etc/modprobe.d/" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Usando_arquivos_em_/etc/modprobe.d/">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Usando arquivos em /etc/modprobe.d/</div>
			</a>
			
			<ul id="toc-Usando_arquivos_em_/etc/modprobe.d/-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_a_linha_de_comando_do_kernel" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Usando_a_linha_de_comando_do_kernel">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.3</span>Usando a linha de comando do kernel</div>
			</a>
			
			<ul id="toc-Usando_a_linha_de_comando_do_kernel-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Aliasing" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Aliasing">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Aliasing</div>
			</a>
			
			<ul id="toc-Aliasing-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Adicionar_um_módulo_em_uma_lista_negra_(Blacklisting)" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Adicionar_um_m%C3%B3dulo_em_uma_lista_negra_(Blacklisting)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>Adicionar um módulo em uma lista negra (Blacklisting)</div>
			</a>
			
				<button aria-controls="toc-Adicionar_um_módulo_em_uma_lista_negra_(Blacklisting)-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Adicionar um módulo em uma lista negra (Blacklisting) subsection
				</button>
			
			<ul id="toc-Adicionar_um_módulo_em_uma_lista_negra_(Blacklisting)-sublist" class="sidebar-toc-list">
				<li id="toc-Usando_arquivos_em_/etc/modprobe.d/_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Usando_arquivos_em_/etc/modprobe.d/_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.1</span>Usando arquivos em /etc/modprobe.d/</div>
			</a>
			
			<ul id="toc-Usando_arquivos_em_/etc/modprobe.d/_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usando_a_linha_de_comando_do_kernel_2" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Usando_a_linha_de_comando_do_kernel_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.2</span>Usando a linha de comando do kernel</div>
			</a>
			
			<ul id="toc-Usando_a_linha_de_comando_do_kernel_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Solução_de_problemas" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Solu%C3%A7%C3%A3o_de_problemas">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7</span>Solução de problemas</div>
			</a>
			
				<button aria-controls="toc-Solução_de_problemas-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Solução de problemas subsection
				</button>
			
			<ul id="toc-Solução_de_problemas-sublist" class="sidebar-toc-list">
				<li id="toc-Módulos_não_podem_ser_carregados" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#M%C3%B3dulos_n%C3%A3o_podem_ser_carregados">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.1</span>Módulos não podem ser carregados</div>
			</a>
			
			<ul id="toc-Módulos_não_podem_ser_carregados-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Veja_também" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Veja_tamb%C3%A9m">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8</span>Veja também</div>
			</a>
			
			<ul id="toc-Veja_também-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../pt/Kernel_module.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Kernel_module_(Portugu%C3%AAs)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">português</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../pt/Kernel_module.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Kernel_module_(Portugu%C3%AAs)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Kernel_module_(Portugu%C3%AAs)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../pt/Kernel_module.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Kernel_module_(Portugu%C3%AAs)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Kernel_module_(Portugu%C3%AAs)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../en/Kernel_module.html" title="Kernel module">Kernel module</a>. Data da última tradução: 2020-01-18. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Kernel_module&amp;diff=0&amp;oldid=595461">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Artigos relacionados</p>
<ul>
<li><a href="../pt/General_troubleshooting.html#Problemas_de_inicializa%C3%A7%C3%A3o" class="mw-redirect" title="Depuração de inicialização">Depuração de inicialização</a></li>
<li><a href="../pt/Kernel.html" title="Kernel (Português)">Kernel</a></li>
<li><a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">Parâmetros do kernel</a></li>
<li><a href="../en/Compile_kernel_module.html" title="Compile kernel module">Compile kernel module</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/Loadable_kernel_module" class="extiw" title="wikipedia:Loadable kernel module">Módulos de Kernel</a> são peças de código que podem ser carregadas e descarregadas no kernel de acordo com a demanda. Elas estendem a funcionalidade do kernel sem a necessidade de reinicialização do sistema. 
</p>
<p>Para criar um módulo de kernel, você pode ler <a rel="nofollow" class="external text" href="https://tldp.org/LDP/lkmpg/2.6/html/index.html">The Linux Kernel Module Programming Guide</a> <i>(inglês)</i>. Um módulo pode ser configurado como para executar de modo embutido ao kernel ou ser carregado separadamente. Para carregar ou remover um módulo dinamicamente, ele deve ser configurado como em um módulo carregável na configuração do kernel (a linha relacionada ao módulo exibirá a letra <code>M</code>).
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id="Obtendo_informa.C3.A7.C3.B5es"></span><span class="mw-headline" id="Obtendo_informações">Obtendo informações</span>
</h2>
<p>Módulos são gravados em <code>/usr/lib/modules/<i>versão_do_kernel</i></code>. O comando <code>uname -r</code> pode ser usado para obter a atual versão do kernel em execução.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Nomes de módulo costumam usar <i>underlines</i> (<code>_</code>) ou traços (<code>-</code>); entretanto, esses símbolos são permutáveis ao usar o comando <code>modprobe</code> e nos arquivos de configuração em <code>/etc/modprobe.d/</code>.</div>
<p>Para exibir quais módulos do kernel estão atualmente carregados:
</p>
<pre>$ lsmod
</pre>
<p>Para exibir informação sobre um módulo:
</p>
<pre>$ modinfo <i>nome_do_módulo</i>
</pre>
<p>Para listar opções que estão definidas para um módulo carregado:
</p>
<pre>$ systool -v -m <i>nome_do_módulo</i>
</pre>
<p>Para mostrar a configuração de modo mais compreensível de todos os módulos:
</p>
<pre>$ modprobe -c | less
</pre>
<p>Para exibir a configuração de um módulo em particular:
</p>
<pre>$ modprobe -c | grep <i>nome_do_módulo</i>
</pre>
<p>Listar as dependências de um módulo (ou <i>alias</i>), incluindo o módulo em si:
</p>
<pre>$ modprobe --show-depends <i>nome_do_módulo</i>
</pre>
<h2>
<span id="Carregamento_autom.C3.A1tico_de_m.C3.B3dulos_com_systemd"></span><span class="mw-headline" id="Carregamento_automático_de_módulos_com_systemd">Carregamento automático de módulos com systemd</span>
</h2>
<p>Hoje, todos os módulos necessários ao funcionamento do sistema são automaticamente gerenciados por <a href="../en/Udev.html" title="Udev">udev</a>, então se não houver necessidade de usar quaisquer módulos de kernel adicionais, não há necessidade de acrescentar módulos que deverão ser carregados na inicialização do sistema em qualquer arquivo de configuração. Entretanto, existem casos onde você pode querer adicionar um módulo extra durante o processo de inicialização do sistema, ou acrescentá-lo numa lista negra (blacklist) para que seu computador funcione adequadamente.
</p>
<p>Módulos de kernel podem ser explicitamente listados em arquivos dentro de <code>/etc/modules-load.d/</code> para que o systemd os carregue durante a inicialização do sistema. Cada arquivo de configuração é nomeado no estilo de <code>/etc/modules-load.d/&lt;programa&gt;.conf</code>. Arquivos de configuração simplesmente contém uma lista de módulos de kernel a serem carregados, separados linha a linha. Linhas vazias e linhas cujo primeiro caractere sem espaço em branco seja <code>#</code> ou <code>;</code> são ignoradas.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/virtio-net.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Carrega virtio_net.ko na inicialização
virtio_net</pre>
<p>Veja <span class="plainlinks archwiki-template-man" title="$ man 5 modules-load.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/modules-load.d.5">modules-load.d(5)</a></span> para mais detalhes.
</p>
<h2>
<span id="Manuseio_de_m.C3.B3dulos_de_kernel"></span><span class="mw-headline" id="Manuseio_de_módulos_de_kernel">Manuseio de módulos de kernel</span>
</h2>
<p>Módulos de kernel são manuseados por ferramentas fornecidas pelo pacote <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=kmod">kmod</a></span>. Você pode usar essas ferramentas manualmente.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Caso tenha atualizado seu kernel mas ainda não tenha reiniciado o sistema, <i>modprobe</i> irá falhar com ou sem mensagem de erro e irá fechar com código 1, porque o caminho <code>/usr/lib/modules/$(uname -r)/</code> não existirá mais neste cenário. Verifique manualmente se o caminho existe quando <i>modprobe</i> falhar, para determinar se este é o caso.</div>
<p>Para carregar um módulo:
</p>
<pre># modprobe <i>nome_do_módulo</i>
</pre>
<p>Para carregar um módulo pelo seu nome de arquivo (isto é, algum que não esteja instalado em <code>/usr/lib/modules/$(uname -r)/</code>):
</p>
<pre># insmod <i>nome_de_arquivo</i> [args]
</pre>
<p>Para descarregar um módulo:
</p>
<pre># modprobe -r <i>nome_do_módulo</i>
</pre>
<p>Ou alternativamente:
</p>
<pre># rmmod <i>nome_do_módulo</i>
</pre>
<h2>
<span id="Op.C3.A7.C3.B5es_de_configura.C3.A7.C3.A3o_de_m.C3.B3dulos"></span><span class="mw-headline" id="Opções_de_configuração_de_módulos">Opções de configuração de módulos</span>
</h2>
<p>Para passar um parâmetro para um módulo de kernel, você passa-o manualmente com modprobe ou assegura certos parâmetros que sempre serão aplicados usando um arquivo de configuração do modprobe, ou ainda usando a linha de comando do kernel.
</p>
<h3>
<span id="Carreg.C3.A1-lo_manualmente_usando_modprobe"></span><span class="mw-headline" id="Carregá-lo_manualmente_usando_modprobe">Carregá-lo manualmente usando modprobe</span>
</h3>
<p>A mais básica forma de passar parâmetros para um módulo é através do comando modprobe. Parâmetros são especificados em linha de comando usando simples valores <code><i>key=value</i></code>:
</p>
<pre># modprobe <i>nome_do_módulo nome_do_parâmetro=valor_do_parâmetro</i>
</pre>
<h3>
<span id="Usando_arquivos_em_.2Fetc.2Fmodprobe.d.2F"></span><span class="mw-headline" id="Usando_arquivos_em_/etc/modprobe.d/">Usando arquivos em /etc/modprobe.d/</span>
</h3>
<p>Arquivos no diretório <code>/etc/modprobe.d/</code> podem ser usados para passar configurações do módulo ao <a href="../en/Udev.html" title="Udev">udev</a>, o qual usará <code>modprobe</code> para gerenciar o carregamento de módulos durante a inicialização do sistema. Arquivos de configuração neste diretório podem ter qualquer nome, desde termine com a extensão <code>.conf</code>. A sintaxe é:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/myfilename.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options <i>nome_do_módulo nome_do_parâmetro=valor_do_parâmetro</i></pre>
<p>Por exemplo:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/thinkfan.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Em ThinkPads, a daemon 'thinkfan' permite controlar a velocidade da ventoinha
options thinkpad_acpi fan_control=1</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se qualquer dos módulos afetados estão carregados pela initramfs, então será necessário adicionar o arquivo <code>.conf</code> apropriado a <code>FILES</code> em <a href="../pt/Mkinitcpio.html" title="Mkinitcpio (Português)">mkinitcpio.conf</a> ou usar o <a href="../pt/Mkinitcpio.html#HOOKS" title="Mkinitcpio (Português)">hook</a> <code>modconf</code>, para que então ele seja incluído na initramfs. Para ver o conteúdo de uma initramfs padrão, use <code>lsinitcpio /boot/initramfs-linux.img</code>.</div>
<h3><span class="mw-headline" id="Usando_a_linha_de_comando_do_kernel">Usando a linha de comando do kernel</span></h3>
<p>Se o módulo estiver embutido dentro do kernel, você pode também passar opções ao módulo usando a linha de comando do kernel. Para todos os gerenciadores de boot comuns, a seguinte sintaxe está correta:
</p>
<pre><i>nome_do_módulo.nome_do_parâmetro=valor_do_parâmetro</i>
</pre>
<p>Por exemplo:
</p>
<pre>thinkpad_acpi.fan_control=1
</pre>
<p>Simplesmente adicione isto à linha de comando do kernel através do seu gerenciador de boot, como descrito em <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">Parâmetros do kernel</a>.
</p>
<h2><span class="mw-headline" id="Aliasing">Aliasing</span></h2>
<p><i>Aliasing</i> é atribuir apelido (alias) a um módulo de kernel. Por exemplo: <code>alias meu-mód nome_de_módulo_realmente_longo</code> significa que você pode usar <code>modprobe meu-mód</code> ao invés de <code>modprobe nome_de_módulo_realmente_longo</code>. Você pode ainda usar caracteres curingas no estilo do shell, então <code>alias meu-mód* nome_de_módulo_realmente_longo</code> significa que <code>modprobe meu-mód-alguma_coisa</code> tem o mesmo efeito. Criar um alias:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/myalias.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">alias meu-mód nome_de_módulo_realmente_longo</pre>
<p>Alguns módulos tem aliases que são automaticamente carregadas quando são necessárias por uma aplicação. Desativar estes <i>aliases</i> pode evitar que que o módulo seja carregado automaticamente, mas o mesmo ainda poderá ser carregado manualmente.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/modprobe.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Evita o carregamento automático do Bluetooth
alias net-pf-31 off</pre>
<h2>
<span id="Adicionar_um_m.C3.B3dulo_em_uma_lista_negra_.28Blacklisting.29"></span><span class="mw-headline" id="Adicionar_um_módulo_em_uma_lista_negra_(Blacklisting)">Adicionar um módulo em uma lista negra (Blacklisting)</span>
</h2>
<p>Blacklisting, no contexto de módulos de kernel, é um mecanismo de evitar que módulos de kernel sejam carregados. Isto pode ser útil se, por exemplo, o hardware associado a ele não seja usado, ou se carregar seu módulo cause problemas: por exemplo, pode haver dois módulos de kernel tentando controlar a mesma parte do hardware, e carregá-los juntos resulta em conflito.
</p>
<p>Alguns módulos são parte da <a href="../pt/Arch_boot_process.html#initramfs" class="mw-redirect" title="Processo de inicialização do Arch">initramfs</a>. <code>mkinitcpio -M</code> irá mostrar todos os módulos automaticamente detectados: para evitar que initramfs carregue alguns deste módulos, adicione-os a uma lista negra com um arquivo <i>.conf</i> dentro de <code>/etc/modprobe.d</code> e ela deverá ser adicionada pelo hook <code>modconf</code> durante a criação da imagem. Executar <code>mkinitcpio -v</code> irá listar todos os módulos puxados por diversos hooks (por exemplo, hook <code>filesystems</code>, hook <code>block</code>, etc.). Lembre de adicionar este arquivo <i>.conf</i> à matriz <code>FILES</code> em <code>/etc/mkinitcpio.conf</code>, caso você não tenha o hook <code>modconf</code> em sua matriz <code>HOOKS</code> (por exemplo, se você  não usa a configuração padrão), e uma vez que você adicionar estes módulos à lista negra, <a href="../pt/Mkinitcpio.html#Cria%C3%A7%C3%A3o_e_ativa%C3%A7%C3%A3o_de_imagem" class="mw-redirect" title="Gere novamente o initramfs">gere novamente o initramfs</a> e reinicie o sistema em seguida.
</p>
<h3>
<span id="Usando_arquivos_em_.2Fetc.2Fmodprobe.d.2F_2"></span><span class="mw-headline" id="Usando_arquivos_em_/etc/modprobe.d/_2">Usando arquivos em /etc/modprobe.d/</span>
</h3>
<p>Crie um arquivo <code>.conf</code> dentro de <code>/etc/modprobe.d/</code> e acrescente uma linha para cada módulo que desejar colocá-lo em lista negra, usando a palavra-chave <code>blacklist</code>. Se, por exemplo, desejar evitar que o módulo <code>pcspkr</code> seja carregado:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/nobeep.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Não carregar o módulo 'pcspkr' durante a inicialização.
blacklist pcspkr</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> O comando <code>blacklist</code> irá colocar em lista negra um módulo para que ele não seja carregado automaticamente, mas ainda assim ele poderá ser carregado se outro módulo (que não esteja na lista negra) depender dele ou se for carregado manualmente.
<p>Contudo, há uma solução para este comportamento; o comando <code>install</code> instrui modprobe a executar um comando personalizado ao invés de normalmente inserir o módulo no kernel, então é possível forçar o módulo a sempre falhar no seu carregamento, com:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/blacklist.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
install <i>nome_do_módulo</i> /bin/true
...</pre>
Isto irá efetivamente colocar o módulo em lista negra e qualquer outro que dependa dele.</div>
<h3><span class="mw-headline" id="Usando_a_linha_de_comando_do_kernel_2">Usando a linha de comando do kernel</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Isto pode ser muito útil caso um módulo quebrado impossibilite a inicialização do sistema.</div>
<p>Você pode também adicionar módulos à lista negra a partir do gerenciador de boot.
</p>
<p>Simplesmente adicione <code>module_blacklist=modulo1,modulo2,modulo3</code> para a linha de comando do kernel em seu gerenciador de boot, como descrito em <a href="../pt/Kernel_parameters.html" class="mw-redirect" title="Parâmetros do kernel">Parâmetros do kernel</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Ao adicionar mais do que um módulo na lista negra, perceba que eles deverão ser separados apenas por vírgulas. Espaços ou qualquer outra coisa além disso irá presumivelmente quebrar a sintaxe.</div>
<h2>
<span id="Solu.C3.A7.C3.A3o_de_problemas"></span><span class="mw-headline" id="Solução_de_problemas">Solução de problemas</span>
</h2>
<h3>
<span id="M.C3.B3dulos_n.C3.A3o_podem_ser_carregados"></span><span class="mw-headline" id="Módulos_não_podem_ser_carregados">Módulos não podem ser carregados</span>
</h3>
<p>No caso de algum módulo específico não ser carregado e o log de inicialização (acessível com <code>journalctl -b</code>) dizer que o módulo está em lista negra (blacklisted), mas o diretório <code>/etc/modprobe.d/</code> não exibir uma entrada correspondente, procure em outro diretório-fonte do modprobe <code>/usr/lib/modprobe.d/</code> por entradas de <i>blacklist</i>.
</p>
<p>Um módulo não será carregado se a <i>string</i> "vermagic" contida dentro do módulo não corresponder com o valor do kernel em execução. Se houver conhecimento de que tal módulo seja compatível com o kernel em execução, a verificação "vermagic" poderá ser ignorada com <code>modprobe --force-vermagic</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Ignorar verificações de versão poderá causar instabilidade no kernel e o sistema apresentará comportamento inesperado devido à incompatibilidade. Use <code>--force-vermagic</code> sempre com extrema cautela.</div>
<h2>
<span id="Veja_tamb.C3.A9m"></span><span class="mw-headline" id="Veja_também">Veja também</span>
</h2>
<ul>
<li><a href="../en/PC_speaker.html#Disabling_the_PC_speaker" class="mw-redirect" title="Disable PC speaker beep">Disable PC speaker beep</a></li>
<li>
<a rel="nofollow" class="external text" href="https://lwn.net/Articles/391230/">Writing a WMI driver</a> - uma introdução do LWM</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../pt/Category:Kernel.html" title="Category:Kernel (Português)">Kernel (Português)</a></li>
<li><a href="../pt/Category:Hardware_detection_and_troubleshooting.html" title="Category:Hardware detection and troubleshooting (Português)">Hardware detection and troubleshooting (Português)</a></li>
<li><a href="../pt/Category:Boot_process.html" title="Category:Boot process (Português)">Boot process (Português)</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Kernel_module_(Portugu%C3%AAs)&amp;oldid=752242">https://wiki.archlinux.org/index.php?title=Kernel_module_(Português)&amp;oldid=752242</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 11 October 2022, at 17:14.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
