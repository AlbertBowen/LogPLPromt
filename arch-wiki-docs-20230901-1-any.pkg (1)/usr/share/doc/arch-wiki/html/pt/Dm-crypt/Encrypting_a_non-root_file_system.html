<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dm-crypt (Português)/Encrypting a non-root file system (Português) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dm-crypt_Português_Encrypting_a_non-root_file_system_Português rootpage-Dm-crypt_Português skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Visão_geral" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Vis%C3%A3o_geral">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Visão geral</div>
			</a>
			
			<ul id="toc-Visão_geral-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Partição" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Parti%C3%A7%C3%A3o">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Partição</div>
			</a>
			
				<button aria-controls="toc-Partição-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Partição subsection
				</button>
			
			<ul id="toc-Partição-sublist" class="sidebar-toc-list">
				<li id="toc-Montando_e_desmontando_manualmente" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Montando_e_desmontando_manualmente">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Montando e desmontando manualmente</div>
			</a>
			
			<ul id="toc-Montando_e_desmontando_manualmente-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Desbloqueio_e_montagem_automatizados" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Desbloqueio_e_montagem_automatizados">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Desbloqueio e montagem automatizados</div>
			</a>
			
			<ul id="toc-Desbloqueio_e_montagem_automatizados-sublist" class="sidebar-toc-list">
				<li id="toc-Na_inicialização_do_sistema" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Na_inicializa%C3%A7%C3%A3o_do_sistema">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.1</span>Na inicialização do sistema</div>
			</a>
			
			<ul id="toc-Na_inicialização_do_sistema-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-No_login_do_usuário" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#No_login_do_usu%C3%A1rio">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.2</span>No login do usuário</div>
			</a>
			
			<ul id="toc-No_login_do_usuário-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Dispositivo_de_loop" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Dispositivo_de_loop">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Dispositivo de loop</div>
			</a>
			
				<button aria-controls="toc-Dispositivo_de_loop-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Dispositivo de loop subsection
				</button>
			
			<ul id="toc-Dispositivo_de_loop-sublist" class="sidebar-toc-list">
				<li id="toc-Sem_losetup" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Sem_losetup">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Sem losetup</div>
			</a>
			
			<ul id="toc-Sem_losetup-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Com_losetup" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Com_losetup">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Com losetup</div>
			</a>
			
			<ul id="toc-Com_losetup-sublist" class="sidebar-toc-list">
				<li id="toc-Montando_e_desmontando_manualmente_2" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Montando_e_desmontando_manualmente_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2.1</span>Montando e desmontando manualmente</div>
			</a>
			
			<ul id="toc-Montando_e_desmontando_manualmente_2-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../../pt/Dm-crypt/Encrypting_a_non-root_file_system.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">português</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../../pt/Dm-crypt/Encrypting_a_non-root_file_system.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../../pt/Dm-crypt/Encrypting_a_non-root_file_system.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../../pt/Dm-crypt.html" title="Dm-crypt (Português)">Dm-crypt (Português)</a></span></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../../en/Dm-crypt/Encrypting_a_non-root_file_system.html" title="Dm-crypt/Encrypting a non-root file system">Dm-crypt/Encrypting a non-root file system</a>. Data da última tradução: 2020-05-25. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dm-crypt/Encrypting_a_non-root_file_system&amp;diff=0&amp;oldid=613536">alterações</a> na versão em inglês.</div>
<p>Os seguintes exemplos são para criptografar um sistema de arquivos secundário, não raiz, com dm-crypt.
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id="Vis.C3.A3o_geral"></span><span class="mw-headline" id="Visão_geral">Visão geral</span>
</h2>
<p>Criptografar um sistema de arquivos secundário normalmente protege somente dados sensíveis, enquanto deixa o sistema operacional e programas sem encriptação. Isto é somente útil para dispositivos removíveis, como um USB, para então este ser usado em outros computadores com segurança. Também, é possível criptografar conjuntos separados de dados de acordo com quem possui acesso.
</p>
<p>Devido ao dm-crypt ser uma camada de encriptação a <a href="../../pt/Data-at-rest_encryption.html#Encripta%C3%A7%C3%A3o_de_dispositivo_de_bloco" class="mw-redirect" title="Criptografia de dados em repouso">nível de blocos</a>, ele somente criptografa os dispositivos, <a href="#Parti%C3%A7%C3%A3o">partições</a> e <a href="#Dispositivo_de_loop">dispositivos de loop</a>. Para criptografar arquivos indíviduais é necessário uma camada de encriptação a nível de sistema de arquivos, como <a href="../../en/ECryptfs.html" title="ECryptfs">eCryptfs</a> or <a href="../../en/EncFS.html" title="EncFS">EncFS</a>. Veja <a href="../../pt/Data-at-rest_encryption.html" class="mw-redirect" title="Criptografia de dados em repouso">Criptografia de dados em repouso</a> para informações gerais sobre como proteger dados privados.
</p>
<h2>
<span id="Parti.C3.A7.C3.A3o"></span><span class="mw-headline" id="Partição">Partição</span>
</h2>
<p>Este exemplo detalha a encriptação da partição <code>/home</code>, mas pode ser aplicado para qualquer outra partição similar, não raiz, que contém dados do usuário.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Você pode ter o diretório <code>/home</code>, em uma partição, único para um usuário, ou criar uma partição <code>/home</code> compartilhada para todos os diretórios dos usuários.</div>
<p>Primeiro tenha certeza que a partição está vazia (sem sistema de arquivos). Delete a partição e crie uma nova se ela possui um sistema de arquivos. Então apague com segurança, veja <a href="../../pt/Dm-crypt/Drive_preparation.html#Apagando_o_disco_com_seguran%C3%A7a" class="mw-redirect" title="Dm-crypt/Preparando a unidade de armazenamento">apagando o disco com segurança</a>. 
</p>
<p>Crie a partição que vai conter o container criptografado.
</p>
<p>Então configure o cabeçalho LUKS com:
</p>
<pre># cryptsetup <i>opções</i> luksFormat <i>dispositivo</i>
</pre>
<p>Mude <code><i>dispositivo</i></code> para a nova partição. Veja <a href="../../pt/Dm-crypt/Device_encryption.html#Op%C3%A7%C3%B5es_de_encripta%C3%A7%C3%A3o_para_o_modo_LUKS" class="mw-redirect" title="Dm-crypt/Encriptação de dispositivo">Opções de encriptação para o modo LUKS</a> para detalhes tais como as <code><i>opções</i></code> disponíveis.
</p>
<p>Para acessar a partição criptografada, desbloqueie ela com o mapeador de dispositivos, usando:
</p>
<pre># cryptsetup open <i>dispositivo</i> <i>nome</i>
</pre>
<p>Depois de desbloquear a partição, ela estará disponível em <code>/dev/mapper/<i>nome</i></code>. Agora crie um <a href="../../pt/File_systems.html" class="mw-redirect" title="Sistema de arquivos">sistema de arquivos</a> de sua escolha com:
</p>
<pre># mkfs.<i>tipo_do_sistema_de_arquivos</i> /dev/mapper/<i>nome</i>
</pre>
<p>Monte o sistema de arquivos em <code>/home</code>, ou se deve ser somente acessível a um usuário em <code>/home/<i>nome do usuário</i></code>, veja <a href="#Montando_e_desmontando_manualmente">#Montando e desmontando manualmente</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Desmonte e monte uma vez para verificar se o mapeamento está funcionando como desejado.</div>
<h3><span class="mw-headline" id="Montando_e_desmontando_manualmente">Montando e desmontando manualmente</span></h3>
<p>Para montar a partição:
</p>
<pre># cryptsetup open <i>dispositivo</i> <i>nome</i>
# mount -t <i>tipo_do_sistema_de_arquivos</i> /dev/mapper/<i>nome</i> /mnt/home
</pre>
<p>Para desmontar:
</p>
<pre># umount /mnt/home
# cryptsetup close <i>nome</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> <a href="../../en/File_manager_functionality.html#Mounting" class="mw-redirect" title="GVFS">GVFS</a> tambem pode montar partições criptografadas. Você pode usar um gerenciador de arquivos com suporte ao gvfs (exemplo <a href="../../en/Thunar.html" title="Thunar">Thunar</a>) para montar a partição, e a caixa de diálogo pedindo a senha aparecerá. Para outros desktops, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/zulucrypt/">zulucrypt</a></span><sup><small>AUR</small></sup> também oferece uma GUI.</div>
<h3><span class="mw-headline" id="Desbloqueio_e_montagem_automatizados">Desbloqueio e montagem automatizados</span></h3>
<p>Existem três diferentes soluções para automaticamente desbloquear a partição e montar seu sistema de arquivos.
</p>
<h4>
<span id="Na_inicializa.C3.A7.C3.A3o_do_sistema"></span><span class="mw-headline" id="Na_inicialização_do_sistema">Na inicialização do sistema</span>
</h4>
<p>Usando o arquivo de configuração <code>/etc/crypttab</code>, o desbloqueio ocorre no momento de inicialização fazendo uso do parsing automático do systemd. Esta é a solução recomendada se você deseja usar uma partição home comum para os diretórios de todos os usuários ou automaticamente montar outro dispositivo de bloco encriptado. 
</p>
<p>Veja <a href="../../pt/Dm-crypt/System_configuration.html#crypttab" class="mw-redirect" title="Dm-crypt/Configuração do sistema">Dm-crypt/Configuração do sistema#crypttab</a> para referências e <a href="../../pt/Dm-crypt/System_configuration.html#Montando_na_inicializa%C3%A7%C3%A3o" class="mw-redirect" title="Dm-crypt/Configuração do sistema">Montando na inicialização do sistema</a> para um exemplo prático.
</p>
<h4>
<span id="No_login_do_usu.C3.A1rio"></span><span class="mw-headline" id="No_login_do_usuário">No login do usuário</span>
</h4>
<p>Usando <i>pam_exec</i> é possível desbloquear (<i>cryptsetup open</i>) a partição no login do usuário: esta é a solução recomendada se deseja um diretório home de somente um usuário em uma partição. Veja <a href="../../en/Dm-crypt/Mounting_at_login.html" title="Dm-crypt/Mounting at login">dm-crypt/Montagem no login</a>.
</p>
<p>O desbloqueio no login do usuário também é possível com <a href="../../en/Pam_mount.html" title="Pam mount">pam_mount</a>.
</p>
<h2><span class="mw-headline" id="Dispositivo_de_loop">Dispositivo de loop</span></h2>
<p>Existem dois métodos para usar um dispositivo de loop como um container criptografado, um usando <code>losetup</code> diretamente e outro não.
</p>
<h3><span class="mw-headline" id="Sem_losetup">Sem losetup</span></h3>
<p>Usar diretamente o losetup pode ser evitado completamente ao fazer o seguinte<a rel="nofollow" class="external autonumber" href="https://wiki.gentoo.org/wiki/Custom_Initramfs#Encrypted_keyfile">[1]</a>:
</p>
<pre>$ dd if=/dev/urandom of=grande_segredo.img bs=100M count=1 iflag=fullblock
$ cryptsetup luksFormat grande_segredo.img
</pre>
<p>Neste caso <i>cryptsetup</i> vai encontrar um dispositivo de loop livre, adicionar o arquivo para ele, e também desanexá-lo quando <code>cryptsetup close</code> for invocado.
</p>
<p>Tenha certeza de não omitir a opção <code>iflag=fullblock</code>, de outro modo <i>dd</i> pode retornar uma leitura parcial. Veja <a href="../../pt/Dd.html#Leitura_parcial" title="Dd (Português)">dd#Leitura parcial</a> para detalhes.
</p>
<p>Antes de executar <code>cryptsetup</code>, veja <a href="../../pt/Dm-crypt/Device_encryption.html#Op%C3%A7%C3%B5es_de_encripta%C3%A7%C3%A3o_para_o_modo_LUKS" class="mw-redirect" title="Dm-crypt/Encriptação de dispositivo">Opções de encriptação para o modo LUKS</a> e <a href="../../pt/Data-at-rest_encryption.html#Cifras_e_modos_de_opera%C3%A7%C3%A3o" class="mw-redirect" title="Criptografia de dados em repouso">cifras criptográficas e modos de operação</a> primeiro para selecionar configurações adicionais do seu interesse.
</p>
<p>As instruções para abrir o dispositivo e criar o <a href="../../pt/File_systems.html" class="mw-redirect" title="Sistema de arquivos">sistema de arquivos</a> são do mesmo jeito que em <a href="#Parti%C3%A7%C3%A3o">#Partição</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se criar um arquivo menor que o cabeçalho do LUKS (16 MiB) vai receber um erro <code>Requested offset is beyond real size of device grande_segredo.img</code> quando tentar abrir o dispositivo.</div>
<p>O procedimento de montagem e desmontagem manual é igual a <a href="#Montando_e_desmontando_manualmente">#Montando e desmontando manualmente</a>.
</p>
<h3><span class="mw-headline" id="Com_losetup">Com losetup</span></h3>
<p>Um dispositivo de loop permite mapear um dispositivo de bloco para um arquivo com a ferramenta padrão do util-linux <code>losetup</code>. O arquivo pode então conter um sistema de arquivos, que pode ser usado como qualquer outro. Vários usuários conhecem <a href="../../en/VeraCrypt.html" class="mw-redirect" title="TrueCrypt">TrueCrypt</a> como uma ferramenta para criar containers criptografados. É possível conseguir essa mesma funcionalidade com um sistema de arquivos de looback criptografado com LUKS, como é mostrado no exemplo a seguir.
</p>
<p>Primeiro, crie um container criptografado com <a href="../../pt/Dd.html" title="Dd (Português)">dd</a>, usando um <a href="../../en/Random_number_generation.html" class="mw-redirect" title="Random number generator">gerador de números aleatórios</a> apropriado:
</p>
<pre># dd if=/dev/urandom of=grande_segredo.img bs=100M count=1 iflag=fullblock
</pre>
<p>O arquivo <code>grande_segredo.img</code> vai ser criado com o tamanho de 100 mebibytes.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Evite <a href="../../pt/Dm-crypt/Device_encryption.html#Sistema_de_arquivos_de_loopback" class="mw-redirect" title="Dm-crypt/Encriptação de dispositivo">redimensionar</a> o container, crie ele maior do que a soma do tamanho de todos os arquivos que serão criptografados, de modo que consiga hospedar a metadata associada utilizada pelo sistema de arquivos interno. Se pretende usar o modo LUKS, o cabeçalho de metadata dele sozinho vai ocupar mais de 16 mebibytes.</div>
<p>Depois, crie um dispositivo de nó, agora podemos montar/usar nosso container:
</p>
<pre># losetup /dev/loop0 grande_segredo.img
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Se você receber um erro <code>/dev/loop0: No such file or directory</code>, você precisa carregar o módulo do kernel <code>modprobe loop</code> comoo superusuário. Nestes dias (kernel 3.2) dispositivos de loop são criados em demanda. Solicite um novo com <code>losetup -f</code> como superusuário.</div>
<p>A partir de agora, o procedimento é o mesmo que o especificado em <a href="#Parti%C3%A7%C3%A3o">#Partição</a>, exceto pelo fato que o container já está com dados aleatórios e não será necessário apagar com segurança.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> Containers com <i>dm-crypt</i> podem ser muito flexíveis. Veja as funcionalidades e documentação de <a href="../../en/Tomb.html" title="Tomb">Tomb</a>. Ele oferece um script para um manuseio rápido e flexível do <i>dm-crypt</i>.</div>
<h4><span class="mw-headline" id="Montando_e_desmontando_manualmente_2">Montando e desmontando manualmente</span></h4>
<p>Para desmontar o container:
</p>
<pre># umount /mnt/segredo
# cryptsetup close segredo
# losetup -d /dev/loop0
</pre>
<p>Para montar o container novamente:
</p>
<pre># losetup /dev/loop0 grande_segredo.img
# cryptsetup open /dev/loop0 segredo
# mount -t ext4 /dev/mapper/segredo /mnt/segredo
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../pt/Category:Data-at-rest_encryption.html" title="Category:Data-at-rest encryption (Português)">Data-at-rest encryption (Português)</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Encrypting_a_non-root_file_system_(Portugu%C3%AAs)&amp;oldid=758354">https://wiki.archlinux.org/index.php?title=Dm-crypt_(Português)/Encrypting_a_non-root_file_system_(Português)&amp;oldid=758354</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 November 2022, at 07:05.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
