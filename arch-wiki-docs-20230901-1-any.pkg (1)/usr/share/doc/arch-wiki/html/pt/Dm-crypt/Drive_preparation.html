<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>dm-crypt (Português)/Drive preparation (Português) - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dm-crypt_Português_Drive_preparation_Português rootpage-Dm-crypt_Português skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Apagando_o_disco_com_segurança" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Apagando_o_disco_com_seguran%C3%A7a">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Apagando o disco com segurança</div>
			</a>
			
				<button aria-controls="toc-Apagando_o_disco_com_segurança-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Apagando o disco com segurança subsection
				</button>
			
			<ul id="toc-Apagando_o_disco_com_segurança-sublist" class="sidebar-toc-list">
				<li id="toc-Métodos_genéricos" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#M%C3%A9todos_gen%C3%A9ricos">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Métodos genéricos</div>
			</a>
			
			<ul id="toc-Métodos_genéricos-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Métodos_específicos_do_dm-crypt" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#M%C3%A9todos_espec%C3%ADficos_do_dm-crypt">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>Métodos específicos do dm-crypt</div>
			</a>
			
			<ul id="toc-Métodos_específicos_do_dm-crypt-sublist" class="sidebar-toc-list">
				<li id="toc-dm-crypt_limpa_o_disco_vazio_ou_partição" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#dm-crypt_limpa_o_disco_vazio_ou_parti%C3%A7%C3%A3o">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2.1</span>dm-crypt limpa o disco vazio ou partição</div>
			</a>
			
			<ul id="toc-dm-crypt_limpa_o_disco_vazio_ou_partição-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Apagando_o_espaço_livre_depois_da_instalação_com_dm-crypt" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Apagando_o_espa%C3%A7o_livre_depois_da_instala%C3%A7%C3%A3o_com_dm-crypt">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2.2</span>Apagando o espaço livre depois da instalação com dm-crypt</div>
			</a>
			
			<ul id="toc-Apagando_o_espaço_livre_depois_da_instalação_com_dm-crypt-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Limpar_espaço_livre_com_dm-crypt_depois_da_instalação_(por_meio_da_re-encriptação)" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Limpar_espa%C3%A7o_livre_com_dm-crypt_depois_da_instala%C3%A7%C3%A3o_(por_meio_da_re-encripta%C3%A7%C3%A3o)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2.3</span>Limpar espaço livre com dm-crypt depois da instalação (por meio da re-encriptação)</div>
			</a>
			
			<ul id="toc-Limpar_espaço_livre_com_dm-crypt_depois_da_instalação_(por_meio_da_re-encriptação)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Apagar_o_cabeçalho_do_LUKS" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Apagar_o_cabe%C3%A7alho_do_LUKS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.3</span>Apagar o cabeçalho do LUKS</div>
			</a>
			
			<ul id="toc-Apagar_o_cabeçalho_do_LUKS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Particionamento" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Particionamento">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Particionamento</div>
			</a>
			
				<button aria-controls="toc-Particionamento-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Particionamento subsection
				</button>
			
			<ul id="toc-Particionamento-sublist" class="sidebar-toc-list">
				<li id="toc-Partições_físicas" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Parti%C3%A7%C3%B5es_f%C3%ADsicas">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Partições físicas</div>
			</a>
			
			<ul id="toc-Partições_físicas-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Dispositivos_de_blocos_empilhados" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Dispositivos_de_blocos_empilhados">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Dispositivos de blocos empilhados</div>
			</a>
			
			<ul id="toc-Dispositivos_de_blocos_empilhados-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Subvolumes_do_btrfs" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Subvolumes_do_btrfs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Subvolumes do btrfs</div>
			</a>
			
			<ul id="toc-Subvolumes_do_btrfs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Partição_de_boot_(GRUB)" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Parti%C3%A7%C3%A3o_de_boot_(GRUB)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>Partição de boot (GRUB)</div>
			</a>
			
			<ul id="toc-Partição_de_boot_(GRUB)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../../pt/Dm-crypt/Drive_preparation.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">português</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../../pt/Dm-crypt/Drive_preparation.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../../pt/Dm-crypt/Drive_preparation.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../../pt/Dm-crypt.html" title="Dm-crypt (Português)">Dm-crypt (Português)</a></span></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="pt" dir="ltr">
<div class="mw-parser-output">
<p><span>
</span>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Status de tradução:</strong> Esse artigo é uma tradução de <a href="../../en/Dm-crypt/Drive_preparation.html" title="Dm-crypt/Drive preparation">Dm-crypt/Drive preparation</a>. Data da última tradução: 2021-02-15. Você pode ajudar a sincronizar a tradução, se houver <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/index.php?title=Dm-crypt/Drive_preparation&amp;diff=0&amp;oldid=645868">alterações</a> na versão em inglês.</div>
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Artigos relacionados</p>
<ul>
<li><a href="../../pt/Data-at-rest_encryption.html#Preparando_o_disco" class="mw-redirect" title="Criptografia de dados em repouso">Criptografia de dados em repouso#Preparando o disco</a></li>
<li><a href="../../en/Securely_wipe_disk.html" title="Securely wipe disk">Securely wipe disk</a></li>
</ul>
</div>
<p>Antes de criptografar uma unidade de armazenamento, é recomendado apaga-la com segurança, a sobrescrevendo com dados aleatórios. Isto é realizado para prevenir ataques criptográficos ou indesejada <a href="../../en/File_recovery.html" title="File recovery">recuperação de arquivos</a>, estes dados não são disceníveis dos dados depois de escritos pelo dm-crypt. Para uma compreensiva discursão veja <a href="../../pt/Data-at-rest_encryption.html#Preparando_o_disco" class="mw-redirect" title="Criptografia de dados em repouso">Criptografia de dados em repouso#Preparando o disco</a>.
</p>
<mw:tocplace></mw:tocplace>
<h2>
<span id="Apagando_o_disco_com_seguran.C3.A7a"></span><span class="mw-headline" id="Apagando_o_disco_com_segurança">Apagando o disco com segurança</span>
</h2>
<p>Quando estiver decidindo qual método usar para apagar o disco com segurança, se lembre que só precisa executar somente uma vez enquanto o disco está criptografado.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Faça o backup de dados importantes antes de começar!</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Nota:</strong> Quando estiver apagando uma grande quantidade de dados, o processo pode demorar algumas horas ou dias para terminar.</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>Este processo pode demorar mais de um dia para terminar em disco com vários terabyte. Para usar a máquina durante a operação, pode ser desejado usar um sistema já instalado em outro disco, ao invés do sistema live de instalação do Arch.</li>
<li>Para <a href="../../en/Solid_state_drive.html" class="mw-redirect" title="SSD">SSDs</a>, como um esforço de minimizar artefatos de cache da <a href="../../en/Securely_wipe_disk.html#Flash_memory" title="Securely wipe disk">memória flash</a>, considere fazer <i>prioritariamente</i> <a href="../../en/Solid_state_drive/Memory_cell_clearing.html" class="mw-redirect" title="SSD memory cell clearing">limpa de células de memória do SSD</a> do que as instruções abaixo.</li>
</ul>
</div>
<h3>
<span id="M.C3.A9todos_gen.C3.A9ricos"></span><span class="mw-headline" id="Métodos_genéricos">Métodos genéricos</span>
</h3>
<p>Para instruções detalhadas de como apagar e preparar o disco consulte <a href="../../en/Securely_wipe_disk.html" title="Securely wipe disk">Limpar o disco com segurança</a>.
</p>
<h3>
<span id="M.C3.A9todos_espec.C3.ADficos_do_dm-crypt"></span><span class="mw-headline" id="Métodos_específicos_do_dm-crypt">Métodos específicos do dm-crypt</span>
</h3>
<p>Os três métodos a seguir são específicos do dm-crypt e são mencionados porque eles são muito rápidos e também podem ser executados depois que uma partição for configurada.
</p>
<p>O <a rel="nofollow" class="external text" href="https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions#2-setup">FAQ do cryptsetup</a> (item 2.19 "<i>How can I wipe a device with crypto-grade randomness?</i>") menciona um procedimento muito simples para usar um dm-crypt-volume existente para apagar todo o espaço não usado no dispositivo de bloco com dados aleatórios, com este agindo como um simples gerador de números. Também clama proteger contra a divulgação de padrões de uso. Por causa disso os dados criptografados são praticamente não disceníveis dos aleatórios.
</p>
<h4>
<span id="dm-crypt_limpa_o_disco_vazio_ou_parti.C3.A7.C3.A3o"></span><span class="mw-headline" id="dm-crypt_limpa_o_disco_vazio_ou_partição">dm-crypt limpa o disco vazio ou partição</span>
</h4>
<p>Primeiro, crie um container criptografado temporário na partição (usando a forma <code>sdXY</code>) ou disco (usando a forma <code>sdX</code>) a ser criptografado:
</p>
<pre># cryptsetup open --type plain -d /dev/urandom /dev/<i>dispositivo_de_bloco</i> a_ser_apagado
</pre>
<p>Você pode verificar se ela existe:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lsblk</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NAME             MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
sda                8:0    0  1.8T  0 disk
└─a_ser_apagado  252:0    0  1.8T  0 crypt
</pre>
<p>Apague o container com zeros. O uso do <code>if=/dev/urandom</code> não é necessário, já que a cifra criptografada é usada para aleatoriedade.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dd if=/dev/zero of=/dev/mapper/a_ser_apagado status=progress</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dd: writing to ‘/dev/mapper/a_ser_apagado’: No space left on device</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Dica:</strong> 
<ul>
<li>
<i>dd</i> com a opção <code>bs=</code>, exemplo <code>bs=1M</code>, é frequentemente usado para aumentar a taxa de transferência da operação.</li>
<li>Para checar a operação, zere a partição antes de limpar o container. Depois o comando para apagar <code>blockdev --getsize64 <i>/dev/mapper/&lt;container&gt;</i></code> pode ser usado para adquirir o tamanho exato do container como root. Agora <i>od</i> pode ser usado para verificar se os setores zerados foram sobrescrevido, exemplo <code>od -j <i>containersize - blocksize</i></code> para visualizar a limpeza concluída até o final.</li>
</ul>
</div>
<p>Finalmente feche o container temporário:
</p>
<pre># cryptsetup close a_ser_apagado
</pre>
<p>Quando criptografar o sistema todo, o próximo passo é <a href="#Particionamento">#Particionamento</a>. Se está somente criptografando uma partição, continue em <a href="../../pt/Dm-crypt/Encrypting_a_non-root_file_system.html#Parti%C3%A7%C3%A3o" class="mw-redirect" title="Dm-crypt/Criptografando um sistema de arquivos não raiz">dm-crypt/Criptografando um sistema de arquivos não raiz#Partição</a>.
</p>
<h4>
<span id="Apagando_o_espa.C3.A7o_livre_depois_da_instala.C3.A7.C3.A3o_com_dm-crypt"></span><span class="mw-headline" id="Apagando_o_espaço_livre_depois_da_instalação_com_dm-crypt">Apagando o espaço livre depois da instalação com dm-crypt</span>
</h4>
<p>Usuários que não têm tempo para apagar com segurança antes da <a href="../../pt/Dm-crypt/Encrypting_an_entire_system.html" class="mw-redirect" title="Dm-crypt/Criptografando todo um sistema">instalação</a>, podem conseguir um efeito similar uma vez que o sistema criptografado está ligado e montado. No entanto, considere que o sistema de arquivos pode ter reservado espaço, por exemplo para, o usuário root ou outro mecanismo de <a href="../../en/Disk_quota.html" title="Disk quota">cota de disco</a>, que podem limitar esse procedimento mesmo quando feito com o usuário root: Algumas partes do disco podem não ser sobrescritas de forma alguma.
</p>
<p>Para fazer isso, dentro de um container criptografado, crie um arquivo temporário com todo o espaço livre da partição :
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dd if=/dev/zero of=/arquivo/no/container status=progress</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">dd: writing to ‘/arquivo/no/container ’: No space left on device</pre>
<p>Sincronize o cache de disco e então delete esse arquivo para recuperar o espaço anteriormente usado.
</p>
<pre># sync
# rm /arquivo/no/container
</pre>
<p>Isto deve ser repetido para todas as partições criadas e que possuem sistema de arquivos. Por exemplo, ao optar por <a href="../../pt/Dm-crypt/Encrypting_an_entire_system.html#LVM_dentro_do_LUKS" class="mw-redirect" title="Dm-crypt/Criptografando todo um sistema">LVM dentro do LUKS</a>, esse procedimento tem que ser feito em todos os volumes lógicos.
</p>
<h4>
<span id="Limpar_espa.C3.A7o_livre_com_dm-crypt_depois_da_instala.C3.A7.C3.A3o_.28por_meio_da_re-encripta.C3.A7.C3.A3o.29"></span><span class="mw-headline" id="Limpar_espaço_livre_com_dm-crypt_depois_da_instalação_(por_meio_da_re-encriptação)">Limpar espaço livre com dm-crypt depois da instalação (por meio da re-encriptação)</span>
</h4>
<p>Alternativamente, para usuários que querem limpar completamente o espaço livre sem reinstalar, isto pode ser feito ao <a href="../../pt/Dm-crypt/Device_encryption.html#Criptografando_dispositivos_novamente" class="mw-redirect" title="Dm-crypt/Encriptação de dispositivo">criptografar novamente dispositivos LUKS</a>. Isto precisa ser executado uma vez por dispositivo LUKS. Mas note que este processo pode ser lento (por exemplo, ~50MB/s em um HDD).
</p>
<h3>
<span id="Apagar_o_cabe.C3.A7alho_do_LUKS"></span><span class="mw-headline" id="Apagar_o_cabeçalho_do_LUKS">Apagar o cabeçalho do LUKS</span>
</h3>
<p>Uma partição usando LUKS consiste de duas partes: o cabeçalho e os dados criptografados. O cabeçalho contém chaves, sem elas é praticamente impossível recuperar os dados. Se criar uma nova partição ou decomissionar o disco, <i>pode</i> ser o suficiente para remover o cabeçalho ao invés de apagar todo o dispositivo. Para observações veja a nota no fim desta seção.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Atenção:</strong> Esta operação é irreversível e não irá pedir por confirmação, tenha cuidado.</div>
<p>Para apagar todas as chaves use o seguinte comando:
</p>
<pre># cryptsetup erase <i>dispositivo</i>
</pre>
<p>Verifique se não tem nenhum slot ativo executando:
</p>
<pre> # cryptsetup luksDump <i>dispositivo</i>
</pre>
<p>Adicionalmente o cabeçalho LUKS pode ser removido para prevenir o <code>cryptsetup</code> de detectá-lo no futuro, execute <a href="../../en/Device_file.html#wipefs" class="mw-redirect" title="Wipefs">wipefs</a> depois das chaves serem removidas:
</p>
<pre># wipefs -a <i>dispositivo</i>
</pre>
<p>Os dados criptografados permanecem no seu lugar e sua proteção é tão boa quanto a encriptação usada. Em 2020 não há método prático de acessá-los, mas isso pode mudar no futuro. Depende do usuário balancear a segurança e privacidade com o tempo necessário para executar uma limpeza apropriada de todo o disco.
</p>
<p>Em alguns dispositivos de armazenamento, em particular os baseados em flash, pode ser impossível sobrescrever de forma confiável os dados. O cabeçalho LUKS com as chaves pode ser armazenado em um local inacessível para o sistema operacional. Se isto é uma preocupação, use <a href="../../en/Securely_wipe_disk.html#hdparm" class="mw-redirect" title="Securely Wipe HDD">ATA Secure Erase</a>. Esta operação supostamente apaga todos os blocos no dispositivo, incluindo os que não são visíveis ao software. Veja <a rel="nofollow" class="external text" href="https://gitlab.com/cryptsetup/cryptsetup/wikis/FrequentlyAskedQuestions#5-security-aspects">cryptsetup FAQ 5.19</a> para detalhes.
</p>
<h2><span class="mw-headline" id="Particionamento">Particionamento</span></h2>
<p>Esta seção somente se aplica a um sistema criptografado. Depois que o disco foi sobrescrito com segurança, um particionamento apropriado tem que ser escolhido, levando em conta os requisitos do dm-crypt e efeitos que as várias escolhas terão na manutenção do sistema resultante.
</p>
<p>É importante notar que em <a href="#Parti%C3%A7%C3%A3o_de_boot_(GRUB)">quase</a> todo caso é necessário uma partição separada para <code>/boot</code> que deve se manter não criptografada, porquê o gerenciador de boot precisa acessar o diretório}} para carregar o initramfs/módulos de encriptação necessários para o resto do sistema (veja <a href="../../pt/Mkinitcpio.html" title="Mkinitcpio (Português)">mkinitcpio</a> para detalhes). Se preocupado com a segurança, veja  <a href="../../en/Dm-crypt/Specialties.html#Protegendo_a_parti%C3%A7%C3%A3o_de_boot_n%C3%A3o_criptografada" class="mw-redirect" title="Dm-crypt/Especificidades">dm-crypt/Especificidades#Protegendo a partição de boot não criptografada</a><sup>[<a href="../../pt/Help:Procedures.html#Corrigir_links_quebrados_de_se%C3%A7%C3%B5es" class="mw-redirect" title="Help:Procedimentos">link quebrado</a>: seção inválida]</sup>.
</p>
<p>Outro fator importante a se levar em conta é como o swap e o sistema de suspensão serão tratados, veja <a href="../../pt/Dm-crypt/Swap_encryption.html" class="mw-redirect" title="Dm-crypt/Swap criptografada">dm-crypt/Swap criptografada</a>.
</p>
<h3>
<span id="Parti.C3.A7.C3.B5es_f.C3.ADsicas"></span><span class="mw-headline" id="Partições_físicas">Partições físicas</span>
</h3>
<p>No caso mais simples, as camadas criptografadas podem ser diretamente colocadas em partições físicas; veja <a href="../../pt/Partitioning.html" class="mw-redirect" title="Particionamento">Particionamento</a> para métodos de como criá-las. Assim como em um sistema não criptografado, a partição root é suficiente, exceto outra para <code>/boot</code>, como falado acima. Este método permite decidir quais partições criptografar e quais não, e funciona do mesmo jeito não importando a quantidade de discos envolvidos. Também é possível adicionar ou remover partições no futuro, mas redimensionar vai ficar limitado ao tamanho do disco utilizado. Finalmente, note que senhas separadas ou chaves são necessárias para abrir cada partição criptografada, apesar que isto pode ser automatizado durante a inicialização usando o arquivo <code>crypttab</code>, veja <a href="../../pt/Dm-crypt/System_configuration.html#crypttab" class="mw-redirect" title="Dm-crypt/Configuração do sistema">Dm-crypt/Configuração do sistema#crypttab</a>.
</p>
<h3><span class="mw-headline" id="Dispositivos_de_blocos_empilhados">Dispositivos de blocos empilhados</span></h3>
<p>Se mais flexibilidade é necessária, dm-crypt pode coexistir com outros dispositivos de blocos empilhadores como <a href="../../pt/LVM.html" title="LVM (Português)">LVM</a> e <a href="../../en/RAID.html" title="RAID">RAID</a>. Os containers criptografados podem residir abaixo ou em cima de outros:
</p>
<ul>
<li>Se os dispositivos LVM/RAID são criados em cima da camada criptografada, será possível adicionar, remover ou redimensionar os sistemas de arquivos da mesma partição criptografada deliberadamente, e somente uma chave ou senha será necessária para todos. Desde que a camada criptografada reside na partição física não será possível se aproveitar da habilidade do LVM e RAID para expandir para múltiplos discos.</li>
<li>Se a camada criptografada é criada em cima do LVM/RAID, ainda será possível reorganizar os sistemas de arquivos no futuro, mas com a complexidade adicionada, as camadas criptografadas terão que ser adaptadas de acordo. adicionalmente, senhas e chaves separadas serão necessárias para abrir cada dispositivo criptografado. Esta, no entanto, é a única escolha para sistemas que precisam criptografar sistemas de arquivos para múltiplos discos.</li>
</ul>
<h3><span class="mw-headline" id="Subvolumes_do_btrfs">Subvolumes do btrfs</span></h3>
<p><a href="../../en/Btrfs.html" title="Btrfs">Btrfs</a> tem uma <a href="../../en/Btrfs.html#Subvolumes" title="Btrfs">funcionalidade de subvolumes</a> que podem ser usados com dm-crypt, tirando a necessidade de usar LVM se nenhum outro sistema de arquivos for usado. No entanto, note que arquivos swap não são <a rel="nofollow" class="external text" href="https://btrfs.wiki.kernel.org/index.php/FAQ#Does_btrfs_support_swap_files.3F">suportados</a> pelo brtrfs antes do  Linux 5.0, então uma partição <a href="../../pt/Dm-crypt/Swap_encryption.html" class="mw-redirect" title="Swap criptografada">swap criptografada</a> necessária se quer usar <a href="../../pt/Swap.html" title="Swap (Português)">swap</a> no Linux &lt;5.0 (exemplo <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-lts">linux-lts</a></span>). Veja também <a href="../../pt/Dm-crypt/Encrypting_an_entire_system.html#Subvolumes_do_Btrfs_com_swap" class="mw-redirect" title="Dm-crypt/Criptografando todo um sistema">dm-crypt/Criptografando todo um sistema#Subvolumes do Btrfs com swap</a>.
</p>
<h3>
<span id="Parti.C3.A7.C3.A3o_de_boot_.28GRUB.29"></span><span class="mw-headline" id="Partição_de_boot_(GRUB)">Partição de boot (GRUB)</span>
</h3>
<p>Veja  <a href="../../pt/Dm-crypt/Encrypting_an_entire_system.html#Parti%C3%A7%C3%A3o_de_boot_criptografada_(GRUB)" class="mw-redirect" title="Dm-crypt/Criptografando todo um sistema">dm-crypt/Criptografando todo um sistema#Partição de boot criptografada (GRUB)</a>.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../pt/Category:Data-at-rest_encryption.html" title="Category:Data-at-rest encryption (Português)">Data-at-rest encryption (Português)</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../../en/Category:Pages_with_broken_section_links.html" title="Category:Pages with broken section links">Pages with broken section links</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Dm-crypt_(Portugu%C3%AAs)/Drive_preparation_(Portugu%C3%AAs)&amp;oldid=758353">https://wiki.archlinux.org/index.php?title=Dm-crypt_(Português)/Drive_preparation_(Português)&amp;oldid=758353</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 29 November 2022, at 07:05.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
