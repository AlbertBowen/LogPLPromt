<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network UPS Tools - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_UPS_Tools rootpage-Network_UPS_Tools skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Configuration</div>
			</a>
			
				<button aria-controls="toc-Configuration-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Configuration subsection
				</button>
			
			<ul id="toc-Configuration-sublist" class="sidebar-toc-list">
				<li id="toc-Driver_configuration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Driver_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Driver configuration</div>
			</a>
			
			<ul id="toc-Driver_configuration-sublist" class="sidebar-toc-list">
				<li id="toc-Can't_claim_USB_device_error" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Can't_claim_USB_device_error">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1.1</span>Can't claim USB device error</div>
			</a>
			
			<ul id="toc-Can't_claim_USB_device_error-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-upsd_configuration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#upsd_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>upsd configuration</div>
			</a>
			
			<ul id="toc-upsd_configuration-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-upsmon_configuration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#upsmon_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>upsmon configuration</div>
			</a>
			
			<ul id="toc-upsmon_configuration-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-systemd_targets" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#systemd_targets">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>systemd targets</div>
			</a>
			
			<ul id="toc-systemd_targets-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-NUT-Monitor" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#NUT-Monitor">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>NUT-Monitor</div>
			</a>
			
			<ul id="toc-NUT-Monitor-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-CyberPower_UPS_keeps_disconnecting/reconnecting" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#CyberPower_UPS_keeps_disconnecting/reconnecting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>CyberPower UPS keeps disconnecting/reconnecting</div>
			</a>
			
			<ul id="toc-CyberPower_UPS_keeps_disconnecting/reconnecting-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-EATON_5E650iUSB_fails_to_start_driver" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#EATON_5E650iUSB_fails_to_start_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>EATON 5E650iUSB fails to start driver</div>
			</a>
			
			<ul id="toc-EATON_5E650iUSB_fails_to_start_driver-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Network_UPS_Tools.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:Network_UPS_Tools.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Network_UPS_Tools.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Network_UPS_Tools&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Network_UPS_Tools&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Network_UPS_Tools.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Network_UPS_Tools&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Network_UPS_Tools&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/APC_UPS.html" title="APC UPS">APC UPS</a></li>
</ul>
</div>
<p>This document describes how to install the <a rel="nofollow" class="external text" href="https://networkupstools.org/">Network UPS Tools (NUT)</a>. Network UPS Tools is compatible with thousands of models of UPS. You can check the <a rel="nofollow" class="external text" href="https://networkupstools.org/stable-hcl.html">Hardware Compatibility List</a> to see if your UPS is supported.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nut">nut</a></span> package.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>NUT has 3 daemons associated with it:
</p>
<ul>
<li>The driver which communicates with the UPS.</li>
<li>A server (upsd) which uses the driver to report the status of the UPS.</li>
<li>A monitoring daemon (upsmon) which monitors the upsd server and takes action based on information it receives.</li>
</ul>
<p>The idea is that if you have multiple systems connected to the UPS, one can communicate the status of the UPS over the network and the others can monitor that status by running their own upsmon services.  NUT has <a rel="nofollow" class="external text" href="https://networkupstools.org/docs/user-manual.chunked/ar01s06.html#_configuring_and_using">extensive documentation on the configuration</a> however this is going to walk through a simple setup of a USB UPS and the associated server and monitor all in one system (common desktop configuration).
</p>
<h3><span class="mw-headline" id="Driver_configuration">Driver configuration</span></h3>
<p>The configuration here will depend on the type of UPS you have. Consult the previously mentioned Hardware Compatibility List to find what driver will likely work for your UPS. You can run the tool <span class="plainlinks archwiki-template-man" title="$ man 8 nut-scanner"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/nut-scanner.8">nut-scanner(8)</a></span> which will detect NUT-compatible devices attached to your system.
</p>
<p>For many UPS connected by USB, use the <span class="plainlinks archwiki-template-man" title="$ man 8 usbhid-ups"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/usbhid-ups.8">usbhid-ups(8)</a></span> driver. For UPS with serial port, use <code>port=/dev/ttySX</code>, where X is the number of serial port (Example: <code>/dev/ttyS1</code>). For UPS with USB port, use <code>port=auto</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nut/ups.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[<i>upsname</i>]
    driver = usbhid-ups
    port = auto</pre>
<p>You can name the UPS device whatever you like. <span class="plainlinks archwiki-template-man" title="$ man 5 ups.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/ups.conf.5">ups.conf(5)</a></span>
</p>
<p>Start the driver as root with <code>upsdrvctl start</code>. If there are no errors, you should see a message like this one for the driver <code>usbhid-ups</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># upsdrvctl start</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Network UPS Tools - Generic HID driver 0.34 (2.4.1)
USB communication driver 0.31
Using subdriver: MGE HID 1.12
Detected EATON - Ellipse MAX 1100 [ADKK22008]
</pre>
<p>If the driver does not start cleanly, make sure you have picked the right one for your hardware. You might need to try other drivers by changing the <code>driver=</code> value in <code>ups.conf</code>.
</p>
<p>At this point you should be able to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>nut-driver-enumerator.service</code> which will automatically create nut-driver@&lt;ups name&gt; systemd service instance and start it.
</p>
<h4>
<span id="Can.27t_claim_USB_device_error"></span><span class="mw-headline" id="Can't_claim_USB_device_error">Can't claim USB device error</span>
</h4>
<p>If you receive an error message like this one:
</p>
<pre>Can't claim USB device [<i>XXXX:YYYY</i>]: could not detach kernel driver from
interface 0: Operation not permitted
Driver failed to start (exit status=1)
</pre>
<p>Or a less specific one:
</p>
<pre>USB communication driver 0.33
No matching HID UPS found
Driver failed to start (exit status=1)
</pre>
<p>It is most likely a problem with permissions for accessing the device. You can fix that by specifying an <a href="../en/Udev.html" title="Udev">udev</a> rule that sets the correct group:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/50-ups.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">SUBSYSTEM=="usb", ATTR{idVendor}=="<i>XXXX</i>", ATTR{idProduct}=="<i>YYYY</i>", GROUP="nut"</pre>
<p>Where <code><i>XXXX</i></code> and <code><i>YYYY</i></code> are the device manufacturer and product IDs. You can see these either in the error output (<code>[<i>XXXX:YYYY</i>]</code>) or by using <code>lsusb</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The <code>nut</code> group is added by the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nut">nut</a></span> package. If you used different installation method, you may need to correct the group.</div>
<p>After this is done, reload and retrigger udev rules by running:
</p>
<pre># udevadm control --reload
# udevadm trigger
</pre>
<h3><span class="mw-headline" id="upsd_configuration">upsd configuration</span></h3>
<p>By default upsd listens only on localhost and this is fine for our purpose. Though it is not necessary for following this guide, you can configure upsd beyond the defaults by editing <code>/etc/nut/upsd.conf</code>. See <span class="plainlinks archwiki-template-man" title="$ man 5 upsd.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/upsd.conf.5">upsd.conf(5)</a></span>.
</p>
<p>You will need to add a user for a monitor to connect to the server and issue commands. See <span class="plainlinks archwiki-template-man" title="$ man 5 upsd.users"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/upsd.users.5">upsd.users(5)</a></span>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nut/upsd.users</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
[<i>upsuser</i>]
     password = <i>password</i>
     upsmon primary
     actions = SET
     instcmds = ALL</pre>
<p>At this point you should be able to <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>nut-server.service</code>.
</p>
<p>If it has started successfully, you can run <code>upsc <i>upsname</i></code> to get information from the UPS. Example output from the command:
</p>
<pre>battery.charge: 100
battery.charge.low: 10
battery.charge.warning: 20
battery.mfr.date: CPS
battery.runtime: 5550
battery.runtime.low: 300
battery.type: PbAcid
battery.voltage: 13.5
battery.voltage.nominal: 12
device.mfr: CPS
device.model: UPS CP1000AVRLCD
device.type: ups
driver.name: usbhid-ups
driver.parameter.pollfreq: 30
driver.parameter.pollinterval: 2
driver.parameter.port: auto
driver.parameter.synchronous: no
driver.version: 2.7.4
driver.version.data: CyberPower HID 0.4
driver.version.internal: 0.41
input.transfer.high: 140
input.transfer.low: 90
input.voltage: 122.0
input.voltage.nominal: 120
output.voltage: 122.0
ups.beeper.status: disabled
ups.delay.shutdown: 20
ups.delay.start: 30
ups.load: 0
ups.mfr: CPS
ups.model: UPS CP1000AVRLCD
ups.productid: 0501
ups.realpower.nominal: 600
ups.status: OL
ups.test.result: Done and passed
ups.timer.shutdown: -60
ups.timer.start: 0
ups.vendorid: 0764
</pre>
<h3><span class="mw-headline" id="upsmon_configuration">upsmon configuration</span></h3>
<p>The last step is to configure upsmon to listen to upsd and take action on events.
</p>
<p>Add the following line to <code>/etc/nut/upsmon.conf</code>:
</p>
<pre>MONITOR <i>upsname</i>@localhost 1 <i>upsduser</i> <i>password</i> primary
</pre>
<p>Here <i>upsname</i> is the name of the UPS, and <i>upsduser</i> and <i>password</i> is the user and its password you set in <code>/etc/nut/upsd.users</code>.
</p>
<p>You can also configure what alerts are sent, where they are sent, what action is taken when the battery is low, and more. See <span class="plainlinks archwiki-template-man" title="$ man 5 upsmon.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/upsmon.conf.5">upsmon.conf(5)</a></span>.
</p>
<p>Then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>nut-monitor.service</code>.
</p>
<p>Your logs should show upsmon starting and monitoring the UPS.
</p>
<h3><span class="mw-headline" id="systemd_targets">systemd targets</span></h3>
<p>In order for the systemd service units to start on boot, you must <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>nut.target</code> and <code>nut-driver.target</code>.
</p>
<h2><span class="mw-headline" id="NUT-Monitor">NUT-Monitor</span></h2>
<p><a rel="nofollow" class="external text" href="https://networkupstools.org/projects.html#_a_href_http_www_lestat_st_en_informatique_projets_nut_monitor_nut_monitor_a">NUT-Monitor</a> is a graphical user interface to monitor and manage devices connected to the Network UPS Tools server.
</p>
<p>You can <a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">install</a> nut-monitor with the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/nut-monitor/">nut-monitor</a></span><sup><small>AUR</small></sup> package.
</p>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id="CyberPower_UPS_keeps_disconnecting.2Freconnecting"></span><span class="mw-headline" id="CyberPower_UPS_keeps_disconnecting/reconnecting">CyberPower UPS keeps disconnecting/reconnecting</span>
</h3>
<p>Some <a href="../en/CyberPower_UPS.html" title="CyberPower UPS">CyberPower UPS</a> products are known to keep disconnecting/reconnecting until the driver successfully attaches to it <a rel="nofollow" class="external autonumber" href="https://alioth-lists.debian.net/pipermail/nut-upsuser/2011-June/006871.html">[1]</a>. Once the disconnect/reconnect loop starts, it can be difficult for <code>upsd</code> to establish connection to the UPS using default configuration (which appears to impact the proprietary driver as well).
</p>
<p>To mitigate this issue, <a href="../en/Systemd.html#Editing_provided_units" class="mw-redirect" title="Edit">edit</a> <code>nut-driver@.service</code>, add the following configuration, then <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> <code>nut-driver@cyberpower.service</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/nut-driver@.service.d/override.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Unit]
StopWhenUnneeded=no

[Service]
PIDFile=/run/nut/usbhid-ups-cyberpower.pid
Group=nut
User=nut
RestartSec=10s</pre>
<p>Additionally, consider using <code>maxretry</code> in UPS configuration:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/nut/ups.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">maxretry = 5

[cyberpower]
        driver = "usbhid-ups"
        port = "auto"
        ...</pre>
<h3><span class="mw-headline" id="EATON_5E650iUSB_fails_to_start_driver">EATON 5E650iUSB fails to start driver</span></h3>
<p>According to an <a rel="nofollow" class="external text" href="https://github.com/networkupstools/nut/issues/630">issue on GitHub</a>, there is a bug in the kernel and the following <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> can be used as a workaround:
</p>
<pre>usbhid.quirks=0x0463:0xffff:0x08
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://forums.unraid.net/topic/93341-tutorial-networked-nut-for-cyberpower-ups/">Tutorial on networked NUT for Cyberpower UPS</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Power_management.html" title="Category:Power management">Power management</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_UPS_Tools&amp;oldid=782353">https://wiki.archlinux.org/index.php?title=Network_UPS_Tools&amp;oldid=782353</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 July 2023, at 12:23.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
