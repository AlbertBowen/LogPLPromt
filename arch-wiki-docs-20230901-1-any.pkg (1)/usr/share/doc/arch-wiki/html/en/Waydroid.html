<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Waydroid - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Waydroid rootpage-Waydroid skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Prerequisites" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Prerequisites">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Prerequisites</div>
			</a>
			
				<button aria-controls="toc-Prerequisites-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Prerequisites subsection
				</button>
			
			<ul id="toc-Prerequisites-sublist" class="sidebar-toc-list">
				<li id="toc-CPU_Requirements" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#CPU_Requirements">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>CPU Requirements</div>
			</a>
			
			<ul id="toc-CPU_Requirements-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-GPU_Requirements" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#GPU_Requirements">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>GPU Requirements</div>
			</a>
			
			<ul id="toc-GPU_Requirements-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Wayland_session_manager" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Wayland_session_manager">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.3</span>Wayland session manager</div>
			</a>
			
			<ul id="toc-Wayland_session_manager-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Kernel_Modules" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Kernel_Modules">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4</span>Kernel Modules</div>
			</a>
			
			<ul id="toc-Kernel_Modules-sublist" class="sidebar-toc-list">
				<li id="toc-Using_Linux-Zen" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Using_Linux-Zen">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.1</span>Using Linux-Zen</div>
			</a>
			
			<ul id="toc-Using_Linux-Zen-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-DKMS_modules" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#DKMS_modules">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.2</span>DKMS modules</div>
			</a>
			
			<ul id="toc-DKMS_modules-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Building_a_kernel" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Building_a_kernel">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.3</span>Building a kernel</div>
			</a>
			
			<ul id="toc-Building_a_kernel-sublist" class="sidebar-toc-list">
				<li id="toc-Using_binder" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Using_binder">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.3.1</span>Using binder</div>
			</a>
			
			<ul id="toc-Using_binder-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Using_binderfs" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Using_binderfs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.3.2</span>Using binderfs</div>
			</a>
			
			<ul id="toc-Using_binderfs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Setup_binder_devices" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Setup_binder_devices">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.4.4</span>Setup binder devices</div>
			</a>
			
			<ul id="toc-Setup_binder_devices-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usage" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Usage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Usage</div>
			</a>
			
			<ul id="toc-Usage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Network" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Network">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Network</div>
			</a>
			
			<ul id="toc-Network-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-General_tips" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#General_tips">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>General tips</div>
			</a>
			
			<ul id="toc-General_tips-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-ARM_Apps_Incompatible" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#ARM_Apps_Incompatible">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>ARM Apps Incompatible</div>
			</a>
			
			<ul id="toc-ARM_Apps_Incompatible-sublist" class="sidebar-toc-list">
				<li id="toc-AMD_GPUs" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#AMD_GPUs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2.1</span>AMD GPUs</div>
			</a>
			
			<ul id="toc-AMD_GPUs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Intel_GPUs" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Intel_GPUs">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2.2</span>Intel GPUs</div>
			</a>
			
			<ul id="toc-Intel_GPUs-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Rotated_apps_are_unusable" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Rotated_apps_are_unusable">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>Rotated apps are unusable</div>
			</a>
			
			<ul id="toc-Rotated_apps_are_unusable-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Failed_to_start_Clipboard_manager_service" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Failed_to_start_Clipboard_manager_service">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Failed to start Clipboard manager service</div>
			</a>
			
			<ul id="toc-Failed_to_start_Clipboard_manager_service-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Sometimes_the_physical_keyboard_does_not_work" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Sometimes_the_physical_keyboard_does_not_work">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.5</span>Sometimes the physical keyboard does not work</div>
			</a>
			
			<ul id="toc-Sometimes_the_physical_keyboard_does_not_work-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.6</span>dnsmasq: failed to open pidfile /run/waydroid-lxc/dnsmasq.pid: Permission denied</div>
			</a>
			
			<ul id="toc-dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.7</span>Commands inside Waydroid shell outputs inaccessible or not found</div>
			</a>
			
			<ul id="toc-Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-WARNING:_Service_manager_/dev/binder_has_died" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#WARNING:_Service_manager_/dev/binder_has_died">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.8</span>WARNING: Service manager /dev/binder has died</div>
			</a>
			
			<ul id="toc-WARNING:_Service_manager_/dev/binder_has_died-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Graphical_Corruption_on_multi-gpu_systems" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Graphical_Corruption_on_multi-gpu_systems">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.9</span>Graphical Corruption on multi-gpu systems</div>
			</a>
			
			<ul id="toc-Graphical_Corruption_on_multi-gpu_systems-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Waydroid.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:Waydroid.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Waydroid.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Waydroid&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Waydroid&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Waydroid.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Waydroid&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Waydroid&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/Anbox.html" title="Anbox">Anbox</a></li>
<li><a href="../en/Linux_Containers.html" title="Linux Containers">Linux Containers</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Need to improve style. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Waydroid">Talk:Waydroid</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="https://waydro.id">Waydroid</a> is a container-based approach to boot a full Android system on a regular GNU/Linux system.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Prerequisites">Prerequisites</span></h2>
<h3><span class="mw-headline" id="CPU_Requirements">CPU Requirements</span></h3>
<p>The requirements depend on the CPU architecture. You can check this <a rel="nofollow" class="external text" href="https://developer.android.com/ndk/guides/abis#sa">table</a> for more information.
</p>
<p>You can check if you have the required CPU instructions with <code>cat /proc/cpuinfo</code>.
</p>
<h3><span class="mw-headline" id="GPU_Requirements">GPU Requirements</span></h3>
<p>Waydroid currently works best with Intel GPUs. They should work out of the box.
</p>
<p>All AMD GPUs have been supported; if Waydroid does <i>not</i> work you might also want to try to build a new Waydroid image (which works for Radeon 680M), or try the NVIDIA instructions below.
</p>
<p>NVIDIA GPUs do <i>not</i> work currently, but there are 2 workarounds:
</p>
<ul>
<li>Switch to integrated graphic card if possible;</li>
<li>Use software rendering:
<ul>
<li>Make sure that you have already run <code>waydroid init</code> (see <a href="#Installation">#Installation</a> section)</li>
<li>Edit <code>/var/lib/waydroid/waydroid_base.prop</code> and set:<pre>ro.hardware.gralloc=default
ro.hardware.egl=swiftshader</pre>
</li>
<li>
<a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> the <code>waydroid-container.service</code>.</li>
</ul>
</li>
</ul>
<h3><span class="mw-headline" id="Wayland_session_manager">Wayland session manager</span></h3>
<p>Waydroid only works in a <a href="../en/Wayland.html" title="Wayland">Wayland</a> session manager, so make sure you are in a Wayland session.
</p>
<p>Note that even if you are in X11, many Wayland session managers support nested session (so you can run it inside your X11 session), the simplest example is <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=cage">cage</a></span>.
</p>
<h3><span class="mw-headline" id="Kernel_Modules">Kernel Modules</span></h3>
<p>You need to run a kernel which comes with the binder modules. They are not part of Arch Linux's default kernel (<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span>), thus you need to install a kernel which ships these modules.
</p>
<p>You might also need to configure your bootloader to use a different kernel. Please refer to the wiki page of your bootloader how to boot with the new kernel. Booting into another kernel (version) is one of the few occasions when you have to reboot a Linux system. You should boot into the kernel with these modules before starting Waydroid.
</p>
<p>To get a compatible kernel, you have multiple options:
</p>
<h4><span class="mw-headline" id="Using_Linux-Zen">Using Linux-Zen</span></h4>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen">linux-zen</a></span> kernel includes the necessary modules, the headers <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-zen-headers">linux-zen-headers</a></span> are required for <code>binder_linux</code>. This might be the most comfortable way, as you do not have to compile the kernel (which takes a long time) and will receive updated versions regularly.
</p>
<h4><span class="mw-headline" id="DKMS_modules">DKMS modules</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/binder_linux-dkms/">binder_linux-dkms</a></span><sup><small>AUR</small></sup> and load the <a href="../en/Kernel_module.html" title="Kernel module">kernel module</a> <code>binder_linux</code>
</p>
<h4><span class="mw-headline" id="Building_a_kernel">Building a kernel</span></h4>
<p>Alternatively, you can recompile the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> kernel — or other kernel packages (&gt;=5.7) — with the necessary options. Also see <a href="../en/Kernel.html#Compilation" title="Kernel">Kernel#Compilation</a>.
</p>
<p>When setting compilation options, you have 2 options available; <i>binder</i> and <i>binderfs</i>. Instructions for both are provided below.
</p>
<h5><span class="mw-headline" id="Using_binder">Using binder</span></h5>
<p>The modules can either be compiled into the kernel (<code>y</code>), into modules (<code>m</code>), or not at all (<code>n</code>). Also, not all combinations in the configuration are possible, and some options will require other options.
</p>
<p>The configuration options below will compile binder as a module, while the last option specifies that there will be three devices created in the <code>/dev/</code> directory, when the binder module is loaded.
</p>
<pre>CONFIG_ANDROID=y
CONFIG_ANDROID_BINDER_IPC=m
CONFIG_ANDROID_BINDERFS=n
CONFIG_ANDROID_BINDER_DEVICES="binder,hwbinder,vndbinder"</pre>
<p>When building a kernel from the AUR, one can update the configuration with the following steps:
</p>
<ol>
<li>run <code>makepkg --nobuild</code>, which will download the sources, verify and extract them and run the <code>prepare()</code> function.</li>
<li>edit the <code>.config</code> file (with the dot in the filename), which is located at the base of the kernel directory.</li>
<li>at the end of the <code>prepare()</code> function was probably a command which regenerates the makefiles with information from the configuration, possibly <code>make olddefconfig</code>. Move that to the <code>build()</code> function, or execute it yourself.</li>
<li>run <code>makepkg --noextract</code>, which will continue from the place where <code>makepkg --nobuild</code> stopped.</li>
</ol>
<h5><span class="mw-headline" id="Using_binderfs">Using binderfs</span></h5>
<p>The binder kernel module is known to cause some issues to several users. To address these issues, binderfs was created. One has to choose between the old and the new way when compiling the kernel. With the options below, one will use binderfs instead.
</p>
<p>With the kernel sources comes also a simple script to set configuration options. It will not do dependency checks, just like when editing the configuration by hand. When being in the same directory where the <code>.config</code> file lies, one can execute the following commands:
</p>
<pre>$ scripts/config --enable  CONFIG_ANDROID
$ scripts/config --enable  CONFIG_ANDROID_BINDER_IPC
$ scripts/config --enable  CONFIG_ANDROID_BINDERFS
$ scripts/config --set-str CONFIG_ANDROID_BINDER_DEVICES ""
</pre>
<p>When building a kernel from the AUR, it is enough to insert these lines at the right place in the <a href="../en/PKGBUILD.html" title="PKGBUILD">PKGBUILD</a>, usually in <code>prepare()</code>.
</p>
<h4><span class="mw-headline" id="Setup_binder_devices">Setup binder devices</span></h4>
<p>Make sure you have the latest version of Waydroid package, and Waydroid will take automatically care of this.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid/">waydroid</a></span><sup><small>AUR</small></sup> package.
</p>
<p>Optionally, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid-image/">waydroid-image</a></span><sup><small>AUR</small></sup> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/waydroid-image-gapps/">waydroid-image-gapps</a></span><sup><small>AUR</small></sup> to provide the needed Android image through AUR. It is however recommended to let Waydroid itself handle downloading the images.
</p>
<p>Afterwards init Waydroid, this will automatically download the latest Android image if it is not yet available.
</p>
<pre># waydroid init
</pre>
<p>To init with GApps support:
</p>
<pre># waydroid init -s GAPPS
</pre>
<p>Next <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">start/enable</a> the <code>waydroid-container.service</code>.
</p>
<p>Waydroid should now work.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Make sure that <code>waydroid-container.service</code> is <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">started</a> then run:
</p>
<pre>$ waydroid session start
</pre>
<p>The Waydroid session is now active, here are a couple of useful commands to interact with it:
</p>
<p><i>Launch GUI</i>:
</p>
<pre>$ waydroid show-full-ui
</pre>
<p><i>Launch shell</i>:
</p>
<pre># waydroid shell
</pre>
<p><i>Install an application</i>:
</p>
<pre>$ waydroid app install $path_to_apk
</pre>
<p><i>Run an application</i>:
</p>
<pre>$ waydroid app launch $package-name # Can be retrieved with `waydroid app list`
</pre>
<h2><span class="mw-headline" id="Network">Network</span></h2>
<p>The network should work out of the box, if its not you might need to make sure <a href="../en/Internet_sharing.html#Enable_packet_forwarding" title="Internet sharing">packet forwarding</a> is enabled in kernel and allow the following rules through your firewall <i>before</i> running <i>Waydroid session start</i>.
</p>
<p>Taking <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ufw">ufw</a></span> as an example:
</p>
<ul>
<li>DNS traffic needs to be allowed:
<ul>
<li><pre># ufw allow 67</pre></li>
<li><pre># ufw allow 53</pre></li>
</ul>
</li>
<li>Packet forwarding needs to be allowed:
<ul><li><pre># ufw default allow FORWARD</pre></li></ul>
</li>
</ul>
<p>For <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=firewalld">firewalld</a></span>, you can use those commands:
</p>
<ul>
<li>DNS:
<ul>
<li><pre># firewall-cmd --zone=trusted --add-port=67/udp</pre></li>
<li><pre># firewall-cmd --zone=trusted --add-port=53/udp</pre></li>
</ul>
</li>
<li>Packet forwarding:
<ul><li><pre># firewall-cmd --zone=trusted --add-forward</pre></li></ul>
</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> We assume that interface <code>waydroid0</code> created by waydroid should be in the firewalld zone <code>trusted</code> automatically. If not so, please adjust those commands above or move interface <code>waydroid0</code> to <code>trusted</code>. You may also need <pre># firewall-cmd --runtime-to-permanent</pre> to make your changes persist after a restart.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<p>If you run into issues, take a look at the official Issue Tracker: <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/issues">Waydroid issue tracker</a>
</p>
<h3><span class="mw-headline" id="General_tips">General tips</span></h3>
<p>Waydroid is in rapid development so if you face issues, here is a good list of steps to do first:
</p>
<ol>
<li>Make sure your Waydroid package is up to date;</li>
<li>Make sure you have the latest Waydroid image by running <pre># waydroid upgrade</pre>
</li>
<li>Reset Waydroid: <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Stop">stop</a> the <code>waydroid-container.service</code>, run <pre># waydroid init -f</pre> and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the service again.</li>
<li>You may also want to do little cleanup, run <pre># rm -rf /var/lib/waydroid /home/.waydroid</pre> <pre>$ rm -rf ~/waydroid ~/.share/waydroid ~/.local/share/applications/*aydroid* ~/.local/share/waydroid</pre>
</li>
</ol>
<dl><dd><dl><dd><div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Removing <code>/home/.waydroid/</code> is unnecessary if you installed it after <a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid/commit/eef036b3f814a9fc4869ebfe6c9d2bd51fa19f26">2021-09</a>.</div></dd></dl></dd></dl>
<h3><span class="mw-headline" id="ARM_Apps_Incompatible">ARM Apps Incompatible</span></h3>
<p>Use casualnek's <a rel="nofollow" class="external text" href="https://github.com/casualsnek/waydroid_script">script</a> to install a translation layer.
</p>
<h4><span class="mw-headline" id="AMD_GPUs">AMD GPUs</span></h4>
<p><i>Install libndk arm translation</i>
</p>
<pre># python3 main.py install libndk 
</pre>
<h4><span class="mw-headline" id="Intel_GPUs">Intel GPUs</span></h4>
<p><i>Install libhoudini arm translation</i>
</p>
<pre># python3 main.py install libhoudini
</pre>
<h3><span class="mw-headline" id="Rotated_apps_are_unusable">Rotated apps are unusable</span></h3>
<p>See <a rel="nofollow" class="external free" href="https://github.com/waydroid/waydroid/issues/70">https://github.com/waydroid/waydroid/issues/70</a>
</p>
<p>Click <i>F11</i> to switch the current app to windowed mode.
</p>
<h3><span class="mw-headline" id="Failed_to_start_Clipboard_manager_service">Failed to start Clipboard manager service</span></h3>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/python-pyclip/">python-pyclip</a></span><sup><small>AUR</small></sup>
</p>
<h3><span class="mw-headline" id="Sometimes_the_physical_keyboard_does_not_work">Sometimes the physical keyboard does not work</span></h3>
<p>Press the left <code>Alt</code> key.
</p>
<h3>
<span id="dnsmasq:_failed_to_open_pidfile_.2Frun.2Fwaydroid-lxc.2Fdnsmasq.pid:_Permission_denied"></span><span class="mw-headline" id="dnsmasq:_failed_to_open_pidfile_/run/waydroid-lxc/dnsmasq.pid:_Permission_denied">dnsmasq: failed to open pidfile /run/waydroid-lxc/dnsmasq.pid: Permission denied</span>
</h3>
<p>An AppArmor rule is likely not set. Add the following rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/apparmor.d/usr.sbin.dnsmasq</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">@{run}/waydroid-lxc/ r,
@{run}/waydroid-lxc/* rw,
</pre>
<h3><span class="mw-headline" id="Commands_inside_Waydroid_shell_outputs_inaccessible_or_not_found">Commands inside Waydroid shell outputs inaccessible or not found</span></h3>
<p>On Arch based distributions there's a <a href="../en/Linux_Containers.html#Basic_usage" title="Linux Containers">"bug" that may appear while working with lxc-attach</a> that may cause this issue with commands inside <code>waydroid shell</code> like <code>adbd</code> or <code>settings</code>.
</p>
<p>
A possible workaround for this would be replace the </p>
<pre># waydroid shell</pre>
<p> command with </p>
<pre># lxc-attach -P /var/lib/waydroid/lxc/ -n waydroid --clear-env</pre>
<h3>
<span id="WARNING:_Service_manager_.2Fdev.2Fbinder_has_died"></span><span class="mw-headline" id="WARNING:_Service_manager_/dev/binder_has_died">WARNING: Service manager /dev/binder has died</span>
</h3>
<p>See <a rel="nofollow" class="external free" href="https://github.com/waydroid/waydroid/issues/136">https://github.com/waydroid/waydroid/issues/136</a>
</p>
<p>You should enable <a rel="nofollow" class="external text" href="https://docs.kernel.org/accounting/psi.html">PSI</a>.
Add <code>psi=1</code> to the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel command line">kernel command line</a>.
</p>
<h3><span class="mw-headline" id="Graphical_Corruption_on_multi-gpu_systems">Graphical Corruption on multi-gpu systems</span></h3>
<p>Currently Waydroid needs to run on the same GPU the host compositor is running on. The two ways of fixing this is to either edit <code>/var/lib/waydroid/lxc/waydroid/config_nodes</code> to be the correct GPU or to change the GPU the compositor runs on.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/waydroid/waydroid">Waydroid GitHub repo</a></li>
<li><a rel="nofollow" class="external text" href="https://docs.waydro.id/">Waydroid documentation</a></li>
<li><a rel="nofollow" class="external text" href="https://matrix.to/#/#waydroid:connolly.tech">Waydroid Matrix group</a></li>
<li><a rel="nofollow" class="external text" href="https://t.me/WayDroid">Waydroid Telegram group</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Sandboxing.html" title="Category:Sandboxing">Sandboxing</a></li>
<li><a href="../en/Category:Virtualization.html" title="Category:Virtualization">Virtualization</a></li>
<li><a href="../en/Category:Android.html" title="Category:Android">Android</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Waydroid&amp;oldid=784680">https://wiki.archlinux.org/index.php?title=Waydroid&amp;oldid=784680</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 August 2023, at 10:10.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
