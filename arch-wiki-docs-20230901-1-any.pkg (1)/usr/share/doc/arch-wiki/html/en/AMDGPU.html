<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>AMDGPU - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AMDGPU rootpage-AMDGPU skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Selecting_the_right_driver" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Selecting_the_right_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Selecting the right driver</div>
			</a>
			
			<ul id="toc-Selecting_the_right_driver-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Installation</div>
			</a>
			
				<button aria-controls="toc-Installation-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Installation subsection
				</button>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
				<li id="toc-Experimental" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Experimental">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Experimental</div>
			</a>
			
			<ul id="toc-Experimental-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Enable Southern Islands (SI) and Sea Islands (CIK) support</div>
			</a>
			
			<ul id="toc-Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support-sublist" class="sidebar-toc-list">
				<li id="toc-Load_amdgpu_driver" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Load_amdgpu_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.1</span>Load amdgpu driver</div>
			</a>
			
			<ul id="toc-Load_amdgpu_driver-sublist" class="sidebar-toc-list">
				<li id="toc-Set_module_parameters_in_kernel_command_line" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Set_module_parameters_in_kernel_command_line">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.1.1</span>Set module parameters in kernel command line</div>
			</a>
			
			<ul id="toc-Set_module_parameters_in_kernel_command_line-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Specify_the_correct_module_order" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Specify_the_correct_module_order">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.2</span>Specify the correct module order</div>
			</a>
			
			<ul id="toc-Specify_the_correct_module_order-sublist" class="sidebar-toc-list">
				<li id="toc-Set_module_parameters_in_modprobe.d" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Set_module_parameters_in_modprobe.d">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.2.1</span>Set module parameters in modprobe.d</div>
			</a>
			
			<ul id="toc-Set_module_parameters_in_modprobe.d-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Compile_kernel_which_supports_amdgpu_driver" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Compile_kernel_which_supports_amdgpu_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.2.2</span>Compile kernel which supports amdgpu driver</div>
			</a>
			
			<ul id="toc-Compile_kernel_which_supports_amdgpu_driver-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Disable_loading_radeon_completely_at_boot" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Disable_loading_radeon_completely_at_boot">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2.3</span>Disable loading radeon completely at boot</div>
			</a>
			
			<ul id="toc-Disable_loading_radeon_completely_at_boot-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-ACO_compiler" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#ACO_compiler">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>ACO compiler</div>
			</a>
			
			<ul id="toc-ACO_compiler-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Loading" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Loading">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Loading</div>
			</a>
			
			<ul id="toc-Loading-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Xorg_configuration" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Xorg_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Xorg configuration</div>
			</a>
			
				<button aria-controls="toc-Xorg_configuration-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Xorg configuration subsection
				</button>
			
			<ul id="toc-Xorg_configuration-sublist" class="sidebar-toc-list">
				<li id="toc-Tear_free_rendering" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Tear_free_rendering">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Tear free rendering</div>
			</a>
			
			<ul id="toc-Tear_free_rendering-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-DRI_level" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#DRI_level">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>DRI level</div>
			</a>
			
			<ul id="toc-DRI_level-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Variable_refresh_rate" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Variable_refresh_rate">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.3</span>Variable refresh rate</div>
			</a>
			
			<ul id="toc-Variable_refresh_rate-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-10-bit_color" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#10-bit_color">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.4</span>10-bit color</div>
			</a>
			
			<ul id="toc-10-bit_color-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Reduce_output_latency" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Reduce_output_latency">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.5</span>Reduce output latency</div>
			</a>
			
			<ul id="toc-Reduce_output_latency-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Features" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Features">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Features</div>
			</a>
			
				<button aria-controls="toc-Features-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Features subsection
				</button>
			
			<ul id="toc-Features-sublist" class="sidebar-toc-list">
				<li id="toc-Video_acceleration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Video_acceleration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>Video acceleration</div>
			</a>
			
			<ul id="toc-Video_acceleration-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Monitoring" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Monitoring">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>Monitoring</div>
			</a>
			
			<ul id="toc-Monitoring-sublist" class="sidebar-toc-list">
				<li id="toc-CLI" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#CLI">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2.1</span>CLI</div>
			</a>
			
			<ul id="toc-CLI-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-GUI" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#GUI">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2.2</span>GUI</div>
			</a>
			
			<ul id="toc-GUI-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manually" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Manually">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2.3</span>Manually</div>
			</a>
			
			<ul id="toc-Manually-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Overclocking" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Overclocking">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>Overclocking</div>
			</a>
			
			<ul id="toc-Overclocking-sublist" class="sidebar-toc-list">
				<li id="toc-Boot_parameter" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Boot_parameter">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.1</span>Boot parameter</div>
			</a>
			
			<ul id="toc-Boot_parameter-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_(default)" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Manual_(default)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.2</span>Manual (default)</div>
			</a>
			
			<ul id="toc-Manual_(default)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Assisted" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Assisted">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.3</span>Assisted</div>
			</a>
			
			<ul id="toc-Assisted-sublist" class="sidebar-toc-list">
				<li id="toc-CLI_tools" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#CLI_tools">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.3.1</span>CLI tools</div>
			</a>
			
			<ul id="toc-CLI_tools-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-GUI_tools" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#GUI_tools">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.3.2</span>GUI tools</div>
			</a>
			
			<ul id="toc-GUI_tools-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Startup_on_boot" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Startup_on_boot">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3.4</span>Startup on boot</div>
			</a>
			
			<ul id="toc-Startup_on_boot-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Power_profiles" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Power_profiles">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Power profiles</div>
			</a>
			
			<ul id="toc-Power_profiles-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_GPU_display_scaling" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Enable_GPU_display_scaling">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.5</span>Enable GPU display scaling</div>
			</a>
			
			<ul id="toc-Enable_GPU_display_scaling-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-Xorg_or_applications_will_not_start" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Xorg_or_applications_will_not_start">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.1</span>Xorg or applications will not start</div>
			</a>
			
			<ul id="toc-Xorg_or_applications_will_not_start-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_artifacts_and_frequency_problem" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Screen_artifacts_and_frequency_problem">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.2</span>Screen artifacts and frequency problem</div>
			</a>
			
			<ul id="toc-Screen_artifacts_and_frequency_problem-sublist" class="sidebar-toc-list">
				<li id="toc-Artifacts_in_Chromium" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Artifacts_in_Chromium">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.2.1</span>Artifacts in Chromium</div>
			</a>
			
			<ul id="toc-Artifacts_in_Chromium-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-R9_390_series_poor_performance_and/or_instability" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#R9_390_series_poor_performance_and/or_instability">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.3</span>R9 390 series poor performance and/or instability</div>
			</a>
			
			<ul id="toc-R9_390_series_poor_performance_and/or_instability-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id='toc-Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error' class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href='#Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error'>
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.4</span>Freezes with "[drm] IP block:gmc_v8_0 is hung!" kernel error</div>
			</a>
			
			<ul id='toc-Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error-sublist' class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Cursor_corruption" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Cursor_corruption">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.5</span>Cursor corruption</div>
			</a>
			
			<ul id="toc-Cursor_corruption-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_flickering_white_when_using_KDE" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Screen_flickering_white_when_using_KDE">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.6</span>Screen flickering white when using KDE</div>
			</a>
			
			<ul id="toc-Screen_flickering_white_when_using_KDE-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-System_freeze_or_crash_when_gaming_on_Vega_cards" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#System_freeze_or_crash_when_gaming_on_Vega_cards">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.7</span>System freeze or crash when gaming on Vega cards</div>
			</a>
			
			<ul id="toc-System_freeze_or_crash_when_gaming_on_Vega_cards-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-WebRenderer_(Firefox)_corruption" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#WebRenderer_(Firefox)_corruption">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.8</span>WebRenderer (Firefox) corruption</div>
			</a>
			
			<ul id="toc-WebRenderer_(Firefox)_corruption-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id='toc-Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected' class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href='#Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected'>
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.9</span>Double-speed or "chipmunk" audio, or no audio when a 4K@60Hz device is connected</div>
			</a>
			
			<ul id='toc-Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected-sublist' class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.10</span>Issues with power management / dynamic re-activation of a discrete amdgpu graphics card</div>
			</a>
			
			<ul id="toc-Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-kfd:_amdgpu:_TOPAZ_not_supported_in_kfd" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#kfd:_amdgpu:_TOPAZ_not_supported_in_kfd">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.11</span>kfd: amdgpu: TOPAZ not supported in kfd</div>
			</a>
			
			<ul id="toc-kfd:_amdgpu:_TOPAZ_not_supported_in_kfd-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6.12</span>High idle power draw due to MCLK locked at MAX (1000MHz), or MIN (96MHz) causing low game performance (on 6.4 kernel)</div>
			</a>
			
			<ul id="toc-High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/AMDGPU.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:AMDGPU.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/AMDGPU.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=AMDGPU&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=AMDGPU&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/AMDGPU.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=AMDGPU&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=AMDGPU&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/ATI.html" title="ATI">ATI</a></li>
<li><a href="../en/Xorg.html" title="Xorg">Xorg</a></li>
<li><a href="../en/Vulkan.html" title="Vulkan">Vulkan</a></li>
<li><a href="../en/AMDGPU_PRO.html" title="AMDGPU PRO">AMDGPU PRO</a></li>
</ul>
</div>
<p><a href="https://en.wikipedia.org/wiki/AMDGPU" class="extiw" title="wikipedia:AMDGPU">AMDGPU</a> is the open source graphics driver for AMD Radeon graphics cards from the <a href="https://en.wikipedia.org/wiki/Graphics_Core_Next" class="extiw" title="wikipedia:Graphics Core Next">Graphics Core Next</a> family.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Selecting_the_right_driver">Selecting the right driver</span></h2>
<p>Depending on the card you have, find the right driver in <a href="../en/Xorg.html#AMD" title="Xorg">Xorg#AMD</a>.
This driver supports <a rel="nofollow" class="external text" href="https://www.x.org/wiki/RadeonFeature/">Southern Islands (SI)</a> cards and later. AMD has no plans to support pre-GCN GPUs.
Owners of unsupported GPUs may use the open source <a href="../en/ATI.html" title="ATI">ATI</a> driver.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> package, which provides the DRI driver for 3D acceleration.
</p>
<ul>
<li>For 32-bit application support, also install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa">lib32-mesa</a></span> package from the <a href="../en/Official_repositories.html#multilib" class="mw-redirect" title="Multilib">multilib</a> repository.</li>
<li>For the DDX driver (which provides 2D acceleration in <a href="../en/Xorg.html" title="Xorg">Xorg</a>), install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=xf86-video-amdgpu">xf86-video-amdgpu</a></span> package.</li>
<li>For <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support:
<ul>
<li>Test with <b>only <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-radeon">vulkan-radeon</a></span> first</b>: although not appearing as the first provider of <i>vulkan-driver</i> (due to its <a href="../en/Pacman.html#Virtual_packages" title="Pacman">alphabetical order</a>), it avoids some issues that have repeatedly been <a href="../en/Vulkan.html#AMDGPU_-_Crashes_with_DirectX_Vulkan_games" title="Vulkan">reported</a> about <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amdvlk">amdvlk</a></span>.</li>
<li>When the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=amdvlk">amdvlk</a></span> package is installed, it sets itself as the default Vulkan driver: see <a href="../en/Vulkan.html#Selecting_via_environment_variable" title="Vulkan">Vulkan#Selecting via environment variable</a> <i>if</i> you <i>need</i> to have both drivers installed (e.g. when having <a href="../en/Vulkan.html#AMDGPU_-_Hangs_when_playing_DirectX_Vulkan_games" title="Vulkan">issues</a> with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=vulkan-radeon">vulkan-radeon</a></span>).</li>
<li>Optionally, for 32-bit application support, install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-vulkan-radeon">lib32-vulkan-radeon</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-amdvlk">lib32-amdvlk</a></span> package to match the native package installed.</li>
</ul>
</li>
</ul>
<p>Support for <a href="#Video_acceleration">accelerated video decoding</a> is provided by <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=libva-mesa-driver">libva-mesa-driver</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-libva-mesa-driver">lib32-libva-mesa-driver</a></span> for VA-API and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa-vdpau">mesa-vdpau</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lib32-mesa-vdpau">lib32-mesa-vdpau</a></span> packages for VDPAU.
</p>
<h3><span class="mw-headline" id="Experimental">Experimental</span></h3>
<p>It may be worthwhile for some users to use the upstream experimental build of mesa.
</p>
<p>Install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> package, which provides the DRI driver for 3D acceleration.
</p>
<ul>
<li>For 32-bit application support, also install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lib32-mesa-git/">lib32-mesa-git</a></span><sup><small>AUR</small></sup> package from the <i>mesa-git</i> repository or the <a href="../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a>.</li>
<li>For the DDX driver (which provides 2D acceleration in <a href="../en/Xorg.html" title="Xorg">Xorg</a>), install the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/xf86-video-amdgpu-git/">xf86-video-amdgpu-git</a></span><sup><small>AUR</small></sup> package.</li>
<li>For <a href="../en/Vulkan.html" title="Vulkan">Vulkan</a> support using the <i>mesa-git</i> repository below, install the <i>vulkan-radeon-git</i> package. Optionally install the <i>lib32-vulkan-radeon-git</i> package for 32-bit application support. This should not be required if building <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> from the AUR.</li>
</ul>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It may be necessary to symlink LibLLVM for X to start. For example, <code>ln -s /usr/lib/libLLVM-10git.so /usr/lib/libLLVM-10svn.so</code>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> Users who do not wish to go through the process of compiling the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/mesa-git/">mesa-git</a></span><sup><small>AUR</small></sup> package can use the <a href="../en/Unofficial_user_repositories.html#mesa-git" title="Unofficial user repositories">mesa-git</a> unofficial repository.</div>
<h3>
<span id="Enable_Southern_Islands_.28SI.29_and_Sea_Islands_.28CIK.29_support"></span><span class="mw-headline" id="Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">Enable Southern Islands (SI) and Sea Islands (CIK) support</span>
</h3>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux">linux</a></span> package enables AMDGPU support for cards of the Southern Islands (HD 7000 Series, SI, ie. GCN 1) and Sea Islands (HD 8000 Series, CIK, ie. GCN 2). The <code>amdgpu</code> kernel driver needs to be loaded before the <a href="../en/ATI.html" title="ATI">radeon</a> one. You can check which kernel driver is loaded by running <code>lspci -k</code>. It should be like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -k | grep -A 3 -E "(VGA|3D)"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Curacao PRO [Radeon R7 370 / R9 270/370 OEM]
	Subsystem: Gigabyte Technology Co., Ltd Device 226c
	Kernel driver in use: amdgpu
	Kernel modules: radeon, amdgpu
</pre>
<p>If the <code>amdgpu</code> driver is not in use, follow instructions in the next section.
</p>
<h4><span class="mw-headline" id="Load_amdgpu_driver">Load amdgpu driver</span></h4>
<p>The <a href="../en/Kernel_module.html#Setting_module_options" class="mw-redirect" title="Module parameter">module parameters</a> of both <code>amdgpu</code> and <code>radeon</code> modules are <code>cik_support=</code> and <code>si_support=</code>. 
</p>
<p>They need to be set as kernel parameters or in a <i>modprobe</i> configuration file, and depend on the cards GCN version.
</p>
<p>You can use both parameters if you are unsure which kernel card you have.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../en/Core_utilities.html#Essentials" class="mw-redirect" title="Dmesg">dmesg</a> may indicate the correct kernel parameter to use: <code>[..] amdgpu 0000:01:00.0: Use radeon.cik_support=0 amdgpu.cik_support=1 to override</code>.</div>
<h5><span class="mw-headline" id="Set_module_parameters_in_kernel_command_line">Set module parameters in kernel command line</span></h5>
<p>Set one of the following <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>:
</p>
<ul>
<li>Southern Islands (SI): <code>radeon.si_support=0 amdgpu.si_support=1</code>
</li>
<li>Sea Islands (CIK): <code>radeon.cik_support=0 amdgpu.cik_support=1</code>
</li>
</ul>
<h4><span class="mw-headline" id="Specify_the_correct_module_order">Specify the correct module order</span></h4>
<p>Make sure <code>amdgpu</code> has been set as first module in the <a href="../en/Mkinitcpio.html#MODULES" title="Mkinitcpio">Mkinitcpio#MODULES</a> array, e.g. <code>MODULES=(amdgpu radeon)</code>.
</p>
<h5><span class="mw-headline" id="Set_module_parameters_in_modprobe.d">Set module parameters in modprobe.d</span></h5>
<p>Create the configuration <a href="../en/Kernel_module.html" class="mw-redirect" title="Modprobe">modprobe</a> files in <code>/etc/modprobe.d/</code>, see <span class="plainlinks archwiki-template-man" title="$ man 5 modprobe.d"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/modprobe.d.5">modprobe.d(5)</a></span> for syntax details.
</p>
<p>For Southern Islands (SI) use option <code>si_support=1</code>, for Sea Islands (CIK) use option <code>cik_support=1</code>, e.g.:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options amdgpu si_support=1
options amdgpu cik_support=1</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">options radeon si_support=0
options radeon cik_support=0</pre>
<p>Make sure <code>modconf</code> is in the <code>HOOKS</code> array in <code>/etc/mkinitcpio.conf</code> and <a href="../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">regenerate the initramfs</a>.
</p>
<h5><span class="mw-headline" id="Compile_kernel_which_supports_amdgpu_driver">Compile kernel which supports amdgpu driver</span></h5>
<p>When building or compiling a <a href="../en/Kernel.html" title="Kernel">kernel</a>, <code>CONFIG_DRM_AMDGPU_SI=Y</code> and/or <code>CONFIG_DRM_AMDGPU_CIK=Y</code> should be set in the config.
</p>
<h4><span class="mw-headline" id="Disable_loading_radeon_completely_at_boot">Disable loading radeon completely at boot</span></h4>
<p>The kernel may still probe and load the <code>radeon</code> module depending on the specific graphics chip involved, but the module is unnecessary to have loaded after confirming <code>amdgpu</code> works as expected. Reboot between each step to confirm it works before moving to the next step:
</p>
<ol>
<li>Use the module parameters on the kernel commandline method to ensure <code>amdgpu</code> works as expected</li>
<li>Use the <code>MODULES=(amdgpu)</code> mkinitcpio method but do <b>not</b> add <code>radeon</code> to the configuration</li>
<li>Test that <code>modprobe -r radeon</code> will remove the kernel module cleanly after logged into the desktop</li>
<li>Blacklist the <code>radeon</code> module from being probed by the kernel during second stage boot:</li>
</ol>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modprobe.d/radeon.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">blacklist radeon</pre>
<p>The output of <code>lsmod</code> and <code>dmesg</code> should now only show the amdgpu driver loading, radeon should not be present. The directory <code>/sys/module/radeon</code> should not exist.
</p>
<h3><span class="mw-headline" id="ACO_compiler">ACO compiler</span></h3>
<p>The <a rel="nofollow" class="external text" href="https://steamcommunity.com/games/221410/announcements/detail/1602634609636894200">ACO compiler</a> is an open source shader compiler created and developed by <a href="https://en.wikipedia.org/wiki/Valve_Corporation" class="extiw" title="wikipedia:Valve Corporation">Valve Corporation</a> to directly compete with the <a rel="nofollow" class="external text" href="https://llvm.org/">LLVM compiler</a>, the <a rel="nofollow" class="external text" href="https://github.com/GPUOpen-Drivers/AMDVLK">AMDVLK drivers</a>, as well as <a href="https://en.wikipedia.org/wiki/Windows_10" class="extiw" title="wikipedia:Windows 10">Windows 10</a>. It offers lesser compilation time and also performs better while gaming than LLVM and AMDVLK.
</p>
<p>Some benchmarks can be seen on <a rel="nofollow" class="external text" href="https://gist.github.com/pendingchaos/aba1e4c238cf039d17089f29a8c6aa63">GitHub</a> and Phoronix <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=radv-aco-llvm&amp;num=1">(1)</a> <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=radv-aco-gcn10&amp;num=1">(2)</a> <a rel="nofollow" class="external text" href="https://www.phoronix.com/scan.php?page=article&amp;item=mesa20radv-aco-amdvlk&amp;num=1">(3)</a>.
</p>
<p>Since <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mesa">mesa</a></span> version 20.2, the ACO compiler is enabled by default.
</p>
<h2><span class="mw-headline" id="Loading">Loading</span></h2>
<p>The <code>amdgpu</code> kernel module is supposed to load automatically on system boot.
</p>
<p>If it does not:
</p>
<ul>
<li>Make sure to <a href="#Enable_Southern_Islands_(SI)_and_Sea_Islands_(CIK)_support">#Enable Southern Islands (SI) and Sea Islands (CIK) support</a> when needed.</li>
<li>Make sure you have the latest <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=linux-firmware">linux-firmware</a></span> package installed. This driver requires the latest firmware for each model to successfully boot.</li>
<li>Make sure you do <b>not</b> have <code>nomodeset</code> or <code>vga=</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>, since <code>amdgpu</code> requires <a href="../en/Kernel_mode_setting.html" class="mw-redirect" title="KMS">KMS</a>.</li>
<li>Check that you have not disabled <code>amdgpu</code> by using any <a href="../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Kernel modules">kernel module blacklisting</a>.</li>
</ul>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a><b>This article or section is being considered for removal.</b><a href="../File:Tango-edit-cut.png" class="image"><img alt="Tango-edit-cut.png" src="../File:Tango-edit-cut.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Since <a rel="nofollow" class="external text" href="https://gitlab.archlinux.org/archlinux/mkinitcpio/mkinitcpio/-/releases/v32">mkinitcpio v32</a>, the <code>kms</code> hook is included by default, therefore most setups will have early loading enabled by default. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:AMDGPU">Talk:AMDGPU</a>)</div>
</div>
<p>It is possible it loads, but late, after the X server requires it. In this case:
</p>
<ul><li>See <a href="../en/Kernel_mode_setting.html#Early_KMS_start" title="Kernel mode setting">Kernel mode setting#Early KMS start</a>.</li></ul>
<h2><span class="mw-headline" id="Xorg_configuration">Xorg configuration</span></h2>
<p><a href="../en/Xorg.html" title="Xorg">Xorg</a> will automatically load the driver and it will use your monitor's EDID to set the native resolution. Configuration is only required for tuning the driver.
</p>
<p>If you want manual configuration, create <code>/etc/X11/xorg.conf.d/20-amdgpu.conf</code>, and add the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
     Identifier "AMD"
     MatchDriver "amdgpu"
     Driver "amdgpu"
EndSection</pre>
<p>Using this section, you can enable features and tweak the driver settings, see <span class="plainlinks archwiki-template-man" title="$ man 4 amdgpu"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/amdgpu.4">amdgpu(4)</a></span> first before setting driver options.
</p>
<h3><span class="mw-headline" id="Tear_free_rendering">Tear free rendering</span></h3>
<p><i>TearFree</i> controls tearing prevention using the hardware page flipping mechanism. By default, TearFree will be on for rotated outputs, outputs with RandR transforms applied, and for RandR 1.4 slave outputs, and off for everything else. Or you can configure it to be always on or always off with <code>true</code> or <code>false</code> respectively.
</p>
<pre>Option "TearFree" "true"
</pre>
<p>You can also enable TearFree temporarily with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a>: 
</p>
<pre>$ xrandr --output <i>output</i> --set TearFree on
</pre>
<p>Where <code><i>output</i></code> should look like <code>DisplayPort-0</code> or <code>HDMI-A-0</code> and can be acquired by running <code>xrandr -q</code>.
</p>
<h3><span class="mw-headline" id="DRI_level">DRI level</span></h3>
<p><i>DRI</i> sets  the maximum level of DRI to enable. Valid values are <i>2</i> for DRI2 or <i>3</i> for DRI3. The default is <i>3</i> for DRI3 if the <a href="../en/Xorg.html" title="Xorg">Xorg</a> version is &gt;=  1.18.3, otherwise DRI2 is used:
</p>
<pre>Option "DRI" "3"
</pre>
<h3><span class="mw-headline" id="Variable_refresh_rate">Variable refresh rate</span></h3>
<p>See <a href="../en/Variable_refresh_rate.html" title="Variable refresh rate">Variable refresh rate</a>.
</p>
<h3><span class="mw-headline" id="10-bit_color">10-bit color</span></h3>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Many applications may have graphical artifacts or crash when 10-bit color is enabled. This notably includes <a href="../en/Steam/Troubleshooting.html#Steam:_An_X_Error_occurred" title="Steam/Troubleshooting">Steam</a>, which crashes with an X Error.</div>
<p>Newer AMD cards support 10bpc color, but the default is 24-bit color and 30-bit color must be explicitly enabled. Enabling it can reduce visible banding/artifacts in gradients, if the applications support this too. To check if your monitor supports it search for "EDID" in your <a href="../en/Xorg.html#General" title="Xorg">Xorg log file</a> (e.g. <code>/var/log/Xorg.0.log</code> or <code>~/.local/share/xorg/Xorg.0.log</code>):
</p>
<pre>[   336.695] (II) AMDGPU(0): EDID for output DisplayPort-0
[   336.695] (II) AMDGPU(0): EDID for output DisplayPort-1
[   336.695] (II) AMDGPU(0): Manufacturer: DEL  Model: a0ec  Serial#: 123456789
[   336.695] (II) AMDGPU(0): Year: 2018  Week: 23
[   336.695] (II) AMDGPU(0): EDID Version: 1.4
[   336.695] (II) AMDGPU(0): Digital Display Input
<b>[   336.695] (II) AMDGPU(0): 10 bits per channel</b>
</pre>
<p>To check whether it is currently enabled search for "Depth"):
</p>
<pre>[   336.618] (**) AMDGPU(0): Depth 30, (--) framebuffer bpp 32
[   336.618] (II) AMDGPU(0): Pixel depth = 30 bits stored in 4 bytes (32 bpp pixmaps)
</pre>
<p>With the default configuration it will instead say the depth is 24, with 24 bits stored in 4 bytes.
</p>
<p>To check whether 10-bit works, exit Xorg if you have it running and run <code>Xorg -retro</code> which will display a black and white grid, then press <code>Ctrl-Alt-F1</code> and <code>Ctrl-C</code> to exit X, and run <code>Xorg -depth 30 -retro</code>. If this works fine, then 10-bit is working.
</p>
<p>To launch in 10-bit via <code>startx</code>, use <code>startx -- -depth 30</code>. To permanently enable it, create or add to:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Screen"
	Identifier "asdf"
	DefaultDepth 30
EndSection</pre>
<h3><span class="mw-headline" id="Reduce_output_latency">Reduce output latency</span></h3>
<p>If you want to minimize latency you can disable page flipping and tear free:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/20-amdgpu.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "OutputClass"
     Identifier "AMD"
     MatchDriver "amdgpu"
     Driver "amdgpu"
     Option "EnablePageFlip" "off"
     Option "TearFree" "false"
EndSection</pre>
<p>See <a href="../en/Gaming.html#Reducing_DRI_latency" title="Gaming">Gaming#Reducing DRI latency</a> to further reduce latency.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Setting these options may cause tearing and short-lived artifacts to appear.</div>
<h2><span class="mw-headline" id="Features">Features</span></h2>
<h3><span class="mw-headline" id="Video_acceleration">Video acceleration</span></h3>
<p>See <a href="../en/Hardware_video_acceleration.html" title="Hardware video acceleration">Hardware video acceleration</a>.
</p>
<h3><span class="mw-headline" id="Monitoring">Monitoring</span></h3>
<p>Monitoring your GPU is often used to check the temperature and also the P-states of your GPU.
</p>
<h4><span class="mw-headline" id="CLI">CLI</span></h4>
<ul><li>
<b>amdgpu_top</b> — Tool to display AMDGPU usage</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Umio-Yasuno/amdgpu_top">https://github.com/Umio-Yasuno/amdgpu_top</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu_top/">amdgpu_top</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>nvtop</b> — GPUs process monitoring for AMD, Intel and NVIDIA</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Syllo/nvtop">https://github.com/Syllo/nvtop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nvtop">nvtop</a></span>
</dd></dl>
<ul><li>
<b>radeontop</b> — A GPU utilization viewer, both for the total activity percent and individual blocks</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/clbr/radeontop">https://github.com/clbr/radeontop</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=radeontop">radeontop</a></span>
</dd></dl>
<h4><span class="mw-headline" id="GUI">GUI</span></h4>
<ul><li>
<b>amdgpu_top</b> — Tool to display AMDGPU usage</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Umio-Yasuno/amdgpu_top">https://github.com/Umio-Yasuno/amdgpu_top</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu_top/">amdgpu_top</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>AmdGuid</b> — A basic fan control GUI fully written in Rust.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Eraden/amdgpud">https://github.com/Eraden/amdgpud</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdguid-wayland-bin/">amdguid-wayland-bin</a></span><sup><small>AUR</small></sup>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdguid-glow-bin/">amdguid-glow-bin</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>TuxClocker</b> — A Qt5 monitoring and overclocking tool.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Lurkki14/tuxclocker">https://github.com/Lurkki14/tuxclocker</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tuxclocker/">tuxclocker</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h4><span class="mw-headline" id="Manually">Manually</span></h4>
<p>To check your GPU's P-states, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>To monitor your GPU, execute:
</p>
<pre>$ watch -n 0.5  cat /sys/kernel/debug/dri/0/amdgpu_pm_info
</pre>
<p>To check your GPU utilization, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/gpu_busy_percent
</pre>
<p>To check your GPU frequency, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_dpm_sclk
</pre>
<p>To check your GPU temperature, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/hwmon/hwmon*/temp1_input
</pre>
<p>To check your VRAM frequency, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/pp_dpm_mclk
</pre>
<p>To check your VRAM usage, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/mem_info_vram_used
</pre>
<p>To check your VRAM size, execute:
</p>
<pre>$ cat /sys/class/drm/card0/device/mem_info_vram_total
</pre>
<h3><span class="mw-headline" id="Overclocking">Overclocking</span></h3>
<p>Since Linux 4.17, it is possible to adjust clocks and voltages of the graphics card via <code>/sys/class/drm/card0/device/pp_od_clk_voltage</code>.
</p>
<h4><span class="mw-headline" id="Boot_parameter">Boot parameter</span></h4>
<p>It is required to unlock access to adjust clocks and voltages in sysfs by appending the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">Kernel parameter</a> <code>amdgpu.ppfeaturemask=0xffffffff</code>.
</p>
<p>Not all bits are defined, and new features may be added over time. Setting all 32 bits may enable unstable features that cause problems such as screen flicker or broken resume from suspend. It should be sufficient to set the PP_OVERDRIVE_MASK bit, 0x4000, in combination with the default ppfeaturemask. To compute a reasonable parameter for your system, execute:
</p>
<pre>$ printf 'amdgpu.ppfeaturemask=0x%x\n' "$(($(cat /sys/module/amdgpu/parameters/ppfeaturemask) | 0x4000))"
</pre>
<h4>
<span id="Manual_.28default.29"></span><span class="mw-headline" id="Manual_(default)">Manual (default)</span>
</h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> In sysfs, paths like <code>/sys/class/drm/...</code> are just symlinks and may change between reboots. Persistent locations can be found in <code>/sys/devices/</code>, e.g. <code>/sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/</code>. Adjust the commands accordingly for a reliable result.</div>
<p>To set the GPU clock for the maximum P-state 7 on e.g. a Polaris GPU to 1209MHz and 900mV voltage, run:
</p>
<pre># echo "s 7 1209 900" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>The same procedure can be applied to the VRAM, e.g. maximum P-state 2 on Polaris 5xx series cards:
</p>
<pre># echo "m 2 1850 850" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Double check the entered values, as mistakes might instantly cause fatal hardware damage!</div>
<p>To apply, run: 
</p>
<pre># echo "c" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>To check if it worked out, read out clocks and voltage under 3D load:
</p>
<pre># watch -n 0.5  cat /sys/kernel/debug/dri/0/amdgpu_pm_info
</pre>
<p>You can reset to the default values using:
</p>
<pre># echo "r" &gt; /sys/class/drm/card0/device/pp_od_clk_voltage
</pre>
<p>It is also possible to forbid the driver so switch to certain P-states, e.g. to workaround problems with deep powersaving P-states like flickering artifacts or stutter. To force the highest VRAM P-state on a Polaris RX 5xx card, while still allowing the GPU itself to run with lower clocks, run:
</p>
<pre># echo "manual" &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
# echo "2" &gt;  /sys/class/drm/card0/device/pp_dpm_mclk
</pre>
<p>Allow only the three highest GPU P-states:
</p>
<pre># echo "5 6 7" &gt;  /sys/class/drm/card0/device/pp_dpm_sclk
</pre>
<p>To set the allowed maximum power consumption of the GPU to e.g. 50 Watts, run: 
</p>
<pre># echo <b>50</b>000000 &gt; /sys/class/drm/card0/device/hwmon/hwmon0/power1_cap
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The above procedure was tested with a Polaris RX 560 card. There may be different behavior or bugs with different GPUs.</div>
<h4><span class="mw-headline" id="Assisted">Assisted</span></h4>
<p>If you are not inclined to fully manually overclock your GPU, there are some overclocking tools that are offered by the community to assist you to overclock and monitor your AMD GPU.
</p>
<h5><span class="mw-headline" id="CLI_tools">CLI tools</span></h5>
<ul><li>
<b>amdgpu-clocks</b> — A script that can be used to monitor and set custom power states for AMD GPUs. It also offers a Systemd service to apply the settings automatically upon boot.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/sibradzic/amdgpu-clocks">https://github.com/sibradzic/amdgpu-clocks</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/amdgpu-clocks-git/">amdgpu-clocks-git</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h5><span class="mw-headline" id="GUI_tools">GUI tools</span></h5>
<ul><li>
<b>TuxClocker</b> — A Qt5 monitoring and overclocking tool.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/Lurkki14/tuxclocker">https://github.com/Lurkki14/tuxclocker</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tuxclocker/">tuxclocker</a></span><sup><small>AUR</small></sup>
</dd></dl>
<ul><li>
<b>CoreCtrl</b> — A GUI overclocking tool with a WattMan-like UI that supports per-application profiles.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://gitlab.com/corectrl/corectrl">https://gitlab.com/corectrl/corectrl</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=corectrl">corectrl</a></span>
</dd></dl>
<ul><li>
<b>LACT</b> — A GTK tool to view information and control your AMD GPU.</li></ul>
<dl><dd>
<a rel="nofollow" class="external free" href="https://github.com/ilya-zlobintsev/LACT">https://github.com/ilya-zlobintsev/LACT</a> || <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/lact/">lact</a></span><sup><small>AUR</small></sup>
</dd></dl>
<h4><span class="mw-headline" id="Startup_on_boot">Startup on boot</span></h4>
<p>If you want your settings to apply automatically upon boot, consider looking at this <a rel="nofollow" class="external text" href="https://www.reddit.com/r/Amd/comments/agwroj/how_to_overclock_your_amd_gpu_on_linux/">Reddit thread</a> to configure and apply your settings on boot.
</p>
<h3><span class="mw-headline" id="Power_profiles">Power profiles</span></h3>
<p>AMDGPU offers several optimizations via power profiles, one of the most commonly used is the compute mode for OpenCL intensive applications. Available power profiles can be listed with:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">cat /sys/class/drm/card0/device/pp_power_profile_mode</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">NUM        MODE_NAME     SCLK_UP_HYST   SCLK_DOWN_HYST SCLK_ACTIVE_LEVEL     MCLK_UP_HYST   MCLK_DOWN_HYST MCLK_ACTIVE_LEVEL
  0   BOOTUP_DEFAULT:        -                -                -                -                -                -
  1   3D_FULL_SCREEN:        0              100               30                0              100               10
  2     POWER_SAVING:       10                0               30                -                -                -
  3            VIDEO:        -                -                -               10               16               31
  4               VR:        0               11               50                0              100               10
  5        COMPUTE *:        0                5               30               10               60               25
  6           CUSTOM:        -                -                -                -                -                -
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <code>card0</code> identifies a specific GPU in your machine, in case of multiple GPUs be sure to address the right one.</div>
<p>To use a specific power profile you should first enable manual control over them with:
</p>
<pre># echo "manual" &gt; /sys/class/drm/card0/device/power_dpm_force_performance_level
</pre>
<p>Then to select a power profile by writing the NUM field associated with it, e.g. to enable COMPUTE run:
</p>
<pre># echo "5" &gt; /sys/class/drm/card0/device/pp_power_profile_mode
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Power profile changes should be reapplied at every boot, see <a href="#Startup_on_boot">#Startup on boot</a> to automate this.</div>
<h3><span class="mw-headline" id="Enable_GPU_display_scaling">Enable GPU display scaling</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="../en/Xrandr.html" title="Xrandr">xrandr</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Not specific to AMDGPU. (Discuss in <a href='../en/Talk:AMDGPU.html#Moving_"Enable_GPU_display_scaling"_to_xrandr' title="Talk:AMDGPU">Talk:AMDGPU#Moving "Enable GPU display scaling" to xrandr</a>)</div>
</div>
<p>To avoid the usage of the scaler which is built in the display, and use the GPU own scaler instead, when not using the native resolution of the monitor, execute:
</p>
<pre>$ xrandr --output <i>output</i> --set "scaling mode" <i>scaling_mode</i>
</pre>
<p>Possible values for <code>"scaling mode"</code> are: <code>None</code>, <code>Full</code>, <code>Center</code>, <code>Full aspect</code>.
</p>
<ul><li>To show the available outputs and settings, execute:</li></ul>
<pre>$ xrandr --prop
</pre>
<ul><li>To set <code>scaling mode = Full aspect</code> for just every available output, execute:</li></ul>
<pre>$ for output in $(xrandr --prop | grep -E -o -i "^[A-Z\-]+-[0-9]+"); do xrandr --output "$output" --set "scaling mode" "Full aspect"; done
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Xorg_or_applications_will_not_start">Xorg or applications will not start</span></h3>
<ul>
<li>"(EE) AMDGPU(0): [DRI2] DRI2SwapBuffers: drawable has no back or front?" error after opening <i>glxgears</i>, can open Xorg server but OpenGL applications crash.</li>
<li>"(EE) AMDGPU(0): Given depth (32) is not supported by amdgpu driver" error, Xorg will not start.</li>
</ul>
<p>Setting the screen's depth under Xorg to 16 or 32 will cause problems/crash. To avoid that, you should use a standard screen depth of 24 by adding this to your "screen" section:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/X11/xorg.conf.d/10-screen.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Section "Screen"
       Identifier     "Screen"
       DefaultDepth    24
       SubSection      "Display"
               Depth   24
       EndSubSection
EndSection
</pre>
<h3><span class="mw-headline" id="Screen_artifacts_and_frequency_problem">Screen artifacts and frequency problem</span></h3>
<p><a href="../en/ATI.html#Dynamic_power_management" title="ATI">Dynamic power management</a> may cause screen artifacts to appear when displaying to monitors at higher frequencies (anything above 60Hz) due to issues in the way GPU clock speeds are managed<a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=96868">[1]</a><a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/234">[2]</a>.
</p>
<p>A workaround <a rel="nofollow" class="external autonumber" href="https://bugs.freedesktop.org/show_bug.cgi?id=96868#c13">[3]</a> is saving <code>high</code> or <code>low</code> in <code>/sys/class/drm/card0/device/power_dpm_force_performance_level</code>.
</p>
<p>To make it persistent, you may create a <a href="../en/Udev.html" title="Udev">udev</a> rule:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/30-amdgpu-pm.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">KERNEL=="card0", SUBSYSTEM=="drm", DRIVERS=="amdgpu", ATTR{device/power_dpm_force_performance_level}="high"
</pre>
<p>To determine the <code>KERNEL</code> name execute: 
</p>
<pre>$ udevadm info --attribute-walk /sys/class/drm/card0 | grep "KERNEL="
</pre>
<p>There is also a GUI solution <a rel="nofollow" class="external autonumber" href="https://github.com/marazmista/radeon-profile">[4]</a> where you can manage the "power_dpm" with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-profile-git/">radeon-profile-git</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/radeon-profile-daemon-git/">radeon-profile-daemon-git</a></span><sup><small>AUR</small></sup>.
</p>
<h4><span class="mw-headline" id="Artifacts_in_Chromium">Artifacts in Chromium</span></h4>
<p>If you see artifacts in <a href="../en/Chromium.html" title="Chromium">Chromium</a>, forcing the vulkan-based backend might help. Go to <code>chrome://flags</code> and <i>enable</i> <code>#ignore-gpu-blocklist</code> and <code>#enable-vulkan</code>.
</p>
<h3>
<span id="R9_390_series_poor_performance_and.2For_instability"></span><span class="mw-headline" id="R9_390_series_poor_performance_and/or_instability">R9 390 series poor performance and/or instability</span>
</h3>
<p>If you experience issues <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/1222">[5]</a> with a AMD R9 390 series graphics card, set <code>radeon.cik_support=0 radeon.si_support=0 amdgpu.cik_support=1 amdgpu.si_support=1 amdgpu.dc=1</code> as <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> to force the use of amdgpu driver instead of radeon.
</p>
<p>If it still does not work, disabling DPM might help, add <code>radeon.cik_support=0 radeon.si_support=0 amdgpu.cik_support=1 amdgpu.si_support=1</code> to the <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a>.
</p>
<h3>
<span id="Freezes_with_.22.5Bdrm.5D_IP_block:gmc_v8_0_is_hung.21.22_kernel_error"></span><span class="mw-headline" id='Freezes_with_"[drm]_IP_block:gmc_v8_0_is_hung!"_kernel_error'>Freezes with "[drm] IP block:gmc_v8_0 is hung!" kernel error</span>
</h3>
<p>If you experience freezes and kernel crashes during a GPU intensive task with the kernel error " [drm] IP block:gmc_v8_0 is hung!" <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/issues/226">[6]</a>, a workaround is to set <code>amdgpu.vm_update_mode=3</code> as <a href="../en/Kernel_parameters.html" title="Kernel parameters">kernel parameters</a> to force the GPUVM page tables update to be done using the CPU. Downsides are listed here <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/226#note_308665">[7]</a>.
</p>
<h3><span class="mw-headline" id="Cursor_corruption">Cursor corruption</span></h3>
<p>If you experience issues with the mouse cursor sometimes not rendering properly, set <code>Option "SWCursor" "True"</code> in the <code>"OutputClass"</code> section of the <code>/etc/X11/xorg.conf.d/20-amdgpu.conf</code> configuration file. For Wayland, set global environment variable <code>KWIN_FORCE_SW_CURSOR=1</code>.
</p>
<p>If you are using <code>xrandr</code> for scaling and the cursor is flickering or disappearing, you may be able to fix it by setting the <code>TearFree</code> property: <code>xrandr --output HDMI-A-0 --set TearFree on</code>.
</p>
<h3><span class="mw-headline" id="Screen_flickering_white_when_using_KDE">Screen flickering white when using KDE</span></h3>
<p>When you change resolution or connect to an external monitor, if the screen flickers or stays white, add <code>amdgpu.sg_display=0</code> as a <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a>.
</p>
<h3><span class="mw-headline" id="System_freeze_or_crash_when_gaming_on_Vega_cards">System freeze or crash when gaming on Vega cards</span></h3>
<p><a href="../en/ATI.html#Dynamic_power_management" title="ATI">Dynamic power management</a> may cause a complete system freeze whilst gaming due to issues in the way GPU clock speeds are managed. <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/716">[8]</a> A workaround is to disable dynamic power management, see <a href="../en/ATI.html#Dynamic_power_management" title="ATI">ATI#Dynamic power management</a> for details.
</p>
<h3>
<span id="WebRenderer_.28Firefox.29_corruption"></span><span class="mw-headline" id="WebRenderer_(Firefox)_corruption">WebRenderer (Firefox) corruption</span>
</h3>
<p>Artifacts and other anomalies may present themselves (e.g. inability to select extension options) when <a href="../en/Firefox/Tweaks.html#WebRender" title="Firefox/Tweaks">WebRenderer</a> is force enabled by the user. Workaround is to fall back to OpenGL compositing.
</p>
<h3>
<span id="Double-speed_or_.22chipmunk.22_audio.2C_or_no_audio_when_a_4K.4060Hz_device_is_connected"></span><span class="mw-headline" id='Double-speed_or_"chipmunk"_audio,_or_no_audio_when_a_4K@60Hz_device_is_connected'>Double-speed or "chipmunk" audio, or no audio when a 4K@60Hz device is connected</span>
</h3>
<p>This is sometimes caused by a communication issue between an AMDGPU device and a 4K display connected over HDMI. A possible workaround is to enable HDR or "Ultra HD Deep Color" via the display's built-in settings. On many Android based TVs, this means setting this to "Standard" instead of "Optimal".
</p>
<h3>
<span id="Issues_with_power_management_.2F_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card"></span><span class="mw-headline" id="Issues_with_power_management_/_dynamic_re-activation_of_a_discrete_amdgpu_graphics_card">Issues with power management / dynamic re-activation of a discrete amdgpu graphics card</span>
</h3>
<p>If you encounter issues similar to <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/1820">[9]</a>, you can workaround the issue by setting the <a href="../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> <code>amdgpu.runpm=0</code>, which prevents the dGPU from being powered down dynamically at runtime.
</p>
<h3><span class="mw-headline" id="kfd:_amdgpu:_TOPAZ_not_supported_in_kfd">kfd: amdgpu: TOPAZ not supported in kfd</span></h3>
<p>In the system journal or the kernel message keyring a critical level error message 
</p>
<pre>kfd: amdgpu: TOPAZ not supported in kfd
</pre>
<p>may appear. If you are not planning to use <a href="../en/GPGPU.html#ROCm" title="GPGPU">Radeon Open Compute</a>, this can be safely ignored. It is not supported in TOPAZ, as they are old GPUs. <a rel="nofollow" class="external autonumber" href="https://github.com/RadeonOpenCompute/ROCm/issues/1148#issuecomment-747849592">[10]</a> <a rel="nofollow" class="external autonumber" href="https://www.reddit.com/r/linuxquestions/comments/yhbbiz/kfd_kfd_amdgpu_topaz_not_supported_in_kfd/">[11]</a>
</p>
<h3>
<span id="High_idle_power_draw_due_to_MCLK_locked_at_MAX_.281000MHz.29.2C_or_MIN_.2896MHz.29_causing_low_game_performance_.28on_6.4_kernel.29"></span><span class="mw-headline" id="High_idle_power_draw_due_to_MCLK_locked_at_MAX_(1000MHz),_or_MIN_(96MHz)_causing_low_game_performance_(on_6.4_kernel)">High idle power draw due to MCLK locked at MAX (1000MHz), or MIN (96MHz) causing low game performance (on 6.4 kernel)</span>
</h3>
<p>On high resolutions and refresh rates, the MCLK (vram / memory clock) may be locked at the highest clock rate (1000MHz) <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/1403">[12]</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2646">[13]</a> causing higher GPU idle power draw. On Linux kernel 6.4.x, MCLK clocks at the lowest (96MHz), causing low performance in games <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2657">[14]</a> <a rel="nofollow" class="external autonumber" href="https://gitlab.freedesktop.org/drm/amd/-/issues/2611">[15]</a>. 
</p>
<p>This is likely due to a monitor not using Coordinated Video Timings (CVT) with a low V-Blank value for the affected resolutions and refresh rates, see <a rel="nofollow" class="external text" href="https://gist.github.com/Rend0e/3bddac4285dc1f4fbe303f326f36f6cc">this gist</a> for a workaround.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a href="https://wiki.gentoo.org/wiki/AMDGPU" class="extiw" title="gentoo:AMDGPU">Gentoo:AMDGPU</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Graphics.html" title="Category:Graphics">Graphics</a></li>
<li><a href="../en/Category:X_server.html" title="Category:X server">X server</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Sections_flagged_with_Template:Remove.html" title="Category:Sections flagged with Template:Remove">Sections flagged with Template:Remove</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=AMDGPU&amp;oldid=786564">https://wiki.archlinux.org/index.php?title=AMDGPU&amp;oldid=786564</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 31 August 2023, at 16:53.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
