<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>BIND - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-BIND rootpage-BIND skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Configuration</div>
			</a>
			
				<button aria-controls="toc-Configuration-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Configuration subsection
				</button>
			
			<ul id="toc-Configuration-sublist" class="sidebar-toc-list">
				<li id="toc-Restrict_access_to_localhost" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Restrict_access_to_localhost">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Restrict access to localhost</div>
			</a>
			
			<ul id="toc-Restrict_access_to_localhost-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Set_up_DNS_forwarding" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Set_up_DNS_forwarding">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Set up DNS forwarding</div>
			</a>
			
			<ul id="toc-Set_up_DNS_forwarding-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Serve_DNS_over_TLS_or_HTTPS" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Serve_DNS_over_TLS_or_HTTPS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Serve DNS over TLS or HTTPS</div>
			</a>
			
			<ul id="toc-Serve_DNS_over_TLS_or_HTTPS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-A_configuration_template_for_running_a_domain" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#A_configuration_template_for_running_a_domain">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>A configuration template for running a domain</div>
			</a>
			
				<button aria-controls="toc-A_configuration_template_for_running_a_domain-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle A configuration template for running a domain subsection
				</button>
			
			<ul id="toc-A_configuration_template_for_running_a_domain-sublist" class="sidebar-toc-list">
				<li id="toc-Creating_a_zonefile" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Creating_a_zonefile">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Creating a zonefile</div>
			</a>
			
			<ul id="toc-Creating_a_zonefile-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuring_master_server" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configuring_master_server">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Configuring master server</div>
			</a>
			
			<ul id="toc-Configuring_master_server-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Allow_recursion" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Allow_recursion">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Allow recursion</div>
			</a>
			
			<ul id="toc-Allow_recursion-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuring_BIND_to_serve_DNSSEC_signed_zones" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Configuring_BIND_to_serve_DNSSEC_signed_zones">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Configuring BIND to serve DNSSEC signed zones</div>
			</a>
			
			<ul id="toc-Configuring_BIND_to_serve_DNSSEC_signed_zones-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Automatically_listen_on_new_interfaces" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Automatically_listen_on_new_interfaces">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>Automatically listen on new interfaces</div>
			</a>
			
			<ul id="toc-Automatically_listen_on_new_interfaces-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Running_BIND_in_a_chrooted_environment" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Running_BIND_in_a_chrooted_environment">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7</span>Running BIND in a chrooted environment</div>
			</a>
			
				<button aria-controls="toc-Running_BIND_in_a_chrooted_environment-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Running BIND in a chrooted environment subsection
				</button>
			
			<ul id="toc-Running_BIND_in_a_chrooted_environment-sublist" class="sidebar-toc-list">
				<li id="toc-Creating_the_jail_house" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Creating_the_jail_house">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.1</span>Creating the jail house</div>
			</a>
			
			<ul id="toc-Creating_the_jail_house-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Service_unit" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Service_unit">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">7.2</span>Service unit</div>
			</a>
			
			<ul id="toc-Service_unit-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Serve_the_root_zone_locally" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Serve_the_root_zone_locally">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">8</span>Serve the root zone locally</div>
			</a>
			
			<ul id="toc-Serve_the_root_zone_locally-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">9</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/BIND.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:BIND.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/BIND.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=BIND&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=BIND&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/BIND.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=BIND&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=BIND&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a></li>
</ul>
</div>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a><b>This article or section needs language, wiki syntax or style improvements. See <a href="../en/Help:Style.html" title="Help:Style">Help:Style</a> for reference.</b><a href="../File:Tango-edit-clear.png" class="image"><img alt="Tango-edit-clear.png" src="../File:Tango-edit-clear.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Numerous style and content issues. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:BIND">Talk:BIND</a>)</div>
</div>
<p><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/bind/">BIND</a> (or named) is the most widely used Domain Name System (DNS) server.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The organization developing BIND is serving security notices to paying customers up to four days before Linux distributions or the general public.<a rel="nofollow" class="external autonumber" href="https://kb.isc.org/article/AA-00861/0/ISC-Software-Defect-and-Security-Vulnerability-Disclosure-Policy.html">[1]</a>
</div>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bind">bind</a></span> package.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> the <code>named.service</code> systemd unit.
</p>
<p>To use the DNS server locally, use the <code>127.0.0.1</code> nameserver (meaning clients like Firefox resolve via 127.0.0.1), see <a href="../en/Domain_name_resolution.html" title="Domain name resolution">Domain name resolution</a>.
This will however require you to <a href="#Allow_recursion">#Allow recursion</a> while a firewall might block outside queries to your local named.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>BIND is configured in <code>/etc/named.conf</code>. The available options are documented in <span class="plainlinks archwiki-template-man" title="$ man 5 named.conf"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/named.conf.5">named.conf(5)</a></span>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">Reload</a> the <code>named.service</code> unit to apply configuration changes.
</p>
<h3><span class="mw-headline" id="Restrict_access_to_localhost">Restrict access to localhost</span></h3>
<p>BIND by default listens on port 53 of all interfaces and IP addresses. To only allow connections from localhost add the following line to the <code>options</code> section in <code>/etc/named.conf</code>:
</p>
<pre>listen-on { 127.0.0.1; };
listen-on-v6 { ::1; };
</pre>
<h3><span class="mw-headline" id="Set_up_DNS_forwarding">Set up DNS forwarding</span></h3>
<p>To make BIND forward DNS queries to another DNS server add the <code>forwarders</code> clause to the <code>options</code> section.
</p>
<p>Example to make BIND forward to the Google Public DNS servers:
</p>
<pre>forwarders {
    8.8.8.8; 2001:4860:4860::8888;
    8.8.4.4; 2001:4860:4860::8844;
};
</pre>
<p>(As of 9.18, only plaintext DNS servers are supported as forwarders.)
</p>
<h3><span class="mw-headline" id="Serve_DNS_over_TLS_or_HTTPS">Serve DNS over TLS or HTTPS</span></h3>
<p>To enable serving DNS over TLS or HTTPS in BIND 9.18, define a <a rel="nofollow" class="external text" href="https://downloads.isc.org/isc/bind9/9.18.0/doc/arm/html/reference.html#tls">tls</a> block specifying your certificate, then add <a rel="nofollow" class="external text" href="https://downloads.isc.org/isc/bind9/9.18.0/doc/arm/html/reference.html#interfaces">listen-on</a> clauses enabling DNS over TLS and HTTPS listeners (as well as a standard DNS listener).
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/named.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">tls mycert {
    cert-file "&lt;path&gt;.crt";
    key-file "&lt;path&gt;.key";
};

options {
    // Standard port 53 listeners need to be re-added explicitly
    listen-on    { any; };
    listen-on-v6 { any; };
    
    // Add a DNS over TLS listener on standard port 853
    listen-on    tls mycert { any; };
    listen-on-v6 tls mycert { any; };
    
    // Add a DNS over HTTPS listener on custom port
    listen-on    port 9443 tls mycert http default { any; };
    listen-on-v6 port 9443 tls mycert http default { any; };
    
    // If needed, add a cleartext HTTP listener for a reverse proxy
    //listen-on    port 8443 tls none http default { 127.0.0.1; };
    //listen-on-v6 port 8443 tls none http default { ::1; };
};
...</pre>
<p>Note that <code>tls{}</code> is defined at the top level, <i>not</i> inside the <code>options{}</code> block.
</p>
<h2><span class="mw-headline" id="A_configuration_template_for_running_a_domain">A configuration template for running a domain</span></h2>
<p>Following is a simple home nameserver being set up, using <i>domain.tld</i> as the domain being served world-wide like this wiki's <i>archlinux.org</i> domain is.
</p>
<p>A more elaborate example is <a rel="nofollow" class="external text" href="https://www.howtoforge.com/two_in_one_dns_bind9_views">DNS server with BIND9</a>, while <a rel="nofollow" class="external text" href="https://www.brennan.id.au/08-Domain_Name_System_BIND.html#yourdomain">this shows</a> how to set up internal network name resolution.
</p>
<h3><span class="mw-headline" id="Creating_a_zonefile">Creating a zonefile</span></h3>
<p>Create <code>/var/named/domain.tld.zone</code>.
</p>
<pre>$ORIGIN domain.tld.
$TTL 2h

@               SOA     ns1 hostmaster (
                                2018111111 ; Serial
                                8h         ; Refresh
                                30m        ; Retry
                                1w         ; Expire
                                1h )       ; Negative Cache TTL
                NS      ns1
                NS      ns2
                
@               A       203.0.113.1
                AAAA    2001:db8:113::1
                MX      10 mail
                TXT     "v=spf1 mx"

www             A       203.0.113.1
                AAAA    2001:db8:113::1

ns1             A       203.0.113.4
                AAAA    2001:db8:113::4

ns2             A       198.51.100.5
                AAAA    2001:db8:5100::5

mail            A       198.51.100.6
                AAAA    2001:db8:5100::6
imap            CNAME   mail
smtp            CNAME   mail
</pre>
<p><code>$ORIGIN</code> defines the default suffix for all names which do not already end with a <code>.</code> (dot), e.g. <code>mail</code> will be expanded to <code>mail.$ORIGIN</code> ⇒ <code>mail.domain.tld.</code> everywhere.
</p>
<p><code>$TTL</code> defines the default time-to-live (i.e. cache expiry time) for all records which do not have their own TTL specified. Here it is 2 hours.
</p>
<p>Serial must be <b>incremented</b> manually before reloading named every time you change a resource record for the zone. Otherwise secondary servers (replicas or slaves) will not re-transfer the zone: they only do it if the serial is <b>greater</b> than that of the last time they transferred the zone. This example uses the somewhat common <code>YYYYMMDDXX</code> format, but this is not required; the serial number can also just start at 1.
</p>
<h3><span class="mw-headline" id="Configuring_master_server">Configuring master server</span></h3>
<p>Add your zone to <code>/etc/named.conf</code>:
</p>
<pre>zone "domain.tld" IN {
        type master;
        file "domain.tld.zone";
        allow-update { none; };
};
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Reload">Reload</a> the <code>named.service</code> unit to apply the configuration change.
</p>
<h2><span class="mw-headline" id="Allow_recursion">Allow recursion</span></h2>
<p>If you are running your own DNS server, you might as well use it for all DNS lookups, or even <a href="#Serve_the_root_zone_locally">#Serve the root zone locally</a> by yourself. The former will require the ability to do <i>recursive</i> lookups.  In order to prevent <a rel="nofollow" class="external text" href="https://www.us-cert.gov/ncas/alerts/TA13-088A">DNS Amplification Attacks</a>, recursion is turned off by default for most resolvers.  The default Arch <code>/etc/named.conf</code> file allows for recursion only on the loopback interface:
</p>
<pre>allow-recursion { 127.0.0.1; ::1; };
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> LAN networking is not recursive. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:BIND">Talk:BIND</a>)</div>
</div>
<p>If you want to provide name service for your local network; e.g. 192.168.0.0/24, you must add the appropriate range of IP addresses to <code>/etc/named.conf</code>:
</p>
<pre>allow-recursion {
    192.168.0.0/24;
    fd01:2345:6789::/64;
    127.0.0.1;
    ::1;
};
</pre>
<h2><span class="mw-headline" id="Configuring_BIND_to_serve_DNSSEC_signed_zones">Configuring BIND to serve DNSSEC signed zones</span></h2>
<p><a href="../en/DNSSEC.html" title="DNSSEC">DNSSEC</a> validation is enabled by default. Do not forget to check that "edns" is not disabled.
</p>
<p>On master DNS server:
</p>
<ul><li>generate KSK and ZSK keys:</li></ul>
<pre> $ dnssec-keygen -a NSEC3RSASHA1 -b 2048 -n ZONE example.com
 $ dnssec-keygen -f KSK -a NSEC3RSASHA1 -b 4096 -n ZONE example.com
</pre>
<ul><li>change zone configuration:</li></ul>
<pre> zone "example.com" {
       type master;
       allow-transfer { ... };
       auto-dnssec maintain;
       inline-signing yes;
       key-directory "master/";
       file "master/example.com.zone";
 };
</pre>
<p>Now bind will sign zone automatically. (This example assumes that all required files are in /var/named/master/)
</p>
<p>Then you should pass DS records (from dsset-example.com. file) to parent zone owner probably using your registrar website. It glues parent zone with your KSK.
</p>
<p>KSK (and corresponding DS records) should be changed rarely because it needs manual intervention, ZSK can be changed more often because this key is usually shorter to be faster in signature checking.
</p>
<p>You can schedule old ZSK key expiration and generate new one using:
</p>
<pre> $ dnssec-settime -I +172800 -D +345600 Kexample.com.+000+111111.key
 $ dnssec-keygen -S Kexample.com.+000+111111.key -i 152800
</pre>
<p>Bind should automatically use new ZSK key at appropriate time.
</p>
<p>There are external mechanisms such as OpenDNSSEC with fully-automatic key rollover available.
</p>
<h2><span class="mw-headline" id="Automatically_listen_on_new_interfaces">Automatically listen on new interfaces</span></h2>
<p>By default bind scan for new interfaces and stop listening on interfaces which no longer exist every hour. You can tune this value by adding :
</p>
<pre>interface-interval &lt;rescan-timeout-in-minutes&gt;;
</pre>
<p>parameter into <code>named.conf</code> options section. Max value is 28 days. (40320 min) <br>
You can disable this feature by setting its value to 0.
</p>
<p>Then restart the service.
</p>
<h2><span class="mw-headline" id="Running_BIND_in_a_chrooted_environment">Running BIND in a chrooted environment</span></h2>
<p>Running in a <a href="../en/Chroot.html" title="Chroot">chroot</a> environment is not required but improves security.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <code>/srv/</code> is an odd place for chroots, <code>/var/lib/</code> would be a more common place. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:BIND">Talk:BIND</a>)</div>
</div>
<h3><span class="mw-headline" id="Creating_the_jail_house">Creating the jail house</span></h3>
<p>In order to do this, we first need to create a place to keep the jail, we shall use <code>/srv/named</code>, and then put the required files into the jail.
</p>
<pre># mkdir -p /srv/named/{dev,etc,usr/lib/engines,var/{run,log,named}}
</pre>
<p>Copy over required system files:
</p>
<pre># cp -av /etc/{localtime,named.conf} /srv/named/etc/
# cp -av /usr/lib/engines-1.1/* /srv/named/usr/lib/engines/
# cp -av /var/named/* /srv/named/var/named/.
</pre>
<p>Set up required nodes in <code>/dev/</code>:
</p>
<pre># mknod /srv/named/dev/null c 1 3
# mknod /srv/named/dev/random c 1 8
</pre>
<p>Set <a href="../en/File_permissions_and_attributes.html#Changing_ownership" class="mw-redirect" title="Ownership">ownership</a> of the files:
</p>
<pre># chown -R named:named /srv/named
</pre>
<p>This should create the required file system for the jail.
</p>
<h3><span class="mw-headline" id="Service_unit">Service unit</span></h3>
<p>Next we need a <a href="../en/Systemd.html#Replacement_unit_files" class="mw-redirect" title="Replacement unit file">replacement unit file</a> so that the service calls bind which will allow force bind into the chroot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/named-chroot.service</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ExecStart=/usr/bin/named -4 -f -u named -t "/srv/named"</pre>
<p>Now, reload systemd with <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Daemon-reload">daemon-reload</a>, and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start">start</a> the <code>named-chroot.service</code>.
</p>
<h2><span class="mw-headline" id="Serve_the_root_zone_locally">Serve the root zone locally</span></h2>
<p>If you do not want to rely on <a href="../en/Domain_name_resolution.html#Third-party_DNS_services" title="Domain name resolution">third-party DNS services</a>, you can serve the root zone locally following <a href="https://tools.ietf.org/html/rfc7706" class="extiw" title="rfc:7706">RFC:7706</a>. This can be achieved by using BIND as a DNS recursive resolver.
</p>
<p>To manage a recursive resolver, you typically need to configure a <i>root hints file</i>. This file contains the names and IP addresses of the authoritative name servers for the root zone.
</p>
<p>Grab the file from <a rel="nofollow" class="external text" href="https://www.iana.org/domains/root/files">IANA website</a> and place it into <code>/var/named</code>.
</p>
<p>Edit your server config, adding the respective file:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/named.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">zone "." IN {
    type hint;
    file "named.root";
};
</pre>
<p>Recursion also should be allowed in the config. See <a href="#Allow_recursion">#Allow recursion</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://www.isc.org/downloads/bind/doc/">BIND 9 Administrator Reference Manual (ARM)</a></li>
<li><a rel="nofollow" class="external text" href="https://bind9.readthedocs.io/en/latest/manpages.html">BIND ARM on readthedocs</a></li>
<li><a rel="nofollow" class="external text" href="https://kb.isc.org/docs/aa-01310">BIND knowledgebase</a></li>
<li><a rel="nofollow" class="external text" href="https://www.isc.org/">Internet Systems Consortium, Inc. (ISC)</a></li>
<li>
<a rel="nofollow" class="external text" href="http://www.netwidget.net/books/apress/dns/intro.html">Pro DNS and BIND</a> with <a rel="nofollow" class="external text" href="https://www.zytrax.com/books/dns/">abbreviated version online</a>
</li>
<li>
<a rel="nofollow" class="external text" href="https://cira.ca/domain-name-system-dns-glossary">DNS Glossary</a><sup title="Last check status: 404">[<a href="https://en.wikipedia.org/wiki/Wikipedia:Link_rot" class="extiw" title="wikipedia:Wikipedia:Link rot">dead link</a> 2020-03-28 ⓘ]</sup>
</li>
<li><a rel="nofollow" class="external text" href="https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/thread/RR3TKD5ZWTYKQHQBFPHTHDLN3JKUOOWV/">Archived mailing list discussion on BIND's future</a></li>
<li>
<a rel="nofollow" class="external text" href="https://www.heise.de/netze/rfc/rfcs/rfc7706.shtml#page-9">root zone transfer made simple - serve root@home</a> copy the /etc/named.conf , restart BIND &amp; enjoy!</li>
<li><a rel="nofollow" class="external text" href="https://www.dnssec.net/practical-documents">DNSSEC</a></li>
<li><a rel="nofollow" class="external text" href="https://www.cymru.com/Documents/secure-bind-template.html">a BIND configuration template</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Domain_Name_System.html" title="Category:Domain Name System">Domain Name System</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Style.html" title="Category:Pages or sections flagged with Template:Style">Pages or sections flagged with Template:Style</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
<li><a href="../en/Category:Pages_with_dead_links.html" title="Category:Pages with dead links">Pages with dead links</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=BIND&amp;oldid=776950">https://wiki.archlinux.org/index.php?title=BIND&amp;oldid=776950</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 4 May 2023, at 23:33.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
