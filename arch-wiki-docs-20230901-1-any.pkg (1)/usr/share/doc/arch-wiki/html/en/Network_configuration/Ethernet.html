<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Network configuration/Ethernet - ArchWiki</title>
<link rel="stylesheet" href="../../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Network_configuration_Ethernet rootpage-Network_configuration skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Device_driver" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Device_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Device driver</div>
			</a>
			
				<button aria-controls="toc-Device_driver-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Device driver subsection
				</button>
			
			<ul id="toc-Device_driver-sublist" class="sidebar-toc-list">
				<li id="toc-Check_the_status" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Check_the_status">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Check the status</div>
			</a>
			
			<ul id="toc-Check_the_status-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Load_the_module" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Load_the_module">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>Load the module</div>
			</a>
			
			<ul id="toc-Load_the_module-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Tips_and_tricks" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Tips_and_tricks">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Tips and tricks</div>
			</a>
			
				<button aria-controls="toc-Tips_and_tricks-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Tips and tricks subsection
				</button>
			
			<ul id="toc-Tips_and_tricks-sublist" class="sidebar-toc-list">
				<li id="toc-ifplugd_for_laptops" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#ifplugd_for_laptops">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>ifplugd for laptops</div>
			</a>
			
			<ul id="toc-ifplugd_for_laptops-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-Swapping_computers_on_the_cable_modem" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Swapping_computers_on_the_cable_modem">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Swapping computers on the cable modem</div>
			</a>
			
			<ul id="toc-Swapping_computers_on_the_cable_modem-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Explicit_Congestion_Notification" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Explicit_Congestion_Notification">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Explicit Congestion Notification</div>
			</a>
			
			<ul id="toc-Explicit_Congestion_Notification-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Broadcom_BCM57780" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Broadcom_BCM57780">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Broadcom BCM57780</div>
			</a>
			
			<ul id="toc-Broadcom_BCM57780-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Realtek_no_link_/_WOL_problem" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Realtek_no_link_/_WOL_problem">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>Realtek no link / WOL problem</div>
			</a>
			
			<ul id="toc-Realtek_no_link_/_WOL_problem-sublist" class="sidebar-toc-list">
				<li id="toc-Enable_the_NIC_directly_in_Linux" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Enable_the_NIC_directly_in_Linux">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4.1</span>Enable the NIC directly in Linux</div>
			</a>
			
			<ul id="toc-Enable_the_NIC_directly_in_Linux-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Rollback/change_Windows_driver" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Rollback/change_Windows_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4.2</span>Rollback/change Windows driver</div>
			</a>
			
			<ul id="toc-Rollback/change_Windows_driver-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_WOL_in_Windows_driver" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Enable_WOL_in_Windows_driver">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4.3</span>Enable WOL in Windows driver</div>
			</a>
			
			<ul id="toc-Enable_WOL_in_Windows_driver-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_LAN_Boot_ROM_in_BIOS/CMOS" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Enable_LAN_Boot_ROM_in_BIOS/CMOS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4.4</span>Enable LAN Boot ROM in BIOS/CMOS</div>
			</a>
			
			<ul id="toc-Enable_LAN_Boot_ROM_in_BIOS/CMOS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_USB_AutoSuspend" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Disable_USB_AutoSuspend">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4.5</span>Disable USB AutoSuspend</div>
			</a>
			
			<ul id="toc-Disable_USB_AutoSuspend-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Realtek_RTL8111/8168B" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Realtek_RTL8111/8168B">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5</span>Realtek RTL8111/8168B</div>
			</a>
			
			<ul id="toc-Realtek_RTL8111/8168B-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Gigabyte_Motherboard_with_Realtek_8111/8168/8411" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Gigabyte_Motherboard_with_Realtek_8111/8168/8411">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.6</span>Gigabyte Motherboard with Realtek 8111/8168/8411</div>
			</a>
			
			<ul id="toc-Gigabyte_Motherboard_with_Realtek_8111/8168/8411-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-MicroStar_Motherboard_with_Realtek_8111/8168/8411" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#MicroStar_Motherboard_with_Realtek_8111/8168/8411">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.7</span>MicroStar Motherboard with Realtek 8111/8168/8411</div>
			</a>
			
			<ul id="toc-MicroStar_Motherboard_with_Realtek_8111/8168/8411-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../../en/Network_configuration/Ethernet.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../../en/Talk:Network_configuration/Ethernet.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../../en/Network_configuration/Ethernet.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Network_configuration/Ethernet&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Network_configuration/Ethernet&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../../en/Network_configuration/Ethernet.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Network_configuration/Ethernet&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Network_configuration/Ethernet&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					<div id="contentSub"><span class="subpages">&lt; <a href="../../en/Network_configuration.html" title="Network configuration">Network configuration</a></span></div>
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p>This article describes <a href="https://en.wikipedia.org/wiki/Ethernet" class="extiw" title="wikipedia:Ethernet">Ethernet</a> specifics, general network configuration is covered in <a href="../../en/Network_configuration.html" title="Network configuration">Network configuration</a>.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Device_driver">Device driver</span></h2>
<h3><span class="mw-headline" id="Check_the_status">Check the status</span></h3>
<p><a href="../../en/Udev.html" title="Udev">udev</a> should detect your <a href="https://en.wikipedia.org/wiki/Network_interface_controller" class="extiw" title="wikipedia:Network interface controller">network interface controller</a> (NIC) and automatically load the necessary <a href="../../en/Kernel_module.html" title="Kernel module">kernel module</a> at startup. Check the "Ethernet controller" entry (or similar) from the <code>lspci -v</code> output. It should tell you which kernel module contains the driver for your network device. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci -v</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Attansic Technology Corp. L1 Gigabit Ethernet Adapter (rev b0)
 	...
 	Kernel driver in use: atl1
 	Kernel modules: atl1
</pre>
<p>Next, check that the driver was loaded by running <code>dmesg | grep <i>module_name</i></code> as root. For example:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep atl1</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">...
atl1 0000:02:00.0: eth0 link is up 100 Mbps full duplex
</pre>
<p>Skip the next section if the driver was loaded successfully. Otherwise, you will need to know which module is needed for your particular model.
</p>
<h3><span class="mw-headline" id="Load_the_module">Load the module</span></h3>
<p>Search the internet for the right module/driver for your chipset. Some common modules are <code>8139too</code> for cards with a Realtek chipset, or <code>sis900</code> for cards with a SiS chipset. Once you know which module to use, try to <a href="../../en/Kernel_module.html#Manual_module_handling" class="mw-redirect" title="Kernel modules">load it manually</a>. If you get an error saying that the module was not found, verify first if you recently upgraded the kernel (see <a href="../../en/General_troubleshooting.html#Cannot_use_some_peripherals_after_kernel_upgrade" title="General troubleshooting">General troubleshooting#Cannot use some peripherals after kernel upgrade</a>). Alternatively, it is possible that the driver is not included in the Arch kernel. You may search the <a href="../../en/Arch_User_Repository.html" class="mw-redirect" title="AUR">AUR</a> for the module name. 
</p>
<p>If udev is not detecting and loading the proper module automatically during bootup, you can explicitly <a href="../../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="ifplugd_for_laptops">ifplugd for laptops</span></h3>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> <a href="../../en/Dhcpcd.html" title="Dhcpcd">dhcpcd</a> provides the same feature out of the box.</div>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> is a daemon which will automatically configure your Ethernet device when a cable is plugged in and automatically unconfigure it if the cable is pulled. This is useful on laptops with onboard network adapters, since it will only configure the interface when a cable is really connected. Another use is when you just need to restart the network but do not want to restart the computer or do it from the shell.
</p>
<p>By default it is configured to work for the <code>eth0</code> device. This and other settings like delays can be configured in <code>/etc/ifplugd/ifplugd.conf</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a href="../../en/Netctl.html" title="Netctl">netctl</a> includes <code>netctl-ifplugd@.service</code>, otherwise you can use <code>ifplugd@.service</code> from the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=ifplugd">ifplugd</a></span> package. For example, <a href="../../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">enable</a> <code>ifplugd@eth0.service</code>.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Swapping_computers_on_the_cable_modem">Swapping computers on the cable modem</span></h3>
<p>Some cable ISPs (Vid√©otron for example) have the cable modem configured to recognize only one client PC, by the MAC address of its network interface. Once the cable modem has learned the MAC address of the first PC or equipment that talks to it, it will not respond to another MAC address in any way. Thus if you swap one PC for another (or for a router), the new PC (or router) will not work with the cable modem, because the new PC (or router) has a MAC address different from the old one. To reset the cable modem so that it will recognise the new PC, you must power the cable modem off and on again. Once the cable modem has rebooted and gone fully online again (indicator lights settled down), reboot the newly connected PC so that it makes a DHCP request, or manually make it request a new DHCP lease.
</p>
<p>If this method does not work, you will need to clone the MAC address of the original machine. See also <a href="../../en/MAC_address_spoofing.html" title="MAC address spoofing">MAC address spoofing</a>.
</p>
<h3><span class="mw-headline" id="Explicit_Congestion_Notification">Explicit Congestion Notification</span></h3>
<p><a href="https://en.wikipedia.org/wiki/Explicit_Congestion_Notification" class="extiw" title="wikipedia:Explicit Congestion Notification">Explicit Congestion Notification</a> (ECN) may cause traffic problems with old/bad routers <a rel="nofollow" class="external autonumber" href="https://bbs.archlinux.org/viewtopic.php?id=239892">[1]</a>. As of <a rel="nofollow" class="external text" href="https://github.com/systemd/systemd/pull/20535">systemd 240</a>, it is enabled for incoming connections that request it (kernel default).
</p>
<p>To enable ECN for both incoming and outgoing connections:
</p>
<pre># sysctl net.ipv4.tcp_ecn=1
</pre>
<p>To enable ECN only when requested by incoming connections (the reasonably safe, kernel default):
</p>
<pre># sysctl net.ipv4.tcp_ecn=2
</pre>
<p>To disable ECN completely (to e.g. test whether ECN was causing problems):
</p>
<pre># sysctl net.ipv4.tcp_ecn=0
</pre>
<p>See also the <a rel="nofollow" class="external text" href="https://docs.kernel.org/networking/ip-sysctl.html">kernel documentation</a>.
</p>
<h3><span class="mw-headline" id="Broadcom_BCM57780">Broadcom BCM57780</span></h3>
<p>This Broadcom chipset sometimes does not behave well unless you specify the order of the modules to be loaded. The modules are <code>broadcom</code> and <code>tg3</code>, the former needing to be loaded first.
</p>
<p>These steps should help if your computer has this chipset:
</p>
<ul><li>Find your NIC in <i>lspci</i> output:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">02:00.0 Ethernet controller: Broadcom Corporation NetLink BCM57780 Gigabit Ethernet PCIe (rev 01)
</pre>
<ul><li>If your wired networking is not functioning in some way or another, unplug your cable then do the following:</li></ul>
<pre># modprobe -r tg3
# modprobe broadcom
# modprobe tg3
</pre>
<ul><li>Plug your network cable back in and check whether the module succeeded with:</li></ul>
<pre># dmesg | grep tg3
</pre>
<ul><li>If this procedure solved the issue you can make it permanent by adding <code>broadcom</code> and <code>tg3</code> (in this order) to the <code>MODULES</code> array:</li></ul>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/mkinitcpio.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">MODULES=(.. broadcom tg3 ..)</pre>
<ul>
<li><a href="../../en/Mkinitcpio.html#Image_creation_and_activation" class="mw-redirect" title="Regenerate the initramfs">Regenerate the initramfs</a></li>
<li>Alternatively, you can create an <code>/etc/modprobe.d/broadcom.conf</code>:</li>
</ul>
<pre>softdep tg3 pre: broadcom
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> These methods may work for other chipsets, such as BCM57760.</div>
<h3>
<span id="Realtek_no_link_.2F_WOL_problem"></span><span class="mw-headline" id="Realtek_no_link_/_WOL_problem">Realtek no link / WOL problem</span>
</h3>
<p>Users with Realtek 8168 8169 8101 8111(C) 8156B based NICs (cards / and on-board) may notice a problem where the NIC seems to be disabled on boot and has no Link light. This can usually be found on a dual boot system where Windows is also installed. It seems that using the official Realtek drivers (dated anything after May 2007) under Windows is the cause. These newer drivers disable the Wake-On-LAN feature by disabling the NIC at Windows shutdown time, where it will remain disabled until the next time Windows boots. You will be able to notice if this problem is affecting you if the Link light remains off until Windows boots up; during Windows shutdown the Link light will switch off. Normal operation should be that the link light is always on as long as the system is on, even during POST. This problem will also affect other operating systems without newer drivers (eg. Live CDs). Here are a few fixes for this problem.
</p>
<h4><span class="mw-headline" id="Enable_the_NIC_directly_in_Linux">Enable the NIC directly in Linux</span></h4>
<p>Follow <a href="../../en/Network_configuration.html#Enabling_and_disabling_network_interfaces" title="Network configuration">Network configuration#Enabling and disabling network interfaces</a> to enable the interface.
</p>
<h4>
<span id="Rollback.2Fchange_Windows_driver"></span><span class="mw-headline" id="Rollback/change_Windows_driver">Rollback/change Windows driver</span>
</h4>
<p>You can roll back your Windows NIC driver to the Microsoft provided one (if available), or roll back/install an official Realtek driver pre-dating May 2007 (may be on the CD that came with your hardware).
</p>
<h4><span class="mw-headline" id="Enable_WOL_in_Windows_driver">Enable WOL in Windows driver</span></h4>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> Windows XP is very old and this likely changed in Windows 10/11. Someone please verify. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Network_configuration/Ethernet">Talk:Network configuration/Ethernet</a>)</div>
</div>
<p>Probably the best and the fastest fix is to change this setting in the Windows driver. This way it should be fixed system-wide and not only under Arch (eg. live CDs, other operating systems). In Windows, under Device Manager, find your Realtek network adapter and double-click it. Under the "Advanced" tab, change "Wake-on-LAN after shutdown" to "Enable".
</p>
<p>In Windows XP (example):
</p>
<pre>Right click my computer and choose "Properties"
--&gt; "Hardware" tab
  --&gt; Device Manager
    --&gt; Network Adapters
      --&gt; "double click" Realtek ...
        --&gt; Advanced tab
          --&gt; Wake-On-Lan After Shutdown
            --&gt; Enable
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Newer Realtek Windows drivers (tested with <i>Realtek 8111/8169 LAN Driver v5.708.1030.2008</i>, dated 2009/01/22, available from GIGABYTE) may refer to this option slightly differently, like <i>Shutdown Wake-On-LAN &gt; Enable</i>. It seems that switching it to <code>Disable</code> has no effect (you will notice the Link light still turns off upon Windows shutdown). One rather dirty workaround is to boot to Windows and just reset the system (perform an ungraceful restart/shutdown) thus not giving the Windows driver a chance to disable LAN. The Link light will remain on and the LAN adapter will remain accessible after POST - that is until you boot back to Windows and shut it down properly again.</div>
<h4>
<span id="Enable_LAN_Boot_ROM_in_BIOS.2FCMOS"></span><span class="mw-headline" id="Enable_LAN_Boot_ROM_in_BIOS/CMOS">Enable LAN Boot ROM in BIOS/CMOS</span>
</h4>
<p>It appears that setting <i>Integrated Peripherals &gt; Onboard LAN Boot ROM &gt; Enabled</i> in BIOS/CMOS reactivates the Realtek LAN chip on system boot-up, despite the Windows driver disabling it on OS shutdown.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This was tested several times on a GIGABYTE GA-G31M-ES2L motherboard, BIOS version F8 released on 2009/02/05.</div>
<h4><span class="mw-headline" id="Disable_USB_AutoSuspend">Disable USB AutoSuspend</span></h4>
<p>When using power saving features, specifically USB autosuspend, the device can fail to load correctly, resulting in a <i>NO-CARRIER</i> state (tested with RT8156B), and no established link.
</p>
<p>To resolve, see <a href="../../en/Power_management.html#USB_autosuspend" title="Power management">Power management#USB autosuspend</a> for details on blacklisting a device for USB autosuspend manually, or <a rel="nofollow" class="external text" href="https://linrunner.de/tlp/settings/usb.html">TLP documentation on USB devices</a> if using <a href="../../en/TLP.html" title="TLP">TLP</a>; then reconnect the device.
</p>
<h3>
<span id="Realtek_RTL8111.2F8168B"></span><span class="mw-headline" id="Realtek_RTL8111/8168B">Realtek RTL8111/8168B</span>
</h3>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># lspci | grep Ethernet</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">03:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express Gigabit Ethernet controller (rev 02)
</pre>
<p>The adapter should be recognized by the <code>r8169</code> module. However, with some chip revisions the connection may go off and on all the time. The alternative <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=r8168">r8168</a></span> should be used for a reliable connection in this case. <a href="../../en/Kernel_module.html#Blacklisting" class="mw-redirect" title="Blacklist">Blacklist</a> <code>r8169</code>, if <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=r8168">r8168</a></span> is not automatically loaded by <a href="../../en/Udev.html" title="Udev">udev</a>, you can explicitly <a href="../../en/Kernel_module.html#Automatic_module_loading" class="mw-redirect" title="Load the module at boot">load the module at boot</a>.
</p>
<div class="noprint archwiki-template-message">
<p><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> "some revisions", no proof the driver is the cause, and not e.g poorly configured DNS servers (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Network_configuration/Ethernet">Talk:Network configuration/Ethernet</a>)</div>
</div>
<p>Another fault in the drivers for some revisions of this adapter is poor IPv6 support. <a href="../../en/IPv6.html#Disable_functionality" title="IPv6">IPv6#Disable functionality</a> can be helpful if you encounter issues such as hanging webpages and slow speeds.
</p>
<h3>
<span id="Gigabyte_Motherboard_with_Realtek_8111.2F8168.2F8411"></span><span class="mw-headline" id="Gigabyte_Motherboard_with_Realtek_8111/8168/8411">Gigabyte Motherboard with Realtek 8111/8168/8411</span>
</h3>
<p>With motherboards such as the <i>Gigabyte GA-990FXA-UD3</i>, booting with <a href="../../en/PCI_passthrough_via_OVMF.html#Setting_up_IOMMU" class="mw-redirect" title="IOMMU">IOMMU</a> off (which can be the default) will cause the network interface to be unreliable, often failing to connect or connecting but allowing no throughput. This will apply to the onboard NIC and to any other pci-NIC in the box because the IOMMU setting affects the entire network interface on the board. Enabling IOMMU and booting with the install media will throw AMD I-10/xhci page faults for a second, but then boots normally, resulting in a fully functional onboard NIC (even with the r8169 module).
</p>
<p>When configuring the boot process for your installation, add <code>iommu=soft</code> as a <a href="../../en/Kernel_parameters.html" class="mw-redirect" title="Kernel parameter">kernel parameter</a> to eliminate the error messages on boot and restore USB3.0 functionality.
</p>
<h3>
<span id="MicroStar_Motherboard_with_Realtek_8111.2F8168.2F8411"></span><span class="mw-headline" id="MicroStar_Motherboard_with_Realtek_8111/8168/8411">MicroStar Motherboard with Realtek 8111/8168/8411</span>
</h3>
<p>With motherboards such as the "MicroStar B450M MORTAR TITANIUM", unpluging/pluging Ethernet cables or restarting router's DHCP server would cause <code>r8169</code> to enter a downshifted status, and downgrade the 1000 Mbit/s Ethernet speed to 100 Mbit/s. The kernel log will show:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># dmesg | grep r8169</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Generic FE-GE Realtek PHY r8169-2200:00: Downshift occurred from negotiated speed 1Gbps to actual speed 100Mbps, check cabling!
r8169 0000:22:00.0 enp34s0: Link is Up - 100Mbps/Full (downshifted) - flow control rx/tx
</pre>
<p>In this case, restart the adapter (set it down and up). For example:
</p>
<pre># ip link set dev enp34s0 down
# ip link set dev enp34s0 up
</pre>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../../en/Category:Network_configuration.html" title="Category:Network configuration">Network configuration</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li>
<li><a href="../../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Network_configuration/Ethernet&amp;oldid=782365">https://wiki.archlinux.org/index.php?title=Network_configuration/Ethernet&amp;oldid=782365</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 2 July 2023, at 20:58.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
