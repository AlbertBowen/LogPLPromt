<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Access Control Lists - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Access_Control_Lists rootpage-Access_Control_Lists skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Enable_ACL" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Enable_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Enable ACL</div>
			</a>
			
			<ul id="toc-Enable_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usage" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Usage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Usage</div>
			</a>
			
				<button aria-controls="toc-Usage-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Usage subsection
				</button>
			
			<ul id="toc-Usage-sublist" class="sidebar-toc-list">
				<li id="toc-Set_ACL" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Set_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Set ACL</div>
			</a>
			
			<ul id="toc-Set_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Show_ACL" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Show_ACL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Show ACL</div>
			</a>
			
			<ul id="toc-Show_ACL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Examples" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Examples">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Examples</div>
			</a>
			
				<button aria-controls="toc-Examples-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Examples subsection
				</button>
			
			<ul id="toc-Examples-sublist" class="sidebar-toc-list">
				<li id="toc-Output_of_ls_command" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Output_of_ls_command">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Output of ls command</div>
			</a>
			
			<ul id="toc-Output_of_ls_command-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Execution_permissions_for_private_files" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Execution_permissions_for_private_files">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Execution permissions for private files</div>
			</a>
			
			<ul id="toc-Execution_permissions_for_private_files-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Access_Control_Lists.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:Access_Control_Lists.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Access_Control_Lists.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Access_Control_Lists&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Access_Control_Lists&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Access_Control_Lists.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Access_Control_Lists&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Access_Control_Lists&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p><a href="https://en.wikipedia.org/wiki/Access_Control_List" class="extiw" title="wikipedia:Access Control List">Access control list</a> (ACL) provides an additional, more flexible permission mechanism for <a href="../en/File_systems.html" title="File systems">file systems</a>. It is designed to assist with UNIX file permissions. ACL allows you to give permissions for any user or group to any disk resource.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=acl">acl</a></span> package is a dependency of <a href="../en/Systemd.html" title="Systemd">systemd</a>, it should already be installed.
</p>
<h2><span class="mw-headline" id="Enable_ACL">Enable ACL</span></h2>
<p>To enable ACL, the filesystem must be mounted with the <code>acl</code> option. You can use <a href="../en/Fstab.html" title="Fstab">fstab</a> entries to make it permanent on your system.
</p>
<p>There is a possibility that the <code>acl</code> option is already active as one of the default mount options on the filesystem. <a href="../en/Btrfs.html" title="Btrfs">Btrfs</a> and Ext2/<a href="../en/Ext3.html" title="Ext3">3</a>/<a href="../en/Ext4.html" title="Ext4">4</a> filesystems are affected by this. Use the following command to check ext2/3/4 formatted partitions for the option:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># tune2fs -l /dev/sd<i>XY</i> | grep "Default mount options:"</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Default mount options:    user_xattr <b>acl</b>
</pre>
<p>Also check that the default mount options are not overridden, in such case you will see <code>noacl</code> in <code>/proc/mounts</code> in the relevant line.
</p>
<p>You can set the default mount options of a filesystem using the <code>tune2fs -o <i>option</i> <i>partition</i></code> command, for example:
</p>
<pre># tune2fs -o acl /dev/sd<i>XY</i>
</pre>
<p>Using the default mount options instead of an entry in <code>/etc/fstab</code> is very useful for external drives, such partition will be mounted with <code>acl</code> option also on other Linux machines. There is no need to edit <code>/etc/fstab</code> on every machine.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>
<code>acl</code> is specified as a default mount option when creating an ext2/3/4 filesystem. This is configured in <code>/etc/mke2fs.conf</code>.</li>
<li>The default mount options are not listed in <code>/proc/mounts</code>.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Set_ACL">Set ACL</span></h3>
<p>The ACL can be modified using the <i>setfacl</i> command.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>You can list file/directory permission changes without modifying the permissions (i.e. dry-run) by appending the <code>--test</code> flag.</li>
<li>To apply operations to all files and directories recursively, append the <code>-R</code>/<code>--recursive</code> argument.</li>
</ul>
</div>
<p>To set permissions for a user (<code><i>user</i></code> is either the user name or ID):
</p>
<pre># setfacl -m "u:<i>user:permissions</i>" &lt;file/dir&gt;
</pre>
<p>To set permissions for a group (<code><i>group</i></code> is either the group name or ID):
</p>
<pre># setfacl -m "g:<i>group:permissions</i>" &lt;file/dir&gt;
</pre>
<p>To set permissions for others:
</p>
<pre># setfacl -m "other:<i>permissions</i>" &lt;file/dir&gt;
</pre>
<p>To allow all <i>newly created</i> files or directories to inherit entries from the parent directory (this will not affect files which will be <i>copied</i> into the directory):
</p>
<pre># setfacl -dm "<i>entry</i>" &lt;dir&gt;
</pre>
<p>To remove a specific entry:
</p>
<pre># setfacl -x "<i>entry</i>" &lt;file/dir&gt;
</pre>
<p>To remove the default entries:
</p>
<pre># setfacl -k &lt;file/dir&gt;
</pre>
<p>To remove all entries (entries of the owner, group and others are retained):
</p>
<pre># setfacl -b &lt;file/dir&gt;
</pre>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a><b>The factual accuracy of this article or section is disputed.</b><a href="../File:Tango-inaccurate.png" class="image"><img alt="Tango-inaccurate.png" src="../File:Tango-inaccurate.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> The original note about the <code>--mask</code> option (which was taken from <span class="plainlinks archwiki-template-man" title="$ man 1 setfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/setfacl.1">setfacl(1)</a></span>) was determined as inaccurate, but the new note does not seem correct either. See the talk page for details. (Discuss in <a href="../en/Talk:Access_Control_Lists.html#ACL_mask_entry" title="Talk:Access Control Lists">Talk:Access Control Lists#ACL mask entry</a>)</div>
</div>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The default behavior of <i>setfacl</i> is to recalculate the ACL mask entry, unless a <code>--mask</code> entry was explicitly given. The mask entry indicates the maximum permissions allowed for users (other than the owner) and for groups. Unless explicitly set, this will match the permissions of the default group. To clarify what this means, suppose the group owning a directory has <code>r-x</code> permissions. If you add an ACL user or group with <code>rwx</code> permissions, the <i>effective</i> permissions of this user or group will be <code>r-x</code>. The reason for this is so that there are no surprises when a file from a system which does not support ACLs is made available on a system which does..</div>
<h3><span class="mw-headline" id="Show_ACL">Show ACL</span></h3>
<p>To show permissions, use:
</p>
<pre># getfacl &lt;file/dir&gt;
</pre>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<p>Set all permissions for user <code>johnny</code> to file named <code>abc</code>:
</p>
<pre># setfacl -m "u:johnny:rwx" abc
</pre>
<p>Check permissions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
user:johnny:rwx
group::r--
mask::rwx
other::r--
</pre>
<p>Change permissions for user <code>johnny</code>:
</p>
<pre># setfacl -m "u:johnny:r-x" abc
</pre>
<p>Check permissions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
user:johnny:r-x
group::r--
mask::r-x
other::r--
</pre>
<p>Remove all ACL entries:
</p>
<pre># setfacl -b abc
</pre>
<p>Check permissions:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;"># getfacl abc</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># file: abc
# owner: someone
# group: someone
user::rw-
group::r--
other::r--
</pre>
<h3><span class="mw-headline" id="Output_of_ls_command">Output of ls command</span></h3>
<p>You will notice that there is an ACL for a given file because it will exhibit a <code><b>+</b></code> (plus sign) after its Unix permissions in the output of <code>ls -l</code>.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ ls -l /dev/audio</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">crw-rw----+ 1 root audio 14, 4 nov.   9 12:49 /dev/audio
</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getfacl /dev/audio</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">getfacl: Removing leading '/' from absolute path names
# file: dev/audio
# owner: root
# group: audio
user::rw-
user:solstice:rw-
group::rw-
mask::rw-
other::---
</pre>
<h3><span class="mw-headline" id="Execution_permissions_for_private_files">Execution permissions for private files</span></h3>
<p>The following technique describes how a process like a <a href="../en/List_of_applications/Internet.html#Web_servers" class="mw-redirect" title="Web server">web server</a> can be granted access to files that reside in a user's home directory, without compromising security by giving the whole world access.
</p>
<p>In the following we assume that the web server runs as the user <code>http</code> and grant it access to <code>geoffrey</code>'s home directory <code>/home/geoffrey</code>.
</p>
<p>The first step is granting execution permissions for the user <code>http</code>:
</p>
<pre># setfacl -m "u:http:--x" /home/geoffrey
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Execution permissions to a directory are necessary for a process to list the directory's content.</div>
<p>Since the user <code>http</code> is now able to access files in <code>/home/geoffrey</code>, others no longer need access:
</p>
<pre># chmod o-rx /home/geoffrey
</pre>
<p>Use <code>getfacl</code> to verify the changes:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ getfacl /home/geoffrey</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">getfacl: Removing leading '/' from absolute path names
# file: home/geoffrey
# owner: geoffrey
# group: geoffrey
user::rwx
user:http:--x
group::r-x
mask::r-x
other::---
</pre>
<p>As the above output shows, <code>other</code>'s no longer have any permissions, but the user <code>http</code> is still able to access the files, thus security might be considered increased.
</p>
<p>If you need to give write access for the user <code>http</code> on specific directories and/or files, run:
</p>
<pre># setfacl -dm "u:http:rwx" /home/geoffrey/project1/cache
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><span class="plainlinks archwiki-template-man" title="$ man 1 getfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/getfacl.1">getfacl(1)</a></span></li>
<li><span class="plainlinks archwiki-template-man" title="$ man 1 setfacl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/setfacl.1">setfacl(1)</a></span></li>
<li><a rel="nofollow" class="external text" href="https://www.usenix.org/legacy/publications/library/proceedings/usenix03/tech/freenix03/full_papers/gruenbacher/gruenbacher_html/main.html">POSIX Access Control Lists on Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://unix.stackexchange.com/questions/1314/how-to-set-default-file-permissions-for-all-folders-files-in-a-directory">How to set default file permissions for all folders/files in a directory?</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Access_control.html" title="Category:Access control">Access control</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Accuracy.html" title="Category:Pages or sections flagged with Template:Accuracy">Pages or sections flagged with Template:Accuracy</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Access_Control_Lists&amp;oldid=704836">https://wiki.archlinux.org/index.php?title=Access_Control_Lists&amp;oldid=704836</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 8 December 2021, at 16:28.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
