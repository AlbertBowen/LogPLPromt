<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Thunderbolt - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Thunderbolt rootpage-Thunderbolt skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Obtain_firmware_updates" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Obtain_firmware_updates">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Obtain firmware updates</div>
			</a>
			
			<ul id="toc-Obtain_firmware_updates-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-User_device_authorization" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#User_device_authorization">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>User device authorization</div>
			</a>
			
				<button aria-controls="toc-User_device_authorization-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle User device authorization subsection
				</button>
			
			<ul id="toc-User_device_authorization-sublist" class="sidebar-toc-list">
				<li id="toc-Graphical_front-ends" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Graphical_front-ends">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Graphical front-ends</div>
			</a>
			
			<ul id="toc-Graphical_front-ends-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Automatically_connect_any_device" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Automatically_connect_any_device">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Automatically connect any device</div>
			</a>
			
			<ul id="toc-Automatically_connect_any_device-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Forcing_power" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Forcing_power">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Forcing power</div>
			</a>
			
			<ul id="toc-Forcing_power-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-PCI_buses_are_not_registered" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#PCI_buses_are_not_registered">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>PCI buses are not registered</div>
			</a>
			
			<ul id="toc-PCI_buses_are_not_registered-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Increasing_hot-plug_bus_size_and_memory" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Increasing_hot-plug_bus_size_and_memory">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Increasing hot-plug bus size and memory</div>
			</a>
			
			<ul id="toc-Increasing_hot-plug_bus_size_and_memory-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Thunderbolt.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Thunderbolt&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Thunderbolt.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Thunderbolt&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Thunderbolt&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Thunderbolt.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Thunderbolt&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Thunderbolt&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/External_GPU.html" title="External GPU">External GPU</a></li>
</ul>
</div>
<p>Thunderbolt 3 works out of the box with recent Linux kernel versions <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/admin-guide/thunderbolt.html">[1]</a>. The Linux kernel, starting with version 4.13, supports Thunderbolt Security, too.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Obtain_firmware_updates">Obtain firmware updates</span></h2>
<p>Manufacturers often release firmware updates for Thunderbolt ports and devices to function properly, visit <a rel="nofollow" class="external free" href="https://thunderbolttechnology.net/updates">https://thunderbolttechnology.net/updates</a> for more details how to obtain upgrades for certain vendors.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Some vendors use <a href="../en/Fwupd.html" title="Fwupd">fwupd</a> to push firmware updates on Linux.</div>
<h2><span class="mw-headline" id="User_device_authorization">User device authorization</span></h2>
<p>Modern Thunderbolt devices implement security modes that require user authorization when connecting devices - this is to protect from malicious devices performing <a href="https://en.wikipedia.org/wiki/DMA_attack" class="extiw" title="wikipedia:DMA attack">DMA attacks</a> or otherwise interfering with the hardware (see <a rel="nofollow" class="external text" href="https://trmm.net/Thunderstrike_2">Thunderstrike 2</a>).
</p>
<p>The modes currently supported on Linux are:
</p>
<ul>
<li>
<code>none</code> - No security, all devices are connected and initialized by default. In BIOS settings this is typically called <i>Legacy mode</i>.</li>
<li>
<code>user</code> - User authorization is required every time a device is connected. In BIOS settings this is typically called <i>Unique ID</i>.</li>
<li>
<code>secure</code> - User authorization is required, but the device is then remembered and does not require re-authorization. In BIOS settings this is typically called <i>One time saved key</i>.</li>
<li>
<code>dponly</code> - DisplayPort functionality only, no other devices are allowed. In BIOS settings this is typically called <i>Display Port Only</i>.</li>
</ul>
<p>The security level is normally configured at firmware level; it is recommended to set it to at least <code>secure</code>.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> User-space solutions are available such as <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=bolt">bolt</a></span> or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/tbt/">tbt</a></span><sup><small>AUR</small></sup> to authorize devices.</div>
<h3><span class="mw-headline" id="Graphical_front-ends">Graphical front-ends</span></h3>
<ul>
<li>
<a href="../en/GNOME.html" title="GNOME">GNOME</a> has native support for authorizing devices from the UI since version 3.30</li>
<li>
<a href="../en/KDE.html#Plasma" class="mw-redirect" title="Plasma">Plasma</a> integration is available from this <a rel="nofollow" class="external text" href="https://invent.kde.org/plasma/plasma-thunderbolt">git repository</a> and from <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=plasma-thunderbolt">plasma-thunderbolt</a></span> package</li>
</ul>
<h3><span class="mw-headline" id="Automatically_connect_any_device">Automatically connect any device</span></h3>
<p>Users who just want to connect any device without any sort of manual work can create a <a href="../en/Udev.html#About_udev_rules" class="mw-redirect" title="Udev rule">udev rule</a> as in <code>99-removable.rules</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/udev/rules.d/99-removable.rules</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">ACTION=="add", SUBSYSTEM=="thunderbolt", ATTR{authorized}=="0", ATTR{authorized}="1"</pre>
<h3><span class="mw-headline" id="Forcing_power">Forcing power</span></h3>
<p>Many OEMs include a method that can be used to force the power of a Thunderbolt controller to an <i>On</i> state. If supported by the machine this will be exposed by the WMI bus with a sysfs attribute called <i>force_power</i> <a rel="nofollow" class="external autonumber" href="https://docs.kernel.org/admin-guide/thunderbolt.html#forcing-power">[2]</a>.
</p>
<p>Forcing power may especially be useful when a connected device loses connection or the controller that switches itself off.
</p>
<p>To force the power to be on/off, write 1 or 0 to this attribute, e.g. to force power:
</p>
<pre># echo 1 &gt; /sys/bus/wmi/devices/86CCFD48-205E-4A77-9C48-2021CBEDE341/force_power
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> It is not possible to query the current <code>force_power</code> state.</div>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="PCI_buses_are_not_registered">PCI buses are not registered</span></h3>
<p>Sometimes when connecting a Thunderbolt device PCI buses might not be registered. This is apparent by having screens working while USB devices fail to register on your computer. This can be solved by issuing a PCI rescan:
</p>
<pre># echo 1 &gt; /sys/bus/pci/rescan
</pre>
<h3><span class="mw-headline" id="Increasing_hot-plug_bus_size_and_memory">Increasing hot-plug bus size and memory</span></h3>
<p>Some BIOS can report too little bus size and memory to the kernel, causing the drivers fail to load. Add the following to kernel command line to manually set the size.
</p>
<pre>pci=hpbussize=0x33,hpmemsize=256M
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://docs.kernel.org/admin-guide/thunderbolt.html">Linux kernel user's and administrator's guide on Thunderbolt</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/gicmo/bolt">bolt GitHub page</a></li>
<li><a rel="nofollow" class="external text" href="https://christian.kellner.me/2017/12/14/introducing-bolt-thunderbolt-3-security-levels-for-gnulinux/">Introducing bolt: Thunderbolt 3 security levels for GNU/Linux</a></li>
<li><a rel="nofollow" class="external text" href="https://christian.kellner.me/2018/04/23/the-state-of-thunderbolt-3-in-fedora-28/">Tunderbolt Support in GNOME</a></li>
<li><a rel="nofollow" class="external text" href="https://daenney.github.io/2017/11/16/linux-thunberbolt-security">tbtadm</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Hardware.html" title="Category:Hardware">Hardware</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Thunderbolt&amp;oldid=772416">https://wiki.archlinux.org/index.php?title=Thunderbolt&amp;oldid=772416</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 12 March 2023, at 17:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
