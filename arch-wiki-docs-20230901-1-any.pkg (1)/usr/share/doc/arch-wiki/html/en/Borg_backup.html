<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Borg backup - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Borg_backup rootpage-Borg_backup skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Documentation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Documentation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Documentation</div>
			</a>
			
			<ul id="toc-Documentation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Usage" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Usage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Usage</div>
			</a>
			
				<button aria-controls="toc-Usage-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Usage subsection
				</button>
			
			<ul id="toc-Usage-sublist" class="sidebar-toc-list">
				<li id="toc-Creating_repositories" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Creating_repositories">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Creating repositories</div>
			</a>
			
			<ul id="toc-Creating_repositories-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Creating_archives" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Creating_archives">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Creating archives</div>
			</a>
			
			<ul id="toc-Creating_archives-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Pruning_archives" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Pruning_archives">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Pruning archives</div>
			</a>
			
			<ul id="toc-Pruning_archives-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Restoring_from_an_archive" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Restoring_from_an_archive">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>Restoring from an archive</div>
			</a>
			
			<ul id="toc-Restoring_from_an_archive-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Tips_and_tricks" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Tips_and_tricks">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Tips and tricks</div>
			</a>
			
				<button aria-controls="toc-Tips_and_tricks-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Tips and tricks subsection
				</button>
			
			<ul id="toc-Tips_and_tricks-sublist" class="sidebar-toc-list">
				<li id="toc-Cache_exclusion" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Cache_exclusion">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>Cache exclusion</div>
			</a>
			
			<ul id="toc-Cache_exclusion-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Listing_affected_files" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Listing_affected_files">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Listing affected files</div>
			</a>
			
			<ul id="toc-Listing_affected_files-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Borg_backup.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Borg_backup&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Borg_backup.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Borg_backup&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Borg_backup&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Borg_backup.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Borg_backup&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Borg_backup&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/System_backup.html" title="System backup">System backup</a></li>
<li><a href="../en/Synchronization_and_backup_programs.html" title="Synchronization and backup programs">Synchronization and backup programs</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.borgbackup.org/">BorgBackup</a> (short: Borg) is a deduplicating backup program. Optionally, it supports compression and authenticated encryption.
</p>
<p>The main goal of Borg is to provide an efficient and secure way to backup data. The data deduplication technique used makes Borg suitable for daily backups since only changes are stored. The authenticated encryption technique makes it suitable for backups to not fully trusted targets.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=borg">borg</a></span> package. The development version is available with <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/borg-git/">borg-git</a></span><sup><small>AUR</small></sup>.
</p>
<p>For additional features, install the following packages:
</p>
<dl>
<dt><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-llfuse">python-llfuse</a></span></dt>
<dd>for mounting archives</dd>
<dt><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssh">openssh</a></span></dt>
<dd>for connecting to remote hosts</dd>
<dt><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=borgmatic">borgmatic</a></span></dt>
<dd>a set of wrapper scripts to control Borg via YAML files instead of terminal commands</dd>
<dt>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/pika-backup/">pika-backup</a></span><sup><small>AUR</small></sup>
</dt>
<dd>a libadwaita/GTK4 based GUI for Borg</dd>
<dt>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/vorta/">vorta</a></span><sup><small>AUR</small></sup>
</dt>
<dd>a Qt-based GUI for Borg</dd>
<dt>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/borgtui-git/">borgtui-git</a></span><sup><small>AUR</small></sup>
</dt>
<dd>A TUI and CLI for regularly scheduled backups</dd>
</dl>
<h2><span class="mw-headline" id="Documentation">Documentation</span></h2>
<p>The official <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/index.html">documentation</a> includes a  <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/quickstart.html#a-step-by-step-example">quickstart guide</a>. Local documentation can be found in <span class="plainlinks archwiki-template-man" title="$ man 1 borg"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/borg.1">borg(1)</a></span> and <code>apropos borg</code>.
</p>
<p>Additionally, guidance can be found through the command, either generally:
</p>
<pre>$ borg help
</pre>
<p>or for specific commands:
</p>
<pre>$ borg help <i>command</i>
</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>The main concept behind Borg is <b>de-duplication</b>: rather than accumulating files as in traditional TAR archiving, de-duplication verifies the identity of files, regardless of their names, by hashing them so that they are only copied once. This means that even without compression, it takes up minimal space for repeated incremental backups.
</p>
<p>File compression is optional and supports multiple algorithms (zstd is recommended) and intensities.
</p>
<p>Archives created with Borg can be mounted as FUSE filesystems for browsing and restoring individual files. 
</p>
<p>Archives can be created locally, or on remote systems using <a href="../en/SSHFS.html" title="SSHFS">SSHFS</a>, <a href="../en/NFS.html" title="NFS">NFS</a>, <a href="../en/Samba.html" title="Samba">Samba</a>, or similar mounting solutions. Transfer over <a href="../en/OpenSSH.html" title="OpenSSH">SSH</a> is supported, but the remote host must have Borg available.
</p>
<h3><span class="mw-headline" id="Creating_repositories">Creating repositories</span></h3>
<p>Borg repositories can be encrypted or made tamper-evident. For more information on modes and options, consult the <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/usage/init.html?highlight=repokey">official documentation on setting up a repository</a>. 
</p>
<p>To create a Borg repository without encryption or authentication: 
</p>
<pre>$ borg init --encryption=none <i>/path/to/repo</i>
</pre>
<h3><span class="mw-headline" id="Creating_archives">Creating archives</span></h3>
<p>Individual archive instances can be created within the repository with the <code>borg create</code> command. Each archive must be given a unique name. Borg includes <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/usage/help.html#borg-placeholders">a list of placeholders</a> to make adding strings such at dates, times, usernames, and hostnames easier.
</p>
<p>To create an archive of the <code>archivable-dir</code> directory with the hostname of the source machine and the current date:
</p>
<pre>$ borg create <i>/path/to/repo</i>::{hostname}-{now:%Y-%m-%d} archivable-dir
</pre>
<p>Borg supports extensive inclusion and exclusion options. To exclude <code>.pyc</code> files from the archive:
</p>
<pre>$ borg create <i>...</i> --exclude '*.pyc' <i>/path/to/repo</i>::<i>archive-name</i>
</pre>
<p>More information can be found on the <code>borg create</code> <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/usage/create.html">documentation page</a>.
</p>
<h3><span class="mw-headline" id="Pruning_archives">Pruning archives</span></h3>
<p>The removal of old archives is not performed automatically, but can be performed manually with the <code>borg prune</code> command. The number of archives to keep must be specified, and can be limited by the time the archive was created. 
</p>
<p>To keep only the last 7 daily archives, the last four weekly archives, and the last three monthly archives:
</p>
<pre>$ borg prune --keep-daily=7 --keep-weekly=4 --keep-monthly=3 <i>/path/to/repo</i>
</pre>
<p>To keep only the last 10 archives, regardless of when they were created:
</p>
<pre>$ borg prune --keep-last=10 <i>/path/to/repo</i>
</pre>
<p>To keep all archives from the past 30 days, regardless of how many archives that includes:
</p>
<pre>$ borg prune --keep-within=30d <i>/path/to/repo</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Pruning will delete the archives but will not actually free space in the repository. To free space, use the <code>borg compact</code> command on the repository.</div>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Pruning is performed on <b>all</b> archives in the repository unless restricted by the <code>--prefix</code> or <code>--glob-archives</code> flags.</div>
<p>More information can be found on the <code>borg prune</code> <a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/usage/prune.html">documentation page</a>.
</p>
<h3><span class="mw-headline" id="Restoring_from_an_archive">Restoring from an archive</span></h3>
<p>To restore from an archive:
</p>
<pre>$ borg extract <i>/path/to/repo</i>::<i>archive-name</i> <i>path/to/restore</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Borg will extract the <i>full path</i> relative to the current working directory. This means that restoring the path <code>/home/archuser/path/to/restore</code> from an archive while in the archuser's home directory will result in the full restored path being <code>/home/archuser/home/archuser/path/to/restore</code>
</div>
<p>.
</p>
<p>Alternatively, a repository can be mounted for interactive restoration:
</p>
<pre>$ borg mount <i>/path/to/repo</i>::<i>archive-name</i>
</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Cache_exclusion">Cache exclusion</span></h3>
<p>Archives' size can be reduced by excluding cache directories. Directories that adhere to the <a rel="nofollow" class="external text" href="http://fileformats.archiveteam.org/wiki/Cache_Directory_Tagging_Standard">Cache Directory Archiving Standard</a> can be automatically excluded by appending <code>--exclude-caches</code> to the archive creation command:
</p>
<pre>$ borg create <i>...</i> --exclude-caches <i>/path/to/repo</i>::<i>archive-name</i>
</pre>
<h3><span class="mw-headline" id="Listing_affected_files">Listing affected files</span></h3>
<p>Many operations in Borg support the <code>--list</code> flag to list affected files or archives. If paired with <code>--dry-run</code>, the user can verify the effects of a given command. 
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li><a rel="nofollow" class="external text" href="https://borgbackup.readthedocs.io/en/stable/">Official documentation</a></li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:System_administration.html" title="Category:System administration">System administration</a></li>
<li><a href="../en/Category:Backup.html" title="Category:Backup">Backup</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Borg_backup&amp;oldid=786319">https://wiki.archlinux.org/index.php?title=Borg_backup&amp;oldid=786319</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 27 August 2023, at 16:04.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
