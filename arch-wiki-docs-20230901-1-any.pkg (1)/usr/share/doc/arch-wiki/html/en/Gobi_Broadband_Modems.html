<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Gobi Broadband Modems - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Gobi_Broadband_Modems rootpage-Gobi_Broadband_Modems skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Device_identification" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Device_identification">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Device identification</div>
			</a>
			
			<ul id="toc-Device_identification-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-gobi_loader" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#gobi_loader">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>gobi_loader</div>
			</a>
			
			<ul id="toc-gobi_loader-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manage_Connection_in_Network_Manager" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Manage_Connection_in_Network_Manager">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Manage Connection in Network Manager</div>
			</a>
			
			<ul id="toc-Manage_Connection_in_Network_Manager-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Connection" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Connection">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Connection</div>
			</a>
			
				<button aria-controls="toc-Connection-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Connection subsection
				</button>
			
			<ul id="toc-Connection-sublist" class="sidebar-toc-list">
				<li id="toc-wvdial" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#wvdial">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>wvdial</div>
			</a>
			
			<ul id="toc-wvdial-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Gobi_Broadband_Modems.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:Gobi_Broadband_Modems.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Gobi_Broadband_Modems.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Gobi_Broadband_Modems&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Gobi_Broadband_Modems&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Gobi_Broadband_Modems.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Gobi_Broadband_Modems&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Gobi_Broadband_Modems&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p>From <a href="https://en.wikipedia.org/wiki/Qualcomm_Gobi" class="extiw" title="wikipedia:Qualcomm Gobi">Wikipedia</a>: 
</p>
<dl><dd>Qualcomm Gobi is a family of embedded mobile broadband modem products by Qualcomm.</dd></dl>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Device_identification">Device identification</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=usbutils">usbutils</a></span> and then examine the output of
</p>
<pre>$ lsusb
</pre>
<p>which will show the vendor and product IDs of the device.
</p>
<p>For example, on a HP un2430 modem:
</p>
<pre>Bus 001 Device 005: ID 03f0:371d Hewlett-Packard 
</pre>
<p>The device is detected by the qcserial module, if not, you are going to have to recompile the qcserial module with your added product and vendor id.
</p>
<p>Alternatively you can add the Product and Vendor ID by writing them into the <code>new_id</code> file (best both at the same time because most Gobi modules switch the Product ID when the Firmware is loaded).
For example on a Gobi2K with the Vendor ID <code>04da</code> and the Product IDs <code>250e</code> (waiting for Firmware) and <code>250f</code> (firmware loaded)
</p>
<pre># echo "04da 250e" &gt; /sys/bus/usb-serial/drivers/qcserial/new_id
# echo "04da 250f" &gt; /sys/bus/usb-serial/drivers/qcserial/new_id
</pre>
<p>note that this has to be repeated when you reload the qcserial module or reboot/shutdown.
</p>
<h2><span class="mw-headline" id="gobi_loader">gobi_loader</span></h2>
<p>From <a rel="nofollow" class="external text" href="https://github.com/kicer/gobi_loader">the developer GitHub page</a>: 
</p>
<dl><dd>
<i>gobi_loader</i> is a firmware loader for Qualcomm Gobi USB chipsets. These devices appear in an uninitialized state when power is applied and require firmware to be loaded before they can be used as modems. <i>gobi_loader</i> adds a <a href="../en/Udev.html#About_udev_rules" class="mw-redirect" title="Udev rule">udev rule</a> that will trigger loading of the firmware and make the modem usable.</dd></dl>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-loader/">gobi-loader</a></span><sup><small>AUR</small></sup> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/gobi-firmware/">gobi-firmware</a></span><sup><small>AUR</small></sup>.
</p>
<p>After installation, you should enter your product and vendor id in the <code>/lib/udev/rules.d/60-gobi.rules</code>
</p>
<p>Then a simple reload of the qcserial module:
</p>
<pre># rmmod qcserial
# modprobe qcserial
</pre>
<h2><span class="mw-headline" id="Manage_Connection_in_Network_Manager">Manage Connection in Network Manager</span></h2>
<p><a href="../en/Mobile_broadband_modem.html#ModemManager" class="mw-redirect" title="ModemManager">ModemManager</a> is required for network manager to detect any mobile broadband devices.
</p>
<p>This needs to be <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Started/enabled">started/enabled</a>. As soon as they are started the Mobile Broadband option will be available from the Network Manager Applet.
</p>
<p>Make sure <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=mobile-broadband-provider-info">mobile-broadband-provider-info</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=nm-connection-editor">nm-connection-editor</a></span> are installed.
</p>
<p>To use this quite old modem, you need to blacklist qmi_wwan and cdc_wdm modules from loading into [modern] Linux kernel. Else, if these modules are loaded, ModemManager recognizes this modem as something new with QMI interface, and then complains about too small versions of some QMI services. <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/mobile-broadband/ModemManager/issues/69">Source</a>
</p>
<h2><span class="mw-headline" id="Connection">Connection</span></h2>
<h3><span class="mw-headline" id="wvdial">wvdial</span></h3>
<p><i>See main article: <a href="../en/Wvdial.html" title="Wvdial">wvdial</a></i>
</p>
<p>The general procedure is to switch the device into modem mode, make sure the <code>ttyUSB</code> device(s) are recognized by the qcserial kernel module, and then to run <i>wvdial</i> to dial, connect and start <i>pppd</i>.
</p>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wvdial">wvdial</a></span>. The configuration file <code>/etc/wvdial.conf</code> will in general depend on which device you have and which mobile network you are connecting to. A single <code>wvdial.conf</code> can be defined with named sections to be usable with several USB modems and networks, should you need them.
</p>
<p>Run:
</p>
<pre># wvdialconf
</pre>
<p>which will attempt to write <code>/etc/wvdial.conf</code> correctly. You will need to add the user, password and Access Point Name (APN). You can obtain these from your network provider, from other users via published <code>wvdial.confs</code>, or by logging the USB tty traffic under another operating system (e.g. Sysinternals' Portmon).
</p>
<p>An example of <code>/etc/wvdial.conf</code> looks like this:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wvdial.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Dialer status]
Init1 = AT+CPIN?
Init2 = ATI
Modem = /dev/ttyUSB1

[Dialer pin]
Modem = /dev/ttyUSB1
Init1 = AT+CPIN=1234

[Dialer wwan]
Init1 = ATZ
Init2 = AT+CGDCONT=1,"IP","data.apn.com"
Stupid Mode = yes
Phone = *99***1#
New PPPD = yes
Modem = /dev/ttyUSB1
Username = XXXXXX
Dial Command = ATDT
Password = XXXXXX
Baud = 460800</pre>
<p>To simplify the procedure, one can take the SIM card out and disable the PIN so <code>wvdial pin</code> is not needed before connecting to the internet.
</p>
<p>Often there will be several devices (at <code>/dev/ttyUSB0</code>, <code>/dev/ttyUSB1</code>, <code>/dev/ttyUSB2</code> for example). If in doubt about which to use, try each of them in turn. Once the configuration files are prepared, the internet connection is established by running
</p>
<pre>$ wvdial <i>section</i>
</pre>
<p>The final wvdial command should start pppd and the obtained IP address should be visible in the terminal output. At that point the internet connection should be live, which can be easily checked with a web browser or by pinging an external IP address.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Mobile_broadband_modem.html" class="mw-redirect" title="USB 3G Modem">USB 3G Modem</a></li>
<li><a href="../en/Wvdial.html" class="mw-redirect" title="Allow users to dial with wvdial">Allow users to dial with wvdial</a></li>
<li><a href="../en/Huawei_EG162G_(Idea_netsetter).html" class="mw-redirect" title="Idea netsetter(Huawei EG162G)">Idea netsetter(Huawei EG162G)</a></li>
<li><a href="../en/ZTE_MF626_/_MF636.html" class="mw-redirect" title="ZTE MF636">ZTE MF636</a></li>
<li><a href="../en/Ppp/Mobile_broadband_modem.html" class="mw-redirect" title="3G and GPRS modems with pppd alone">3G and GPRS modems with pppd alone</a></li>
<li><a href="../en/Huawei_E1550_3G_modem.html" title="Huawei E1550 3G modem">Huawei E1550 3G modem</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Modems.html" title="Category:Modems">Modems</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Gobi_Broadband_Modems&amp;oldid=777908">https://wiki.archlinux.org/index.php?title=Gobi_Broadband_Modems&amp;oldid=777908</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 13 May 2023, at 12:30.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
