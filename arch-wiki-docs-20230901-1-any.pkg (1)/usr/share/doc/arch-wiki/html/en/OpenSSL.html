<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>OpenSSL - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OpenSSL rootpage-OpenSSL skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Configuration</div>
			</a>
			
				<button aria-controls="toc-Configuration-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Configuration subsection
				</button>
			
			<ul id="toc-Configuration-sublist" class="sidebar-toc-list">
				<li id="toc-req_section" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#req_section">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>req section</div>
			</a>
			
			<ul id="toc-req_section-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Usage" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Usage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Usage</div>
			</a>
			
				<button aria-controls="toc-Usage-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Usage subsection
				</button>
			
			<ul id="toc-Usage-sublist" class="sidebar-toc-list">
				<li id="toc-Generate_a_Curve25519_private_key" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_a_Curve25519_private_key">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Generate a Curve25519 private key</div>
			</a>
			
			<ul id="toc-Generate_a_Curve25519_private_key-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_an_ECDSA_private_key" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_an_ECDSA_private_key">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Generate an ECDSA private key</div>
			</a>
			
			<ul id="toc-Generate_an_ECDSA_private_key-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_an_RSA_private_key" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_an_RSA_private_key">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Generate an RSA private key</div>
			</a>
			
			<ul id="toc-Generate_an_RSA_private_key-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_certificate_signing_request" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_a_certificate_signing_request">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>Generate a certificate signing request</div>
			</a>
			
			<ul id="toc-Generate_a_certificate_signing_request-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Show_a_certificate_signing_request" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Show_a_certificate_signing_request">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5</span>Show a certificate signing request</div>
			</a>
			
			<ul id="toc-Show_a_certificate_signing_request-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_self-signed_certificate" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_a_self-signed_certificate">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.6</span>Generate a self-signed certificate</div>
			</a>
			
			<ul id="toc-Generate_a_self-signed_certificate-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_a_self-signed_certificate_with_private_key_in_a_single_command" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_a_self-signed_certificate_with_private_key_in_a_single_command">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.7</span>Generate a self-signed certificate with private key in a single command</div>
			</a>
			
			<ul id="toc-Generate_a_self-signed_certificate_with_private_key_in_a_single_command-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Generate_Diffie–Hellman_parameters" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Generate_Diffie%E2%80%93Hellman_parameters">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.8</span>Generate Diffie–Hellman parameters</div>
			</a>
			
			<ul id="toc-Generate_Diffie–Hellman_parameters-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Show_certificate_information" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Show_certificate_information">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.9</span>Show certificate information</div>
			</a>
			
			<ul id="toc-Show_certificate_information-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Show_certificate_fingerprint" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Show_certificate_fingerprint">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.10</span>Show certificate fingerprint</div>
			</a>
			
			<ul id="toc-Show_certificate_fingerprint-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Convert_certificate_format" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Convert_certificate_format">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.11</span>Convert certificate format</div>
			</a>
			
			<ul id="toc-Convert_certificate_format-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Use_third-party_providers" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Use_third-party_providers">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.12</span>Use third-party providers</div>
			</a>
			
			<ul id="toc-Use_third-party_providers-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id='toc-"bad_decrypt"_while_decrypting' class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href='#"bad_decrypt"_while_decrypting'>
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>"bad decrypt" while decrypting</div>
			</a>
			
			<ul id='toc-"bad_decrypt"_while_decrypting-sublist' class="sidebar-toc-list">
			</ul>
		</li>
		<li id='toc-Python_3.10_and_"ca_md_too_weak"_errors' class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href='#Python_3.10_and_"ca_md_too_weak"_errors'>
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Python 3.10 and "ca md too weak" errors</div>
			</a>
			
			<ul id='toc-Python_3.10_and_"ca_md_too_weak"_errors-sublist' class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/OpenSSL.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:OpenSSL.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/OpenSSL.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=OpenSSL&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=OpenSSL&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/OpenSSL.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=OpenSSL&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=OpenSSL&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/Transport_Layer_Security.html" title="Transport Layer Security">Transport Layer Security</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://www.openssl.org">OpenSSL</a> is an open-source implementation of the SSL and <a href="../en/Transport_Layer_Security.html" class="mw-redirect" title="TLS">TLS</a> protocols, designed to be as flexible as possible. It is supported on a variety of platforms, including BSD, Linux, OpenVMS, Solaris and Windows.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> Collaborated research into OpenSSL protocol usage, published in May 2015, showed further significant risks for SSL connections; named "Logjam" attack. See <a rel="nofollow" class="external free" href="https://weakdh.org/">https://weakdh.org/</a> for results and <a rel="nofollow" class="external free" href="https://weakdh.org/sysadmin.html">https://weakdh.org/sysadmin.html</a> for suggested server-side configuration changes.</div>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=openssl">openssl</a></span> is installed by default on Arch Linux (as a dependency of <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=coreutils">coreutils</a></span>).
</p>
<p>There are various OpenSSL library bindings available for developers:
</p>
<ul>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=python-pyopenssl">python-pyopenssl</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=perl-net-ssleay">perl-net-ssleay</a></span></li>
<li>
<span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua-sec">lua-sec</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua52-sec">lua52-sec</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=lua51-sec">lua51-sec</a></span>
</li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=haskell-hsopenssl">haskell-hsopenssl</a></span></li>
<li><span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=haskell-openssl-streams">haskell-openssl-streams</a></span></li>
</ul>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<p>On Arch Linux the <code>OPENSSLDIR</code> is <code>/etc/ssl</code>.
</p>
<p>The OpenSSL configuration file, conventionally placed in <code>/etc/ssl/openssl.cnf</code>, may appear complicated at first. Remember that variables may be expanded in assignments, much like how shell scripts work. For a thorough explanation of the configuration file format, see <span class="plainlinks archwiki-template-man" title="$ man 5ssl config"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/config.5ssl">config(5ssl)</a></span>.
</p>
<h3><span class="mw-headline" id="req_section">req section</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a><b>This article or section is a candidate for merging with <a href="#Generate_a_certificate_signing_request">#Generate a certificate signing request</a>.</b><a href="../File:Merge-arrows-2.png" class="image"><img alt="Merge-arrows-2.png" src="../File:Merge-arrows-2.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Notes:</b> Same topic. (Discuss in <a href="../en/Talk:OpenSSL.html#Plan" title="Talk:OpenSSL">Talk:OpenSSL#Plan</a>)</div>
</div>
<p>Settings related to generating keys, requests and self-signed certificates.
</p>
<p>The req section is responsible for the DN prompts. A general misconception is the <i>Common Name</i> (CN) prompt, which suggests that it should have the user's proper name as a value. End-user certificates need to have the <b>machine hostname</b> as CN, whereas CA should <i>not</i> have a valid TLD, so that there is no chance that, between the possible combinations of certified end-users' CN and the CA certificate's, there is a match that could be misinterpreted by some software as meaning that the end-user certificate is self-signed. Some CA certificates do not even have a CN, such as <a rel="nofollow" class="external text" href="https://www.equifax.com">Equifax</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ openssl x509 -subject -noout &lt; /etc/ssl/certs/Equifax_Secure_CA.pem</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">subject= /C=US/O=Equifax/OU=Equifax Secure Certificate Authority</pre>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>This sections assumes you have read <a href="../en/Transport_Layer_Security.html#Obtaining_a_certificate" title="Transport Layer Security">Transport Layer Security#Obtaining a certificate</a>.
</p>
<h3><span class="mw-headline" id="Generate_a_Curve25519_private_key">Generate a Curve25519 private key</span></h3>
<pre>$ openssl genpkey -algorithm x25519 -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_an_ECDSA_private_key">Generate an ECDSA private key</span></h3>
<pre>$ openssl genpkey -algorithm EC -pkeyopt ec_paramgen_curve:P-256 -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_an_RSA_private_key">Generate an RSA private key</span></h3>
<p>With <span class="plainlinks archwiki-template-man" title="$ man 1ssl genpkey"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/genpkey.1ssl">genpkey(1ssl)</a></span>, which supersedes <i>genrsa</i> according to <span class="plainlinks archwiki-template-man" title="$ man 1ssl openssl"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/openssl.1ssl">openssl(1ssl)</a></span>:
</p>
<pre>$ openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:<i>keysize</i> -out <i>filename</i>
</pre>
<p>If an encrypted key is desired, use the <code>-aes-256-cbc</code> option.
</p>
<h3><span class="mw-headline" id="Generate_a_certificate_signing_request">Generate a certificate signing request</span></h3>
<p>Use <span class="plainlinks archwiki-template-man" title="$ man 1ssl req"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/req.1ssl">req(1ssl)</a></span>:
</p>
<pre>$ openssl req -new -sha256 -key <i>private_key</i> -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Show_a_certificate_signing_request">Show a certificate signing request</span></h3>
<p>Certificate signing requests are stored in an encoded format. To view the request in human readable format:
</p>
<pre>$ openssl req -noout -text -in <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_a_self-signed_certificate">Generate a self-signed certificate</span></h3>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a><b>This article or section needs expansion.</b><a href="../File:Tango-view-fullscreen.png" class="image"><img alt="Tango-view-fullscreen.png" src="../File:Tango-view-fullscreen.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> This produces a certificate for the (root) Certificate Authority, which you are acting as. Most web browsers do not seem to accept CA certificates, deeming it necessary to request another certificate and sign it with the CA cert and CA key. The "Generate a certificate issued by own CA" procedure in <a rel="nofollow" class="external text" href="https://bbs.archlinux.org/viewtopic.php?pid=1776753#p1776753">this forum post</a> is what seems to satisfy browsers. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:OpenSSL">Talk:OpenSSL</a>)</div>
</div>
<pre>$ openssl req -key <i>private_key</i> -x509 -new -days <i>days</i> -out <i>filename</i>
</pre>
<h3><span class="mw-headline" id="Generate_a_self-signed_certificate_with_private_key_in_a_single_command">Generate a self-signed certificate with private key in a single command</span></h3>
<p>You can combine the above command in OpenSSL into a single command which might be convenient in some cases:
</p>
<pre>$ openssl req -x509 -newkey rsa:4096 -days <i>days</i> -keyout <i>key_filename</i> -out <i>cert_filename</i>
</pre>
<h3>
<span id="Generate_Diffie.E2.80.93Hellman_parameters"></span><span class="mw-headline" id="Generate_Diffie–Hellman_parameters">Generate Diffie–Hellman parameters</span>
</h3>
<p>See <a href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange" class="extiw" title="wikipedia:Diffie–Hellman key exchange">Diffie–Hellman key exchange</a> for more information.
</p>
<p>Current <a href="https://wiki.mozilla.org/Security/Server_Side_TLS" class="extiw" title="mozillawiki:Security/Server Side TLS">best practice</a> is to use one of the standard DH groups from <a href="https://tools.ietf.org/html/rfc7919" class="extiw" title="rfc:7919">RFC:7919</a>, eg. <a rel="nofollow" class="external text" href="https://ssl-config.mozilla.org/ffdhe2048.txt">ffdhe2048</a>.
</p>
<p>Alternatively you can generate a random group of your own:
</p>
<pre>$ openssl dhparam -out <i>filename</i> <i>2048</i>
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To speed up generating, especially when not on high-end hardware, add the <code>-dsaparam</code> option <a rel="nofollow" class="external autonumber" href="https://security.stackexchange.com/questions/95178/diffie-hellman-parameters-still-calculating-after-24-hours/95184#95184">[1]</a>.</div>
<h3><span class="mw-headline" id="Show_certificate_information">Show certificate information</span></h3>
<pre>$ openssl x509 -text -in <i>cert_filename</i>
</pre>
<h3><span class="mw-headline" id="Show_certificate_fingerprint">Show certificate fingerprint</span></h3>
<pre>$ openssl x509 -noout -in <i>cert_filename</i> -fingerprint <i>-digest</i>
</pre>
<p><code><i>-digest</i></code> is optional and one of <code>-md5</code>, <code>-sha1</code>, <code>-sha256</code>, or <code>-sha512</code>. See "-digest" in <span class="plainlinks archwiki-template-man" title="$ man 1ssl x509"><a rel="nofollow" class="external text" href="https://man.archlinux.org/man/x509.1ssl#Input,_Output,_and_General_Purpose_Options">x509(1ssl) § Input, Output, and General Purpose Options</a></span> for when the digest is unspecified.
</p>
<h3><span class="mw-headline" id="Convert_certificate_format">Convert certificate format</span></h3>
<p>Use <code>openssl x509</code> to convert certificates from binary (DER) format to PEM format (the text format with <code>BEGIN CERTIFICATE</code> headers)：
</p>
<pre>$ openssl x509 -inform DER &lt; <i>myCA</i>.crt &gt; <i>myCA_pem</i>.crt
</pre>
<h3><span class="mw-headline" id="Use_third-party_providers">Use third-party providers</span></h3>
<p>OpenSSL 3 introduced providers as a new concept for OpenSSL plugability. It is possible to use algorithms not included in OpenSSL without having to recompile it. For example, to test the <a rel="nofollow" class="external text" href="https://csrc.nist.gov/projects/post-quantum-cryptography">NIST Post-Quantum Cryptography</a> algorithms, you can install the <a rel="nofollow" class="external text" href="https://openquantumsafe.org/">Open Quantum Safe</a> provider <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/oqsprovider/">oqsprovider</a></span><sup><small>AUR</small></sup>. As an example, you can generate a quantum-safe self-signed certificate with private key using one of the variants of the <a rel="nofollow" class="external text" href="https://pq-crystals.org/dilithium/index.shtml">Dilithium</a> signature algorithm:
</p>
<pre>$ openssl req -provider oqsprovider -x509 -newkey dilithium3 -days <i>days</i> -keyout <i>key</i> -out <i>cert</i>
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3>
<span id=".22bad_decrypt.22_while_decrypting"></span><span class="mw-headline" id='"bad_decrypt"_while_decrypting'>"bad decrypt" while decrypting</span>
</h3>
<p>OpenSSL 1.1.0 changed the default digest algorithm for the dgst and enc commands from MD5 to SHA256. <a rel="nofollow" class="external autonumber" href="https://www.openssl.org/news/changelog.html#x6">[2]</a>
</p>
<p>Therefore if a file has been encrypted using OpenSSL 1.0.2 or older, trying to decrypt it with an up to date version may result in an error like:
</p>
<pre>error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:crypto/evp/evp_enc.c:540
</pre>
<p>Supplying the <code>-md md5</code> option should solve the issue:
</p>
<pre>$ openssl enc -d -md md5 -in encrypted -out decrypted
</pre>
<h3>
<span id="Python_3.10_and_.22ca_md_too_weak.22_errors"></span><span class="mw-headline" id='Python_3.10_and_"ca_md_too_weak"_errors'>Python 3.10 and "ca md too weak" errors</span>
</h3>
<p>In Python 3.10 by default there is a hardcoded list of allowed OpenSSL ciphers. Some of the less secure, like MD5, have been disabled at the <code>ssl</code> module level, ignoring the system-wide configuration of OpenSSL. It results sometimes in strange errors on older certificates, sometimes even when establishing <code>https</code> connections, like:
</p>
<pre>requests.exceptions.SSLError: HTTPSConnectionPool(host='a.kind.of.example.com', port=443): Max retries exceeded with url: / (Caused by SSLError(SSLError(398, '[SSL: CA_MD_TOO_WEAK] ca md too weak (_ssl.c:3862)')))
</pre>
<p>To make Python follow the system configuration, you may have to rebuild it, adding <code>--with-ssl-default-suites=openssl</code> parameter to <code>./configure</code>. The issue has been also reported as <a rel="nofollow" class="external text" href="https://bugs.archlinux.org/task/73549">FS#73549</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a href="https://en.wikipedia.org/wiki/OpenSSL" class="extiw" title="wikipedia:OpenSSL">Wikipedia page</a> on OpenSSL, with background information.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.openssl.org">OpenSSL</a> project page.</li>
<li><a rel="nofollow" class="external text" href="https://www.freebsd.org/doc/en/books/handbook/openssl.html">FreeBSD Handbook</a></li>
<li><a rel="nofollow" class="external text" href="https://www.akadia.com/services/ssh_test_certificate.html">Step-by-step guide to create a signed SSL certificate</a></li>
<li>
<a rel="nofollow" class="external text" href="https://jamielinux.com/docs/openssl-certificate-authority/">OpenSSL Certificate Authority</a>: A guide demonstrating how to act as your own certificate authority.</li>
<li>
<a rel="nofollow" class="external text" href="https://www.feistyduck.com/books/bulletproof-ssl-and-tls/bulletproof-ssl-and-tls-introduction.pdf">Bulletproof SSL and TLS</a> by Ivan Ristić, a more formal introduction to SSL/TLS</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Transport_Layer_Security.html" title="Category:Transport Layer Security">Transport Layer Security</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Merge.html" title="Category:Pages or sections flagged with Template:Merge">Pages or sections flagged with Template:Merge</a></li>
<li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Expansion.html" title="Category:Pages or sections flagged with Template:Expansion">Pages or sections flagged with Template:Expansion</a></li>
</ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=780046">https://wiki.archlinux.org/index.php?title=OpenSSL&amp;oldid=780046</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 1 June 2023, at 07:00.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
