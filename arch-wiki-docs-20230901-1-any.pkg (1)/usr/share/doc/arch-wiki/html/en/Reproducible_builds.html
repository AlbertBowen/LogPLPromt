<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Reproducible builds - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Reproducible_builds rootpage-Reproducible_builds skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Verification_builds" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Verification_builds">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Verification builds</div>
			</a>
			
				<button aria-controls="toc-Verification_builds-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Verification builds subsection
				</button>
			
			<ul id="toc-Verification_builds-sublist" class="sidebar-toc-list">
				<li id="toc-Repository_vs._rebuild" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Repository_vs._rebuild">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>Repository vs. rebuild</div>
			</a>
			
			<ul id="toc-Repository_vs._rebuild-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Rebuild_vs._another_rebuild_with_variations" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Rebuild_vs._another_rebuild_with_variations">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>Rebuild vs. another rebuild with variations</div>
			</a>
			
			<ul id="toc-Rebuild_vs._another_rebuild_with_variations-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Helping_out" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Helping_out">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Helping out</div>
			</a>
			
				<button aria-controls="toc-Helping_out-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Helping out subsection
				</button>
			
			<ul id="toc-Helping_out-sublist" class="sidebar-toc-list">
				<li id="toc-Tooling" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Tooling">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Tooling</div>
			</a>
			
			<ul id="toc-Tooling-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Running_a_Rebuilder_instance" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Running_a_Rebuilder_instance">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Running a Rebuilder instance</div>
			</a>
			
			<ul id="toc-Running_a_Rebuilder_instance-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Verifying_packages_with_repro_and_finding_issues" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Verifying_packages_with_repro_and_finding_issues">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Verifying packages with repro and finding issues</div>
			</a>
			
			<ul id="toc-Verifying_packages_with_repro_and_finding_issues-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>Work on issues in the tests.reproducible-builds.org infrastructure</div>
			</a>
			
			<ul id="toc-Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Known_issues" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Known_issues">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Known issues</div>
			</a>
			
				<button aria-controls="toc-Known_issues-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Known issues subsection
				</button>
			
			<ul id="toc-Known_issues-sublist" class="sidebar-toc-list">
				<li id="toc-GPG_verification" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#GPG_verification">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>GPG verification</div>
			</a>
			
			<ul id="toc-GPG_verification-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Contact" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Contact">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Contact</div>
			</a>
			
			<ul id="toc-Contact-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Reproducible_builds.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Reproducible_builds&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Reproducible_builds.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Reproducible_builds&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Reproducible_builds&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Reproducible_builds.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Reproducible_builds&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Reproducible_builds&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p>Arch Linux is currently working on making all packages reproducible. This lets users and researchers verify the distributed packages from Arch Linux. For the exact definition of reproducible builds and its benefits take a look at the <a rel="nofollow" class="external text" href="https://reproducible-builds.org/">project website</a>.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Verification_builds">Verification builds</span></h2>
<h3><span class="mw-headline" id="Repository_vs._rebuild">Repository vs. rebuild</span></h3>
<p>An experimental <a href="../en/Rebuilderd.html" title="Rebuilderd">rebuilderd</a> instance has been setup on our own infrastructure with a <a rel="nofollow" class="external text" href="https://reproducible.archlinux.org">status page</a>. Rebuilderd rebuilds our repository packages and checks if they are bit for bit identical. If they are not reproducible there is either a bug in the tooling, the package is not reproducible or the package has not been built cleanly.
</p>
<p>A list of known issues is located on <a href="../en/Reproducible_builds/Status.html" title="Reproducible builds/Status">/Status</a>.
</p>
<h3><span class="mw-headline" id="Rebuild_vs._another_rebuild_with_variations">Rebuild vs. another rebuild with variations</span></h3>
<p>The <a rel="nofollow" class="external text" href="https://reproducible-builds.org/">Reproducible Builds</a> project rebuilds Arch Linux packages and compares them with another rebuild in a different environment. The package status and environment variations are listed in the <a rel="nofollow" class="external text" href="https://tests.reproducible-builds.org/archlinux/archlinux.html">dedicated Arch Linux page</a>.
</p>
<h2><span class="mw-headline" id="Helping_out">Helping out</span></h2>
<h3><span class="mw-headline" id="Tooling">Tooling</span></h3>
<p>Help out on fixing bugs and adding features for <a rel="nofollow" class="external text" href="https://github.com/archlinux/archlinux-repro">repro</a>.
</p>
<h3><span class="mw-headline" id="Running_a_Rebuilder_instance">Running a Rebuilder instance</span></h3>
<p><a href="../en/Rebuilderd.html" title="Rebuilderd">Setting up rebuilderd</a> to build Arch Linux packages helps to independently verify repository packages.
</p>
<h3><span class="mw-headline" id="Verifying_packages_with_repro_and_finding_issues">Verifying packages with repro and finding issues</span></h3>
<p>A great way to help out is to find an unreproducible package and figuring out how it can be made reproducible.
</p>
<ul>
<li>Download an Arch Linux package or get one from the <a href="../en/Arch_Linux_Archive.html" title="Arch Linux Archive">Arch Linux Archive</a>
</li>
<li>Run repro on the downloaded package or a package from your pacman cache. Ideally with <code>repro -d</code> to get diffoscope output. For example, <code>repro -d /var/cache/pacman/pkg/curl-7.73.0-1-x86_64.pkg.tar.zst</code>
</li>
</ul>
  <div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> <a rel="nofollow" class="external free" href="https://reproducible.archlinux.org">https://reproducible.archlinux.org</a> <a rel="nofollow" class="external text" href="https://github.com/kpcyrd/rebuilderd/blob/7afb25d52ec12a01c360098c51967099241f90e2/worker/rebuilder-archlinux.sh">skips the <code>check()</code> step</a> because running all tests for all packages is too flakey. This creates false unreproducible packages status if <code>check()</code> has side-effects, such as Python packages.</div>
<ul><li>Investigate if it is an issue with Arch Linux packaging or upstream, issues can be added on the <a href="../en/Reproducible_builds/Status.html" title="Reproducible builds/Status">status page</a>. More information can be found on the <a rel="nofollow" class="external text" href="https://reproducible-builds.org/docs/">Reproducible Builds website</a>.</li></ul>
<h3><span class="mw-headline" id="Work_on_issues_in_the_tests.reproducible-builds.org_infrastructure">Work on issues in the tests.reproducible-builds.org infrastructure</span></h3>
<p>Arch users can help contribute to Reproducible Build issues by looking at the <a rel="nofollow" class="external text" href="https://tests.reproducible-builds.org/archlinux/archlinux.html">continuous reproducing environment</a>. There are various issues which can be sorted out:
</p>
<ul>
<li>FTBS (failed to build from source): reproduce the build failure locally and create a bug report if the package cannot be <a href="../DeveloperWiki:Building_in_a_clean_chroot.html" title="DeveloperWiki:Building in a clean chroot">built from a clean chroot</a> (<code>extra-x86_64-build</code> or <code>multilib-build</code>).</li>
<li>Failed to download sources, reproduce the issue (<code>makepkg -o -d</code>) and create a bug report on the Arch bugtracker.</li>
<li>Failed to reproduce. Locally you can reproduce packages using <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=reprotest">reprotest</a></span>. Note that not all variations can be used. For simple time related testing: <pre>$ reprotest --variations '+time' 'sudo extra-x86_64-build' '*.pkg.tar.zst'</pre>
</li>
</ul>
<p>There might be various reasons for a package to not be reproducible, but before digging in take a look at the upstream repository or the reproducible status in <a rel="nofollow" class="external text" href="https://tests.reproducible-builds.org/debian/reproducible.html">Debian</a>
</p>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=glibc">glibc</a></span> 2.35-6 ships with C.UTF-8 included. (Discuss in <a rel="nofollow" class="external text" href="https://wiki.archlinux.org/title/Talk:Reproducible_builds">Talk:Reproducible builds</a>)</div>
</div>
<ul><li>Failed to run tests, these failures are heavily on the testing environment. Most likely due to to <code>LANG=C</code> being set and Arch not supporting <code>LANG=C.UTF-8</code>.</li></ul>
<p>If you are interested in the code which runs the continuous reproducing environment, the first build code starts here on <a rel="nofollow" class="external text" href="https://salsa.debian.org/qa/jenkins.debian.net/blob/master/bin/reproducible_build_archlinux_pkg.sh#L115">salsa</a>
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The continuous reproducing environment on tests.reproducible-builds.org does NOT reproduce official arch packages. Its purpose is only to fuzz the packages and attempt to trigger as many bugs as possible, so they can be reported upstream.</div>
<h2><span class="mw-headline" id="Known_issues">Known issues</span></h2>
<h3><span class="mw-headline" id="GPG_verification">GPG verification</span></h3>
<p>There is a possible rebuild scenario where GPG keys will not verify as the packager was removed from the keyring or revoked as we use the latest keyring and a package in the archive which we need might need be signed by a revoked key we are unable to verify it and the build will fail.
</p>
<h2><span class="mw-headline" id="Contact">Contact</span></h2>
<ul><li>
<a rel="nofollow" class="external text" href="ircs://irc.libera.chat/archlinux-reproducible">#archlinux-reproducible</a> — Main channel for the progress of Reproducible Builds on Arch Linux</li></ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Package_management.html" title="Category:Package management">Package management</a></li>
<li><a href="../en/Category:Package_development.html" title="Category:Package development">Package development</a></li>
</ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Reproducible_builds&amp;oldid=781866">https://wiki.archlinux.org/index.php?title=Reproducible_builds&amp;oldid=781866</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 June 2023, at 13:22.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
