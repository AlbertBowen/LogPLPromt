<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Tencent QQ - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tencent_QQ rootpage-Tencent_QQ skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Official_version" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Official_version">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Official version</div>
			</a>
			
			<ul id="toc-Official_version-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Virtual_machine" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Virtual_machine">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Virtual machine</div>
			</a>
			
			<ul id="toc-Virtual_machine-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Wine" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Wine">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Wine</div>
			</a>
			
				<button aria-controls="toc-Wine-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Wine subsection
				</button>
			
			<ul id="toc-Wine-sublist" class="sidebar-toc-list">
				<li id="toc-Deepin_QQ/TIM" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Deepin_QQ/TIM">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Deepin QQ/TIM</div>
			</a>
			
			<ul id="toc-Deepin_QQ/TIM-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Crossover" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Crossover">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Crossover</div>
			</a>
			
			<ul id="toc-Crossover-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-AppImage" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#AppImage">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>AppImage</div>
			</a>
			
			<ul id="toc-AppImage-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Teacher_Qingfeng's_Wine_QQ_program" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Teacher_Qingfeng's_Wine_QQ_program">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.4</span>Teacher Qingfeng's Wine QQ program</div>
			</a>
			
			<ul id="toc-Teacher_Qingfeng's_Wine_QQ_program-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manual_Wine_scheme" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Manual_Wine_scheme">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5</span>Manual Wine scheme</div>
			</a>
			
			<ul id="toc-Manual_Wine_scheme-sublist" class="sidebar-toc-list">
				<li id="toc-QQ_light_chat_version" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#QQ_light_chat_version">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5.1</span>QQ light chat version</div>
			</a>
			
			<ul id="toc-QQ_light_chat_version-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-TIM" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#TIM">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5.2</span>TIM</div>
			</a>
			
			<ul id="toc-TIM-sublist" class="sidebar-toc-list">
				<li id="toc-Generate_icon" class="sidebar-toc-list-item sidebar-toc-level-4">
			<a class="sidebar-toc-link" href="#Generate_icon">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.5.2.1</span>Generate icon</div>
			</a>
			
			<ul id="toc-Generate_icon-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Tips_and_tricks" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Tips_and_tricks">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Tips and tricks</div>
			</a>
			
				<button aria-controls="toc-Tips_and_tricks-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Tips and tricks subsection
				</button>
			
			<ul id="toc-Tips_and_tricks-sublist" class="sidebar-toc-list">
				<li id="toc-HiDPI_support" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#HiDPI_support">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.1</span>HiDPI support</div>
			</a>
			
			<ul id="toc-HiDPI_support-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration_under_the_tiled_window_manager" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configuration_under_the_tiled_window_manager">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2</span>Configuration under the tiled window manager</div>
			</a>
			
			<ul id="toc-Configuration_under_the_tiled_window_manager-sublist" class="sidebar-toc-list">
				<li id="toc-Awesome" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Awesome">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2.1</span>Awesome</div>
			</a>
			
			<ul id="toc-Awesome-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-i3" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#i3">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4.2.2</span>i3</div>
			</a>
			
			<ul id="toc-i3-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Troubleshooting" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#Troubleshooting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>Troubleshooting</div>
			</a>
			
				<button aria-controls="toc-Troubleshooting-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Troubleshooting subsection
				</button>
			
			<ul id="toc-Troubleshooting-sublist" class="sidebar-toc-list">
				<li id="toc-Font_configuration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Font_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.1</span>Font configuration</div>
			</a>
			
			<ul id="toc-Font_configuration-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-File_is_occupied" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#File_is_occupied">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.2</span>File is occupied</div>
			</a>
			
			<ul id="toc-File_is_occupied-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Unable_to_input_emoticons_under_xfce4_(xfwm4)" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Unable_to_input_emoticons_under_xfce4_(xfwm4)">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.3</span>Unable to input emoticons under xfce4 (xfwm4)</div>
			</a>
			
			<ul id="toc-Unable_to_input_emoticons_under_xfce4_(xfwm4)-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Cannot_enter_Chinese_under_non-Chinese_locale" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Cannot_enter_Chinese_under_non-Chinese_locale">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5.4</span>Cannot enter Chinese under non-Chinese locale</div>
			</a>
			
			<ul id="toc-Cannot_enter_Chinese_under_non-Chinese_locale-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">6</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Tencent_QQ.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Tencent_QQ&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Tencent_QQ.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Tencent_QQ&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Tencent_QQ&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Tencent_QQ.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Tencent_QQ&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Tencent_QQ&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p>QQ is an instant messaging software developed by Tencent, an imitation of ICQ, and a popular IM software in China. This page lists various solutions for Arch Linux using QQ.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Official_version">Official version</span></h2>
<p>The official version is already available. To use the official version, install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/linuxqq/">linuxqq</a></span><sup><small>AUR</small></sup>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The official version provides an ordinary QQ, TIM does not have an official version. If you want to use TIM, please use the <a href="#Wine">wine solution</a>.</div>
<h2><span class="mw-headline" id="Virtual_machine">Virtual machine</span></h2>
<p>You can run a complete Windows system in a virtual machine and run QQ in this. Compared with other schemes, this scheme has the smallest chance of error. The disadvantage is that it takes up more resources.
</p>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>According to the <a rel="nofollow" class="external text" href="https://www.microsoft.com/en-us/Useterms/OEM/Windows/10Mobile/UseTerms_OEM_Windows_10Mobile_ChineseSimplified.htm">license terms</a>, running Windows on each virtual device requires a separate authorization. But you can choose to use <a rel="nofollow" class="external text" href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/">the virtual machine dedicated system provided by Microsoft</a> (free to use).</li>
<li>If you use VirtualBox, it is recommended that you enable <b><a rel="nofollow" class="external text" href="https://www.virtualbox.org/manual/ch04.html#seamlesswindows">seamless mode</a></b>, this feature allows you to seamlessly operate the window in the virtual machine under the host desktop.</li>
</ul>
</div>
<h2><span class="mw-headline" id="Wine">Wine</span></h2>
<p><a href="../en/Wine.html" title="Wine">Wine</a> is a "compatibility layer" that runs Microsoft Windows programs under UNIX-like systems, and it can be used to simulate QQ environment to run QQ/TIM.
</p>
<div class="archwiki-template-box archwiki-template-box-warning">
<strong>Warning:</strong> The style of Wine QQ/TIM under the tiled window manager may be out of control on a large scale and <a href="#Configuration_under_the_tiled_window_manager">additional configuration</a> is required.</div>
<h3>
<span id="Deepin_QQ.2FTIM"></span><span class="mw-headline" id="Deepin_QQ/TIM">Deepin QQ/TIM</span>
</h3>
<p>Deepin QQ/TIM is a relatively mature solution in wine. Almost out of the box, with fewer bugs.
</p>
<p>You can install the normal QQ: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/deepin-wine-qq/">deepin-wine-qq</a></span><sup><small>AUR</small></sup> or TIM: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/com.qq.office.deepin/">com.qq.office.deepin</a></span><sup><small>AUR</small></sup> (or <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/com.qq.tim.spark/">com.qq.tim.spark</a></span><sup><small>AUR</small></sup> from Spark Store), also from <a rel="nofollow" class="external text" href="https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/">Arch Linux CN source</a> install the normal QQ: <code>deepin.com.qq.im</code> or TIM: <code>deepin.com.qq.office</code>。
</p>
<p>Or you can install the Light version: <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/deepin.com.qq.im.light/">deepin.com.qq.im.light</a></span><sup><small>AUR</small></sup>。
</p>
<p>For the KDE/Plasma desktop, see <a href="../en/Deepin-wine.html#Deepin-wine_applications_fails_to_start" title="Deepin-wine">Deepin-wine#Deepin-wine applications fails to start</a>.
</p>
<h3><span class="mw-headline" id="Crossover">Crossover</span></h3>
<p>You can use <a href="../en/CrossOver.html" title="CrossOver">CrossOver</a> to run QQ, TM2013 and TIM. For more details, please refer to <a rel="nofollow" class="external text" href="https://www.codeweavers.com/compatibility">CrossOver's compatibility list</a>.
</p>
<h3><span class="mw-headline" id="AppImage">AppImage</span></h3>
<p>AppImage is a format for packaging applications into a single file. You can download the packaged Wine QQ/TIM in <a rel="nofollow" class="external autonumber" href="https://github.com/askme765cs/Wine-QQ-TIM">[1]</a>.Only need to give executable permissions to use. Since the AppImage format comes with the dependencies required by the program, this method is least affected by the versions of other components in the system.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Since AppImage does not use the system's Wine, adjustments to Wine may be invalid, such as <a href="#HiDPI_support">#HiDPI support</a>.</div>
<h3>
<span id="Teacher_Qingfeng.27s_Wine_QQ_program"></span><span class="mw-headline" id="Teacher_Qingfeng's_Wine_QQ_program">Teacher Qingfeng's Wine QQ program</span>
</h3>
<p>You can also use the Wine QQ program provided by <a rel="nofollow" class="external text" href="https://phpcj.org/wineqq/">Teacher Qingfeng</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> After the installation is successful, you need to uncheck the automatic update of QQ to avoid unavailability of automatic update.
</div>
<h3><span class="mw-headline" id="Manual_Wine_scheme">Manual Wine scheme</span></h3>
<h4><span class="mw-headline" id="QQ_light_chat_version">QQ light chat version</span></h4>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> This program uses QQ Light Chat version 6.7, and later versions require <a rel="nofollow" class="external text" href="https://blog.lilydjwg.me/2015/10/26/run-tencent-qq-lite-with-wine.186640.html">additional adjustments</a> in the current wine version to install.</div>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=winetricks">winetricks</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>. Created <code>qqlight.verb</code> as follows:
</p>
<pre>w_metadata qqlight apps \
 title="QQ Light" \
 publisher="Tencent" \
 year="2015" \
 media="download" \
 file1="QQ6.7Light.exe" \
 installed_exe1="$W_PROGRAMS_X86_WIN/Tencent/QQ/Bin/QQ.exe" \
 homepage="<a rel="nofollow" class="external free" href="https://www.qq.com">https://www.qq.com</a>" \
 unattended="no"

load_qqlight()
{
    w_download <a rel="nofollow" class="external free" href="https://dldir1.qq.com/qqfile/qq/QQ6.7Light/13466/QQ6.7Light.exe">https://dldir1.qq.com/qqfile/qq/QQ6.7Light/13466/QQ6.7Light.exe</a> e1e1ff2bf6461c08047d0a01927a43c5a0746bdf

    if w_workaround_wine_bug 29636 "Installing native riched20 to work around crash bug"
    then
        w_call riched20
    fi

    if w_workaround_wine_bug 34566 "Installing native ctf to work around crash"
    then
        w_call msctf
    fi

    # Make sure chinese fonts are available
    w_call fakechinese

    # uses mfc42u.dll
    w_call mfc42

    cd "$W_CACHE/$W_PACKAGE"
    w_try "$WINE" "$file1"

    # fix crash after login
    mkdir -p ~/.local/share/wineprefixes/qqlight/drive_c/users/$LOGNAME/Application\ Data/Tencent/QQ/Misc/com.tencent.wireless/SDK
    chmod 000 ~/.local/share/wineprefixes/qqlight/drive_c/users/$LOGNAME/Application\ Data/Tencent/QQ/Misc/com.tencent.wireless/SDK

    w_declare_exe "$W_PROGRAMS_X86_WIN\\Tencent\\QQ\\Bin" QQ.exe
}
</pre>
<p>Run <code>winetricks</code> to install:
</p>
<pre>$ winetricks qqlight.verb
</pre>
<p>After installation, start it through <code>wineconsole</code>:
</p>
<pre>$ wineconsole .wine/drive_c/run-qqlight.bat
</pre>
<h4><span class="mw-headline" id="TIM">TIM</span></h4>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine">wine</a></span>, <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine-gecko">wine-gecko</a></span> and <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wine-mono">wine-mono</a></span>.
</p>
<p>Execute <code>winetricks riched20</code>, or use <code>winecfg</code> to set function library substitution.
</p>
<p>You may need to configure Chinese font display, see <a href="#Font_configuration">#Font configuration</a>.
</p>
<p>Install TIM.
</p>
<h5><span class="mw-headline" id="Generate_icon">Generate icon</span></h5>
<p>The installed TIM may not have generated an icon in the program list. To add icons by yourself, create a new <code>tim.desktop</code> file and write the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">tim.desktop</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Desktop Entry]
Encoding=UTF-8
Version=1
Name=TIM
Comment=Tencent TIM
Exec=wine '~/.wine/drive_c/Program Files/Tencent/TIM/Bin/TIM.exe'
Icon=~/.wine/drive_c/Program Files/Tencent/TIM/TIMUninst.ico
Terminal=false
Type=Application
Categories=Network;</pre>
<p>Move <code>tim.desktop</code> to <code>~/.local/share/applications</code> or <code>/usr/share/applications</code>.
</p>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="HiDPI_support">HiDPI support</span></h3>
<p>On the HiDPI display, the QQ/TIM interface may be too small. Support for HiDPI has been added to the newer version of QQ/TIM. Just manually adjust Wine's DPI.
</p>
<p>Execute <code>winecfg</code>, switch to the <b>display</b> tab in the opened window and adjust the DPI.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> If you are not using the default wine container (for example, use deepin QQ/TIM) you need to specify the <code>WINEPREFIX</code> variable when you execute <code>winecfg</code>. For example, <code>env WINEPREFIX=$HOME/.deepinwine/Deepin-QQ deepin-wine winecfg</code> or <code>env WINEPREFIX=$HOME/.deepinwine/Deepin-TIM deepin-wine winecfg</code>.</div>
<h3><span class="mw-headline" id="Configuration_under_the_tiled_window_manager">Configuration under the tiled window manager</span></h3>
<h4><span class="mw-headline" id="Awesome">Awesome</span></h4>
<p>Wine QQ/TM may be out of control under the tiled window manager, and some configuration is required.
</p>
<p>The following configuration has these effects:
</p>
<ul><li>Set all TM windows to float.</li></ul>
<ul><li>Clear unnecessary window borders to prevent the focus from moving to the menu when the menu pops up.</li></ul>
<ul><li>When using tabbed conversation window, increased <a rel="nofollow" class="external text" href="https://blog.lilydjwg.me/2013/11/15/switch-tabs-with-alt-num-in-wined-tm-exe-in-awesome.41729.html">use of digital switches Alt+Number</a> shortcut key, need to install <a href="../en/Xorg.html#Automation" class="mw-redirect" title="Xdotool">xdotool</a>.</li></ul>
<ul><li>Automatically close the pop-up news window.</li></ul>
<p>Add the following to the <a href="../en/Awesome.html" title="Awesome">Awesome</a> configuration:
</p>
<pre>function myfocus_filter(c)
  if awful.client.focus.filter(c) then
    -- This works with tooltips and some popup-menus
    if c.class == 'Wine' and c.above == true then
      return nil
    elseif c.class == 'Wine'
      and c.type == 'dialog'
      and c.skip_taskbar == true
      and c.size_hints.max_width and c.size_hints.max_width &lt; 160
      then
      -- for popup item menus of Photoshop CS5
      return nil
    else
      return c
    end
  end
end

awful.rules.rules = {
  -- All clients will match this rule.
  {
    rule = { },
    properties = {
      -- we use our own function
      focus = myfocus_filter,
      -- The following is the default part
      border_width = beautiful.border_width,
      border_color = beautiful.border_normal,
      keys = clientkeys,
      buttons = clientbuttons,
    }
  }, {
    rule_any = { 
      instance = {'TM.exe', 'QQ.exe'},
    },
    properties = {
      -- This, together with myfocus_filter, make the popup menus flicker taskbars less
      -- Non-focusable menus may cause TM2013preview1 to not highlight menu
      -- items on hover and crash.
      focusable = true,
      floating = true,
      -- remove the border
      border_width = 0,
    }
  }, {
    -- Other rules
  }
}

alt_switch_keys = awful.util.table.join(
    -- it's easier for a vimer to manage this than figuring out a nice way to loop and concat
    awful.key({'Mod1'}, 1, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+1') end),
    awful.key({'Mod1'}, 2, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+2') end),
    awful.key({'Mod1'}, 3, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+3') end),
    awful.key({'Mod1'}, 4, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+4') end),
    awful.key({'Mod1'}, 5, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+5') end),
    awful.key({'Mod1'}, 6, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+6') end),
    awful.key({'Mod1'}, 7, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+7') end),
    awful.key({'Mod1'}, 8, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+8') end),
    awful.key({'Mod1'}, 9, function(c) awful.util.spawn('xdotool key --window ' .. c.window .. ' ctrl+9') end)
)
function bind_alt_switch_tab_keys(client)
    client:keys(awful.util.table.join(client:keys(), alt_switch_keys))
end -- }}}

client.connect_signal("manage", function (c, startup)
  -- other configuration

  if c.instance == 'TM.exe' then
    -- add Alt+n support
    bind_alt_switch_tab_keys(c)
    -- close all kinds of news notification small windows
    if c.name and c.name:match('^腾讯') and c.above then
      c:kill()
    end
  end

  -- other configuration
end)
</pre>
<p>You can also look at the complete <a rel="nofollow" class="external text" href="https://github.com/lilydjwg/myawesomerc">Awesome configuration</a>.
</p>
<h4><span class="mw-headline" id="i3">i3</span></h4>
<p>In the native configuration, when <code>qq2012</code> is started, it will be maximized automatically, and the border is not beautiful. The following two rules can be set in the <a href="../en/I3.html" title="I3">i3</a> <code>config</code> setting to improve:
</p>
<pre>for_window [instance="QQ.exe"] floating enable
for_window [instance="QQ.exe"] border none
</pre>
<h2><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h2>
<h3><span class="mw-headline" id="Font_configuration">Font configuration</span></h3>
<p>If you have problems displaying Chinese, you can try to execute  <code>winetricks fakechinese</code> first.
</p>
<p>See also <a href="../en/Wine.html#Fonts" title="Wine">fonts</a> and <a href="../en/Font_configuration.html#Applications_without_fontconfig_support" title="Font configuration">Applications without fontconfig support</a>。
</p>
<h3><span class="mw-headline" id="File_is_occupied">File is occupied</span></h3>
<p>Just kill the process of QQ or TIM.
After exiting QQ/TIM, some related processes are still running in the background. You can also use the following script to start QQ/TIM, it will first find the existing process, kill the process and start a new QQ/TIM.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">start-tim.sh</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">#!/bin/sh
# script to start TIM
# kill TIM before start TIM
for pid in `pgrep TIM.exe`; do
	if [ -n ${pid} ]; then
		kill ${pid}
	fi
done
# start TIM
wine '~/.wine/drive_c/Program Files/Tencent/TIM/Bin/TIM.exe'
</pre>
<p>The above example is applicable to TIM, and can be applied to QQ after a little modification.
</p>
<h3>
<span id="Unable_to_input_emoticons_under_xfce4_.28xfwm4.29"></span><span class="mw-headline" id="Unable_to_input_emoticons_under_xfce4_(xfwm4)">Unable to input emoticons under xfce4 (xfwm4)</span>
</h3>
<p>Open the Settings Manager-Window manager tuning-focus, uncheck the ICCCM focus prompt to activate focus anti-theft and follow the standard.
</p>
<p>The reason is that incompatibility occurs when the emoji window gains focus.
</p>
<h3><span class="mw-headline" id="Cannot_enter_Chinese_under_non-Chinese_locale">Cannot enter Chinese under non-Chinese locale</span></h3>
<p>Modify the <code>Exec</code> of the <code>.desktop</code> file, which is usually located in <code>/usr/share/applications/</code> or <code>~/.local/share/applications/</code>.
</p>
<p>Add <code>env LC_ALL=zh_CN.UTF-8</code> to the <code>Exec</code> line.
For example, the original <code>Exec</code> was:
</p>
<pre>Exec=".wine/drive_c/Program Files/QQ/Bin/QQ.exe"
</pre>
<p>Should be changed to:
</p>
<pre>Exec=env LC_ALL=zh_CN.UTF-8 wine ".wine/drive_c/Program Files/QQ/Bin/QQ.exe"
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://zh.opensuse.org/SDB:QQ">openSUSE wiki</a></li>
<li>
<a rel="nofollow" class="external text" href="http://qun.qzone.qq.com/">QQ group space on the web side</a> When the QQ client used does not support group space, this service can be used instead.</li>
<li>
<a rel="nofollow" class="external text" href="https://im.qq.com/mobileqq/">IM QQ-QQ mobile version</a> Mobile end is also an alternative.</li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/hillwoodroc/winetricks-zh">hillwoodroc/winetricks-zh</a> hillwoodroc/winetricks-zh</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Instant_messaging.html" title="Category:Instant messaging">Instant messaging</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Tencent_QQ&amp;oldid=784074">https://wiki.archlinux.org/index.php?title=Tencent_QQ&amp;oldid=784074</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2023, at 08:52.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
