<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Icinga - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Icinga rootpage-Icinga skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Icinga_Web_2" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Icinga_Web_2">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Icinga Web 2</div>
			</a>
			
				<button aria-controls="toc-Icinga_Web_2-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Icinga Web 2 subsection
				</button>
			
			<ul id="toc-Icinga_Web_2-sublist" class="sidebar-toc-list">
				<li id="toc-Configure_web_server" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configure_web_server">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Configure web server</div>
			</a>
			
			<ul id="toc-Configure_web_server-sublist" class="sidebar-toc-list">
				<li id="toc-nginx" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#nginx">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1.1</span>nginx</div>
			</a>
			
			<ul id="toc-nginx-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Apache" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Apache">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1.2</span>Apache</div>
			</a>
			
			<ul id="toc-Apache-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Configure_PHP" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configure_PHP">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Configure PHP</div>
			</a>
			
			<ul id="toc-Configure_PHP-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Configure_Icinga" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Configure_Icinga">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Configure Icinga</div>
			</a>
			
				<button aria-controls="toc-Configure_Icinga-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Configure Icinga subsection
				</button>
			
			<ul id="toc-Configure_Icinga-sublist" class="sidebar-toc-list">
				<li id="toc-Automatically" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Automatically">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Automatically</div>
			</a>
			
			<ul id="toc-Automatically-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Manually" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Manually">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Manually</div>
			</a>
			
			<ul id="toc-Manually-sublist" class="sidebar-toc-list">
				<li id="toc-MariaDB" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#MariaDB">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2.1</span>MariaDB</div>
			</a>
			
			<ul id="toc-MariaDB-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-PostgreSQL" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#PostgreSQL">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2.2</span>PostgreSQL</div>
			</a>
			
			<ul id="toc-PostgreSQL-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Finally" class="sidebar-toc-list-item sidebar-toc-level-3">
			<a class="sidebar-toc-link" href="#Finally">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2.3</span>Finally</div>
			</a>
			
			<ul id="toc-Finally-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Upgrade_database" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Upgrade_database">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Upgrade database</div>
			</a>
			
			<ul id="toc-Upgrade_database-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Icinga.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Icinga&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Icinga.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Icinga&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Icinga&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Icinga.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Icinga&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Icinga&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p><a rel="nofollow" class="external text" href="https://icinga.com">Icinga</a> is an open source host, service and network monitoring program. It monitors specified hosts and services, alerting you to any developing issues, errors or improvements. This article describes the installation and configuration of Icinga.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/icinga2/">icinga2</a></span><sup><small>AUR</small></sup>.
</p>
<p>You may also want to install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=monitoring-plugins">monitoring-plugins</a></span>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Start/enable">Start/enable</a> the <code>icinga2.service</code>.
</p>
<h2><span class="mw-headline" id="Icinga_Web_2">Icinga Web 2</span></h2>
<p>Install <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/icingaweb2/">icingaweb2</a></span><sup><small>AUR</small></sup> and optionally <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://aur.archlinux.org/packages/icingaweb2-module-director/">icingaweb2-module-director</a></span><sup><small>AUR</small></sup>.
</p>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Enable">Enable</a> the <code>icinga-director.service</code> if you installed the director module.
</p>
<h3><span class="mw-headline" id="Configure_web_server">Configure web server</span></h3>
<p>If you use php-fpm, you will have to <a href="../en/Systemd.html#Replacement_unit_files" class="mw-redirect" title="Override the unit">override the unit</a>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/systemd/system/php-fpm.service.d/override_icingaweb2.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[Service]
ReadWritePaths = /etc/icingaweb2</pre>
<h4><span class="mw-headline" id="nginx">nginx</span></h4>
<p>Example server block:
</p>
<pre>server {
	listen 80;
	listen [::]:80;
	server_name localhost;
	root /usr/share/webapps/icingaweb2/public;
	location ~ ^/icingaweb2/index\.php(.*)$ {
		fastcgi_pass unix:/run/php-fpm/php-fpm.sock;
		fastcgi_index index.php;
		include fastcgi_params;
		fastcgi_param SCRIPT_FILENAME /usr/share/webapps/icingaweb2/public/index.php;
		fastcgi_param ICINGAWEB_CONFIGDIR /etc/icingaweb2;
		fastcgi_param REMOTE_USER $remote_user;
	}
	location ~ ^/icingaweb2(.+)? {
		alias /usr/share/webapps/icingaweb2;
		index index.php;
		try_files $1 $uri $uri/ /icingaweb2/index.php$is_args$args;
	}
}
</pre>
<h4><span class="mw-headline" id="Apache">Apache</span></h4>
<p>If you get HTTP/503 errors, check in the configuration file to see if you are allowed to access the page:
</p>
<pre> Order allow,deny
 Allow from all
</pre>
<p>This has to be located in the <code>&lt;Directory "/usr/local/icinga-web/lib/ext3/"&gt;</code> and <code>&lt;Directory "/usr/local/icinga-web/pub/"&gt;</code> sections.
</p>
<h3><span class="mw-headline" id="Configure_PHP">Configure PHP</span></h3>
<p>Uncomment the following extensions: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/php/php.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">curl
gettext
pdo_mysql - MariaDB setups
pdo_pgsql - PostgreSQL setups
pgsql - PostgreSQL setups
intl - Icinga Web 2
sockets - Director
</pre>
<p>If <code>open_basedir</code> is set in <code>php.ini</code>, you need to authorize <code>/usr/share/icinga-php</code> and you need to create <code>ICINGAWEB_LOCALEDIR</code> <a href="../en/Environment_variables.html" class="mw-redirect" title="Environment variable">environment variable</a> to <code>/usr/share/icinga-php/icinga-L10n/locale</code> to avoid an <code>open_basedir</code> error on <code>/usr/share/webapps/icingaweb2/library/Icinga/Application/ApplicationBootstrap.php</code> at line 740.
</p>
<h2><span class="mw-headline" id="Configure_Icinga">Configure Icinga</span></h2>
<p>You can choose either PostgreSQL or MariaDB to use as a backend for Icinga.
</p>
<p>By default Icinga uses the following files and directories:
</p>
<ul>
<li>
<code>/etc/icinga2</code> — Contains Icinga 2 configuration files.</li>
<li>
<code>/usr/sbin/icinga2*</code> — The Icinga 2 binary.</li>
<li>
<code>/usr/share/doc/icinga2</code> — Documentation files that come with Icinga 2.</li>
<li>
<code>/usr/share/icinga2/include</code> — The Icinga Template Library and plugin command configuration.</li>
<li>
<code>/var/run/icinga2</code> — PID file.</li>
<li>
<code>/var/run/icinga2/cmd</code> — Command pipe and Livestatus socket.</li>
<li>
<code>/var/cache/icinga2</code> — <code>status.dat</code>/<code>objects.cache</code>, <code>icinga2.debug</code> files</li>
<li>
<code>/var/spool/icinga2</code> — Used for performance data spool files.</li>
<li>
<code>/var/lib/icinga2</code> — Icinga 2 state file, cluster log, local CA and configuration files.</li>
<li>
<code>/var/log/icinga2</code> —	Log file location and compat/ directory for the CompatLogger feature.</li>
</ul>
<h3><span class="mw-headline" id="Automatically">Automatically</span></h3>
<p>Generate a setup token and let Icinga Web 2 handle it by using the setup page:
</p>
<pre># icingacli setup config directory --group icingaweb2;
# icingacli setup token create;
</pre>
<p><a rel="nofollow" class="external free" href="http://localhost/icingaweb2/setup">http://localhost/icingaweb2/setup</a>
</p>
<h3><span class="mw-headline" id="Manually">Manually</span></h3>
<p>In case you do not want to use Icinga Web 2 to configure everything for you.
</p>
<h4><span class="mw-headline" id="MariaDB">MariaDB</span></h4>
<p><a rel="nofollow" class="external free" href="https://icinga.com/docs/icinga2/latest/doc/02-installation/#setting-up-the-mysql-database">https://icinga.com/docs/icinga2/latest/doc/02-installation/#setting-up-the-mysql-database</a>
</p>
<p>Create icinga user and db:
</p>
<pre># mysql -u root -p
&gt; CREATE DATABASE icinga;
&gt; GRANT SELECT, INSERT, UPDATE, DELETE, DROP, CREATE VIEW, INDEX, EXECUTE ON icinga.* TO 'icinga'@'localhost' IDENTIFIED BY 'supersecretpassword';
&gt; quit
</pre>
<p>Create icingaweb2 user and db:
</p>
<pre># mysql -u root -p
&gt; CREATE DATABASE icingaweb2;
&gt; GRANT SELECT, INSERT, UPDATE, DELETE, DROP, CREATE VIEW, INDEX, EXECUTE ON icingaweb2.* TO 'icingaweb2'@'localhost' IDENTIFIED BY 'anothersecurepassword';
&gt; quit
</pre>
<p>Import the icinga schema:
</p>
<pre># mysql -u root -p icinga &lt; /usr/share/icinga2-ido-mysql/schema/mysql.sql
</pre>
<p>Import the icingaweb2 schema:
</p>
<pre># mysql -p icingaweb2 &lt; /usr/share/webapps/icingaweb2/etc/schema/mysql.schema.sql
</pre>
<p>Create director database and user:
</p>
<pre># mysql -u root -p
&gt; CREATE DATABASE director CHARACTER SET 'utf8';
&gt; CREATE USER director@localhost IDENTIFIED BY 'directorpassword';
&gt; GRANT ALL ON director.* TO director@localhost;
</pre>
<p>Create a user to login to Icinga Web 2:
</p>
<pre>$ php -r 'echo password_hash("yourwebpassword", PASSWORD_DEFAULT);'
</pre>
<p>Use the hash you got from the previous command, replacing the hash in this example to insert a new user into the database:
</p>
<pre># mysql -u root -p
&gt; USE icingaweb2;
&gt; INSERT INTO icingaweb_user (name, active, password_hash) VALUES ('icingaadmin', 1, '$2y$10$G.qLnALysvw3yr5wP70sF.KtlwB/xDYypRU3x2WZd6x3N0oBAXuIi');
</pre>
<p>Edit <code>/etc/icinga2/features-available/ido-mysql.conf</code> with your SQL details.
</p>
<p>Enable ido-mysql:
</p>
<pre># icinga2 feature enable ido-mysql
</pre>
<h4><span class="mw-headline" id="PostgreSQL">PostgreSQL</span></h4>
<p><a rel="nofollow" class="external free" href="https://icinga.com/docs/icinga2/latest/doc/02-installation/#installing-postgresql-database-server">https://icinga.com/docs/icinga2/latest/doc/02-installation/#installing-postgresql-database-server</a>
</p>
<p>Create icinga user and db:
</p>
<pre># sudo -u postgres psql -c "CREATE ROLE icinga WITH LOGIN PASSWORD 'supersecretpassword'"
# sudo -u postgres createdb -O icinga -E UTF8 icinga
</pre>
<p>Create icingaweb2 user and db:
</p>
<pre># sudo -u postgres psql -c "CREATE ROLE icingaweb2 WITH LOGIN PASSWORD 'anothersecurepassword'"
# sudo -u postgres createdb -O icingaweb2 -E UTF8 icingaweb2
</pre>
<p>Import the icinga schema:
</p>
<pre># psql -U icinga -d icinga &lt; /usr/share/icinga2-ido-pgsql/schema/pgsql.sql
</pre>
<p>Import the icingaweb2 schema:
</p>
<pre># psql -U icingaweb2 -d icingaweb2 &lt; /usr/share/webapps/icingaweb2/etc/schema/pgsql.schema.sql
</pre>
<p>Create director database and user:
</p>
<pre># sudo -u postgres psql -q -c "CREATE DATABASE director WITH ENCODING 'UTF8';"
# sudo -u postgres psql director -q -c "CREATE USER director WITH PASSWORD 'directorpassword'; GRANT ALL PRIVILEGES ON DATABASE director TO director; CREATE EXTENSION pgcrypto;"
</pre>
<p>Create a user to login to Icinga Web 2:
</p>
<pre>$ php -r 'echo password_hash("yourwebpassword", PASSWORD_DEFAULT);'
</pre>
<p>Use the hash you got from the previous command, replacing the hash in this example to insert a new user into the database:
</p>
<pre># sudo -u postgres psql -d icingaweb2
icingaweb2=# INSERT INTO icingaweb_user (name, active, password_hash) VALUES ('icingaadmin', 1, '$2y$10$G.qLnALysvw3yr5wP70sF.KtlwB/xDYypRU3x2WZd6x3N0oBAXuIi');
</pre>
<p>Edit <code>/etc/icinga2/features-available/ido-pgsql.conf</code> with your SQL details.
</p>
<p>Enable ido-pgsql:
</p>
<pre># icinga2 feature enable ido-pgsql
</pre>
<h4><span class="mw-headline" id="Finally">Finally</span></h4>
<p>Enable Icinga api:
</p>
<pre># icinga2 api setup
</pre>
<p>Enable director module and its dependencies:
</p>
<pre># icingacli module enable ipl
# icingacli module enable incubator
# icingacli module enable reactbundle
# icingacli module enable director
</pre>
<p>Create Director database schema:
</p>
<pre># icingacli director migration run --verbose
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> <code>icinga2.service</code> for the changes to apply.
</p>
<p>If you chose to use Icinga Web 2, create appropriate <i>.ini</i> files (Use 'mysql' and '3306' for db and port if you use MariaDB):
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/icingaweb2/authentication.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[icingaweb2]
backend  = db
resource = icingaweb2</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/icingaweb2/resources.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[icingaweb2]
type                = "db"
db                  = "pgsql"
host                = "localhost"
port                = "5432"
dbname              = "icingaweb2"
username            = "icingaweb2"
password            = "anothersecurepassword"

[icinga2]
type                = "db"
db                  = "pgsql"
host                = "localhost"
port                = "5432"
dbname              = "icinga"
username            = "icinga"
password            = "supersecretpassword"

[director]
type                = "db"
db                  = "pgsql"
host                = "localhost"
port                = "5432"
dbname              = "director"
username            = "director"
password            = "directorpassword"
charset             = "utf8"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/icingaweb2/roles.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[admins]
users               = "icingaadmin"
permissions         = "*"</pre>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/icingaweb2/modules/director/config.ini</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[db]
resource = "director"</pre>
<p>Go to <a rel="nofollow" class="external free" href="http://localhost/icingaweb2/">http://localhost/icingaweb2/</a> and try to login as 'icingaadmin' and your chosen password - if all works, you are done with the basic setup!
</p>
<h2><span class="mw-headline" id="Upgrade_database">Upgrade database</span></h2>
<p>New versions usually require an upgrade of the database. You can find the SQL upgrade scripts in the following folders:
</p>
<pre>/usr/share/icinga2-ido-mysql/schema/upgrade
/usr/share/icinga2-ido-pgsql/schema/upgrade
/usr/share/webapps/icingaweb2/etc/schema/mysql-upgrades
/usr/share/webapps/icingaweb2/etc/schema/pgsql-upgrades
</pre>
<p>To do the upgrade, <code>cd</code> into the appropriate folder as written above and import the schema, examples:
</p>
<pre># mysql -u root -p icinga &lt; ./2.8.1.sql
# mysql -u root -p icingaweb2 &lt; ./2.5.0.sql
# psql -U icinga -d icinga &lt; ./2.8.1.sql
# psql -U icingaweb2 -d icingaweb2 &lt; ./2.5.0.sql
</pre>
<p><a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">Restart</a> <code>icinga2.service</code> for the changes to apply.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://icinga.com/docs/icinga2/latest/">Documentation</a> - Official documentation</li>
<li>
<a rel="nofollow" class="external text" href="https://www.monitoring-plugins.org/">monitoring-plugins</a> - Default plugins for Icinga and other monitoring applications</li>
<li>
<a rel="nofollow" class="external text" href="https://nagios-plugins.org/">Nagios Plugins</a> - The home of the legacy plugins</li>
<li><a href="https://en.wikipedia.org/wiki/Icinga" class="extiw" title="w:Icinga">Wikipedia article</a></li>
<li>
<a rel="nofollow" class="external text" href="https://exchange.nagios.org/">NagiosExchange</a> - Overview of plugins, addons, mailing lists for Icinga</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Network_monitoring.html" title="Category:Network monitoring">Network monitoring</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=Icinga&amp;oldid=782203">https://wiki.archlinux.org/index.php?title=Icinga&amp;oldid=782203</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 June 2023, at 00:01.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
