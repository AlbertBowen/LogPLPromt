<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ASUS KCMA-D8 - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ASUS_KCMA-D8 rootpage-ASUS_KCMA-D8 skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-BIOS" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#BIOS">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>BIOS</div>
			</a>
			
			<ul id="toc-BIOS-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Sensors" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Sensors">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Sensors</div>
			</a>
			
			<ul id="toc-Sensors-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Fan_control" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Fan_control">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Fan control</div>
			</a>
			
			<ul id="toc-Fan_control-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Booting_from_NVMe" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Booting_from_NVMe">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>Booting from NVMe</div>
			</a>
			
			<ul id="toc-Booting_from_NVMe-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-IPMI_Module" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#IPMI_Module">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">5</span>IPMI Module</div>
			</a>
			
			<ul id="toc-IPMI_Module-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/ASUS_KCMA-D8.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:ASUS_KCMA-D8&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/ASUS_KCMA-D8.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=ASUS_KCMA-D8&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=ASUS_KCMA-D8&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/ASUS_KCMA-D8.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=ASUS_KCMA-D8&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=ASUS_KCMA-D8&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<p>This page describes the steps necessary to get most of the features of the ASUS KCMA-D8 working correctly. It assumes you have already successfully installed Arch Linux.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="BIOS">BIOS</span></h2>
<p>The manufacturers BIOS is outdated and suffers many issues such as not resuming from suspend in Arch Linux. To remedy this, coreboot, an open source BIOS, can be flashed to the board to replace the manufacturers BIOS completely. Coreboot 4.11_branch is the latest release to support the KCMA-D8, although no documentation exists showing that it can be successfully compiled, flashed and booted. Coreboot 4.11 has been <a rel="nofollow" class="external text" href="https://www.lombards.xyz/en/tutorials/kcma-d8/kcma-d8_grub.html">documented</a> to compile and boot. Alternatively, coreboot 4.11 has been patched and precompiled to work in a stable manner through Leah Rowe's efforts in a project called Libreboot. Release 20160907 is the most recent stable release of Libreboot available for the KCMA-D8, and release 20211122 is the most recent testing release, which are both available at their <a rel="nofollow" class="external text" href="https://libreboot.org/download.html">download page</a>. As of June 2023, Libreboot is providing more ease of use, however, efforts and documentation into the compilation of coreboot 4.11_branch are needed for increased stability, security, and customization. A modernized compilation guide would also allow one to execute more payloads such as nvramcui, GRUB invaders, TINT, etc. Leah Rowe is currently displaying interest in further supporting this motherboard, so be sure to show her your support.
</p>
<h2><span class="mw-headline" id="Sensors">Sensors</span></h2>
<p>After running <code>sensors detect</code>, it loads the incorrect kernel driver <code>w83627ehf</code>. This can be remediated by replacing <code>w83627ehf</code> with <code>w83795</code> in <a href="../en/Lm_sensors.html" title="Lm sensors">lm_sensors</a> configuration file: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/conf.d/lm_sensors</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">HWMON_MODULES="w83795"</pre>
<p>The enumerated hwmon symlinks located in <code>/sys/class/hwmon/</code> may vary in order after a power cycle, because the kernel modules do not load in a consistent order every boot. Something as simple as plugging in a ps4 controller could cause the order to change. Creating/editing <code>/etc/modules-load.d/modules.conf</code> in such a manner should create a defined order for the modules to load in, which should make the hwmon paths stay where they are and not change order upon reboot:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/modules-load.d/modules.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;"># Load w83795 at boot
w83795</pre>
<p>This method may not always work consistently, and a more reliable method should be documented and implemented.
</p>
<h2><span class="mw-headline" id="Fan_control">Fan control</span></h2>
<p>Fan control in this motherboard is quite unusual. There is 8 PWM fan control channels, however only 2 channels are used for controlling the fan speed of all 8 fan headers. One must use a combination of 4 pin fans (recommended for CPU), and 3 pin fans (recommended for case). One speed can be set for all of the 4 pin fans, and another speed can be set for all of the 3 pin fans. After running <code>pwmconfig</code>, <code>fancontrol.service</code> refuses to start. This is because <a href="../en/Fan_speed_control.html" class="mw-redirect" title="Fancontrol">fancontrol</a> cannot associate more than 2 fans with PWM speed. Manually configure <code>/etc/fancontrol</code> so that <code>FCFANS</code> only has two inputs per device, and <a href="../en/Help:Reading.html#Control_of_systemd_units" class="mw-redirect" title="Restart">restart</a> <code>fancontrol.service</code>. Here is an example configuration: 
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/fancontrol</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">INTERVAL=10
DEVPATH=hwmon6=devices/pci0000:00/0000:00:14.0/i2c-8/8-002f
DEVNAME=hwmon6=w83795g
FCTEMPS=hwmon6/device/pwm2=hwmon6/device/temp1_input hwmon6/device/pwm1=hwmon6/device/temp8_input
FCFANS=hwmon6/device/pwm2=hwmon6/device/fan8_input+hwmon6/device/fan6_input hwmon6/device/pwm1=hwmon6/device/fan2_input+hwmon6/device/fan1_input
MINTEMP=hwmon6/device/pwm2=55 hwmon6/device/pwm1=35
MAXTEMP=hwmon6/device/pwm2=75 hwmon6/device/pwm1=65
MINSTART=hwmon6/device/pwm2=150 hwmon6/device/pwm1=150
MINSTOP=hwmon6/device/pwm2=0 hwmon6/device/pwm1=0</pre>
<h2><span class="mw-headline" id="Booting_from_NVMe">Booting from NVMe</span></h2>
<p>The stock BIOS, as well as Libreboot 20160907, do not support booting directly from NVMe. However, booting from an NVMe drive installed in an M.2 to PCIe adapter can be attained by simply installing a SATA drive (or USB), and placing the <code>/boot</code> partition on it as well as the boot loader. This can be done while keeping the root filesystem <code>/</code> on the NVMe drive, allowing one to reap the rewards of booting from NVMe. Compiling coreboot with a newer version of SeaBIOS would remedy this and allow native NVME booting.
</p>
<h2><span class="mw-headline" id="IPMI_Module">IPMI Module</span></h2>
<p>This motherboard supports an ASMB4 IPMI Module. The manufacturers ROM for the IPMI module has slight incompatibilities with coreboot as is, preventing restarts from working correctly. There exists an open source replacement for the IPMI module ROM called <a rel="nofollow" class="external text" href="https://www.raptorengineering.com/coreboot/kgpe-d16-bmc-port-status.php">OpenBMC</a>, however compilation is extremely difficult as the codebase has not been updated in a long time and it requires an antiquated version of debian to compile. The developers of Dasharo seem to have interest in supporting the KCMA-D8, because they already maintain and update their implementation of coreboot and OpenBMC for the very similar KGPE-D16, they just need the hardware, funds, and a little bit more of a push from the community. If Dasharo decides to support the KCMA-D8, this would be massive, because the IPMI module has the ability to control fan speeds properly regardless of the state of the operating system, which could save the hardware from overheating in the unlikely event of a freeze, making the KCMA-D8 an even more legendary FOSS motherboard. However, they have declined to reply to any emails regarding this topic so it seems unlikely.
</p>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Mainboards_and_BIOS.html" title="Category:Mainboards and BIOS">Mainboards and BIOS</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=ASUS_KCMA-D8&amp;oldid=781169">https://wiki.archlinux.org/index.php?title=ASUS_KCMA-D8&amp;oldid=781169</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 15 June 2023, at 21:32.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
