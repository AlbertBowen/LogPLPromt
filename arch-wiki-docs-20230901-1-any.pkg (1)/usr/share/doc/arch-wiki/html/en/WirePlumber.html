<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>WirePlumber - ArchWiki</title>
<link rel="stylesheet" href="../ArchWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.4">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="ArchWiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.archlinux.org/api.php?action=rsd">
<link rel="license" href="https://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="ArchWiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-WirePlumber rootpage-WirePlumber skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Installation" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Installation">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Installation</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Configuration" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Configuration</div>
			</a>
			
				<button aria-controls="toc-Configuration-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Configuration subsection
				</button>
			
			<ul id="toc-Configuration-sublist" class="sidebar-toc-list">
				<li id="toc-Configuration_file_layout" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Configuration_file_layout">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>Configuration file layout</div>
			</a>
			
			<ul id="toc-Configuration_file_layout-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Modifying_the_configuration" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Modifying_the_configuration">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>Modifying the configuration</div>
			</a>
			
			<ul id="toc-Modifying_the_configuration-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Obtain_interface_name_for_rules_matching" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Obtain_interface_name_for_rules_matching">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>Obtain interface name for rules matching</div>
			</a>
			
			<ul id="toc-Obtain_interface_name_for_rules_matching-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Changing_a_device/node_property" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Changing_a_device/node_property">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>Changing a device/node property</div>
			</a>
			
			<ul id="toc-Changing_a_device/node_property-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Disable_a_device/node" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Disable_a_device/node">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.5</span>Disable a device/node</div>
			</a>
			
			<ul id="toc-Disable_a_device/node-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Simultaneous_output_to_multiple_sinks_on_the_same_sound_card" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Simultaneous_output_to_multiple_sinks_on_the_same_sound_card">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.6</span>Simultaneous output to multiple sinks on the same sound card</div>
			</a>
			
			<ul id="toc-Simultaneous_output_to_multiple_sinks_on_the_same_sound_card-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Tips_and_tricks" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Tips_and_tricks">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3</span>Tips and tricks</div>
			</a>
			
				<button aria-controls="toc-Tips_and_tricks-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Tips and tricks subsection
				</button>
			
			<ul id="toc-Tips_and_tricks-sublist" class="sidebar-toc-list">
				<li id="toc-Keyboard_volume_control" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Keyboard_volume_control">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.1</span>Keyboard volume control</div>
			</a>
			
			<ul id="toc-Keyboard_volume_control-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Show_volume_level" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Show_volume_level">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.2</span>Show volume level</div>
			</a>
			
			<ul id="toc-Show_volume_level-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">3.3</span>Keep Bluetooth running after logout / Headless Bluetooth</div>
			</a>
			
			<ul id="toc-Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-See_also" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#See_also">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">4</span>See also</div>
			</a>
			
			<ul id="toc-See_also-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/WirePlumber.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="mw-list-item"><a href="../en/Talk:WirePlumber.html" rel="discussion" title="Discussion about the content page [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/WirePlumber.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=WirePlumber&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=WirePlumber&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/WirePlumber.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=WirePlumber&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=WirePlumber&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From ArchWiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div class="archwiki-template-meta-related-articles-start">
<p class="mw-no-invert">Related articles</p>
<ul>
<li><a href="../en/PipeWire.html" title="PipeWire">PipeWire</a></li>
</ul>
</div>
<p><a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber">WirePlumber</a> is a powerful session and policy manager for <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a>. Based on a modular design, with Lua plugins that implement the actual management functionality, it is highly configurable and extendable.
</p>
<mw:tocplace></mw:tocplace>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p><a href="../en/Help:Reading.html#Installation_of_packages" class="mw-redirect" title="Install">Install</a> the <span class="plainlinks archwiki-template-pkg"><a rel="nofollow" class="external text" href="https://archlinux.org/packages/?name=wireplumber">wireplumber</a></span> package. It will conflict with other PipeWire Session Managers and make sure they are uninstalled.
</p>
<p>WirePlumber uses systemd <a href="../en/Systemd/User.html" class="mw-redirect" title="User unit">user units</a> to manage the server.
</p>
<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<div class="noprint archwiki-template-message">
<p><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a><b>This article or section is out of date.</b><a href="../File:Tango-view-refresh-red.png" class="image"><img alt="Tango-view-refresh-red.png" src="../File:Tango-view-refresh-red.png" decoding="async" width="48" height="48"></a></p>
<div>
<b>Reason:</b> WirePlumber's configuration format is changing.<a rel="nofollow" class="external autonumber" href="https://www.collabora.com/news-and-blog/blog/2022/10/27/from-lua-to-json-refactoring-wireplumber-configuration-system/">[1]</a> (Discuss in <a href="../en/ArchWiki_talk:Requests.html#Update_for_new_WirePlumber_configuration_format" title="ArchWiki talk:Requests">ArchWiki talk:Requests#Update for new WirePlumber configuration format</a>)</div>
</div>
<h3><span class="mw-headline" id="Configuration_file_layout">Configuration file layout</span></h3>
<p><a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration.html">WirePlumber's configuration</a> is comprised of global PipeWire-flavored JSON objects such as <code>context</code> and <code>alsa_monitor</code> that are modified to change its behavior. The configuration files are read from <code>~/.config/wireplumber/</code> (user configuration), <code>/etc/wireplumber/</code> (global configuration), and then <code>/usr/share/wireplumber/</code> (stock configuration).
</p>
<p>WirePlumber starts by reading the <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/main.html">main configuration file</a>. This is a JSON-like file that sets up the PipeWire context, <a rel="nofollow" class="external text" href="https://docs.pipewire.org/page_spa_plugins.html">SPA plugins</a>, modules, and components. Among these components is the <a href="https://en.wikipedia.org/wiki/Lua_(programming_language)" class="extiw" title="wikipedia:Lua (programming language)">Lua</a> scripting engine, which is used to dynamically modify the global objects.
</p>
<p>There are different main configuration files that ship with the package:
</p>
<ul>
<li>The single-instance configuration file, at <code>/usr/share/wireplumber/wireplumber.conf</code>. This is the default configuration, which includes the functionality of all the other configurations within one process.
<ul><li>See the <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/main.html">documentation for the "context" object</a> used in all of the main configuration files.</li></ul>
</li>
<li>The main configuration file, at <code>/usr/share/wireplumber/main.conf</code>. This loads the modules and components necessary for the WirePlumber core, and loads <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/config_lua.html">Lua configuration files</a> from <code><i>config-dir</i>/main.lua.d/</code>. <a rel="nofollow" class="external autonumber" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/config_lua.html">[2]</a>
<ul><li>See the documentation for the <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/alsa.html">ALSA objects</a> and <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/access.html">"access" objects</a>.</li></ul>
</li>
<li>The <a href="../en/Bluetooth.html" title="Bluetooth">Bluetooth</a> configuration file, at <code>/usr/share/wireplumber/bluetooth.conf</code>. This is suitable for a WirePlumber process that is handling Bluetooth connectivity for the core process. This loads Lua files from <code><i>config-dir</i>/bluetooth.lua.d/</code>.
<ul><li>See the <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/bluetooth.html">documentation for the Bluetooth object</a>.</li></ul>
</li>
<li>The <i>policy</i> configuration file, at <code>/usr/share/wireplumber/policy.conf</code>. This encapsulates policy functionality, which is how WirePlumber makes decisions about moving and making changes to nodes. This loads Lua files from <code><i>config-dir</i>/policy.lua.d/</code>
<ul><li>See the <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/policy.html">documentation for the policy-related objects</a>.</li></ul>
</li>
</ul>
<p>The Lua configuration files in the <code>lua.d/</code> directories also load Lua scripts from <code><i>config-dir</i>/scripts/</code>. These scripts implement some of the logic/functionality of Pipewire, and could also be worth modifying under certain circumstances.
</p>
<h3><span class="mw-headline" id="Modifying_the_configuration">Modifying the configuration</span></h3>
<p>The recommended way to configure WirePlumber is to add a Lua script to the appropriate <code>lua.d/</code> directory within <code>/etc/wireplumber/</code> or <code>~/.config/wireplumber/</code>. Some things to consider are:
</p>
<ul>
<li>If there is an existing script you want to override, copy it from <code>/usr/share/wireplumber/</code> to the destination while keeping its name the same. Configuration files with the same name but in a lower priority location will be ignored. <a rel="nofollow" class="external autonumber" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/locations.html#location-of-configuration-files">[3]</a>
</li>
<li>Otherwise, if you are adding a new script, you should start it with a number bigger than 50 (e.g. <code>51-my-config.lua</code>), as the default configuration is mostly done at or below 50 in the alphanumeric ordering.
<ul><li>Note that WirePlumber performs <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/config_lua.html#multi-path-merging">multi-path merging</a>, meaning that a lower numbered stock config will run before your new script, as alphanumeric ordering takes precedence over directory priorities.</li></ul>
</li>
<li>The directory you choose should be consistent with what the stock configuration does, but it does not strictly matter unless you are <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/multi_instance.html">using multiple instances</a>.</li>
<li>ALSA properties for Bluetooth devices <i>must</i> be configured in <code>bluetooth.lua.d/</code>. An ALSA property for a Bluetooth device set in <code>main.lua.d/</code> is <i>not</i> applied.</li>
</ul>
<h3><span class="mw-headline" id="Obtain_interface_name_for_rules_matching">Obtain interface name for rules matching</span></h3>
<p>In the Lua scripts, you need to specify <code>matches</code> rules with a property from an <a rel="nofollow" class="external text" href="https://docs.pipewire.org/page_objects_design.html">object</a> of the interface you want to configure.
</p>
<p>Use the command <code>wpctl status</code> to show all objects managed by WirePlumber. Find the <code><i>ID</i></code> assigned to the target interface. Then use command <code>wpctl inspect <i>ID</i></code> to get a needed property.
</p>
<p><br>
Example, if you target interface is <code>HD Audio Controller Analog Stereo</code> and consider following output:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpctl status</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">PipeWire 'pipewire-0' [0.3.56, user@hostname, cookie:1163266174]

Audio
 ├─ Devices:
 │      42. HD Audio Controller                 [alsa]
 │     105. USB PnP Audio Device                [alsa]
 │
 ├─ Sinks:
 │  *   <b>48. HD Audio Controller Analog Stereo</b>   [vol: 0.50]
 │
 ├─ ...
 │
 ├─ Sources:
 │  *  101. USB PnP Audio Device Mono           [vol: 0.74]
 │
 └─ ...</pre>
<p>the interface <code><i>ID</i></code> is <code>48</code>.
</p>
<p>Then use inspect command to view object detail, listed all properties in that object:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpctl inspect 48</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">id 48, type PipeWire:Interface:Node
    ...
    device.api = "alsa"
    device.class = "sound"
  * device.id = "42"
    device.profile.description = "Analog Stereo"
    device.profile.name = "analog-stereo"
    ...
  * factory.id = "18"
    factory.mode = "merge"
    factory.name = "api.alsa.pcm.sink"
    ...
  * media.class = "Audio/Sink"
  * node.description = "HD Audio Controller Analog Stereo"
  * node.name = "alsa_output.pci-0000_08_00.4.analog-stereo"
  * node.nick = "ALC1220 Analog"
    ...
  * object.path = "alsa:pcm:1:front:1:playback"
  * object.serial = "49"
    ...</pre>
<p>Choose <code>device.name</code> or <code>node.name</code> property to use with the <code>matches</code> rules in the Lua configuration script.
</p>
<p>Avoid using <code>device.id</code>, it is dynamic and changes often.
</p>
<p>Multiple properties in <code>matches</code> rules is possible, see the <code>alsa_monitor.rules</code> section in <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/alsa.html#modifying-the-default-configuration">documentation for the WirePlumber ALSA configuration</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> 
<ul>
<li>You can determine the <code>Endpoint</code> class of this object from the <code>media.class</code> property.</li>
<li>For ALSA, <code>node</code> objects are Sinks or Sources / <code>device</code> objects correspond to the card.</li>
<li>Since v0.4.9, ALSA nodes use the PCM name to populate <code>node.nick</code>, which is useful at least on HDA cards using UCM, where all outputs (analog, HDMI, etc.) are exposed as <code>Node</code> on a single profile.</li>
</ul>
</div>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> 
<ul>
<li>The command <code>pw-top</code> shows the PipeWire <code>Device</code> and <code>Node</code> currently in use.</li>
<li>Similar inspection command from PipeWire is <code>pw-cli info <i>ID</i></code>.</li>
</ul>
</div>
<h3>
<span id="Changing_a_device.2Fnode_property"></span><span class="mw-headline" id="Changing_a_device/node_property">Changing a device/node property</span>
</h3>
<p>To change a device or node property, such as its description or nick, you must create a Lua script and add it into <code>/etc/wireplumber/</code> or <code>~/.config/wireplumber/</code> under the proper path and name.
</p>
<p>For instance, to change the description of an ALSA node, you would create a file such as:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/main.lua.d/51-device-rename.lua (or ~/.config/wireplumber/main.lua.d/51-device-rename.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">rule = {
  matches = {
    {
      { "node.name", "equals", "alsa_output.pci-0000_00_1f.3.output_analog-stereo" },
    },
  },
  apply_properties = {
    ["node.description"] = "Laptop",
  },
}

table.insert(alsa_monitor.rules, rule)</pre>
<p>If instead you wish to change something on a Bluetooth node or device, you could create a file such as:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/bluetooth.lua.d/51-device-rename.lua (or ~/.config/wireplumber/bluetooth.lua.d/51-device-rename.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">rule = {
  matches = {
    {
      { "node.name", "equals", "bluez_output.02_11_45_A0_B3_27.a2dp-sink" },
    },
  },
  apply_properties = {
    ["node.nick"] = "Headphones",
  },
}

table.insert(bluez_monitor.rules, rule)</pre>
<p>The properties that you can change as well as the matching rules to select devices or nodes are documented at <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/alsa.html">ALSA configuration</a> and <a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/configuration/bluetooth.html">Bluetooth configuration</a>.
</p>
<h3>
<span id="Disable_a_device.2Fnode"></span><span class="mw-headline" id="Disable_a_device/node">Disable a device/node</span>
</h3>
<p>Since WirePlumber v0.4.7, users could now disable any devices or nodes by property <code>device.disabled</code> or <code>node.disabled</code>:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/main.lua.d/51-alsa-disable.lua (or ~/.config/wireplumber/main.lua.d/51-alsa-disable.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">rule = {
  matches = {
    {
      { "device.name", "equals", "alsa_card.pci-0000_08_00.4" },
    },
  },
  apply_properties = {
    ["device.disabled"] = true,
  },
}

table.insert(alsa_monitor.rules,rule)</pre>
<p>For the name of <code>alsa_card.*</code> in your system, see <a href="#Obtain_interface_name_for_rules_matching">#Obtain interface name for rules matching</a>.
</p>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> Common use-case, for example, is to disable NVIDIA's HDMI audio output.</div>
<h3><span class="mw-headline" id="Simultaneous_output_to_multiple_sinks_on_the_same_sound_card">Simultaneous output to multiple sinks on the same sound card</span></h3>
<p>Create a copy of <code>/usr/share/alsa-card-profile/mixer/profile-sets/default.conf</code> so that changes persist across updates. Here we define a profile joining the two default mappings for Analog and HDMI.
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/usr/share/alsa-card-profile/mixer/profile-sets/multiple.conf</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">[General]
auto-profiles = no

[Mapping analog-stereo]
device-strings = front:%f
channel-map = left,right
paths-output = analog-output analog-output-lineout analog-output-speaker analog-output-headphones analog-output-headphones-2
paths-input = analog-input-front-mic analog-input-rear-mic analog-input-internal-mic analog-input-dock-mic analog-input analog-input-mic analog-input-linein analog-input-aux analog-input-video analog-input-tvtuner analog-input-fm analog-input-mic-line analog-input-headphone-mic analog-input-headset-mic
priority = 15

[Mapping hdmi-stereo]
description = Digital Stereo (HDMI)
device-strings = hdmi:%f
paths-output = hdmi-output-0
channel-map = left,right
priority = 9
direction = output

[Profile multiple]
description = Analog Stereo Duplex + Digital Stereo (HDMI) Output
output-mappings = analog-stereo hdmi-stereo
input-mappings = analog-stereo</pre>
<p>Now we configure Wireplumber to use the new card-profile for matching devices. For identifying information see <a href="#Obtain_interface_name_for_rules_matching">#Obtain interface name for rules matching</a>. We apply the configuration by creating a Lua script such as the following:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/main.lua.d/51-alsa-custom.lua (or ~/.config/wireplumber/main.lua.d/51-alsa-custom.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">rule = {
  matches = {
    {
      { "device.nick", "matches", "HDA Intel PCH" },
    },
  },
  apply_properties = {
    ["api.alsa.use-acp"] = true,
    ["api.acp.auto-profile"] = false,
    ["api.acp.auto-port"] = false,
    ["device.profile-set"] = "multiple.conf",
    ["device.profile"] = "multiple",
  },
}
table.insert(alsa_monitor.rules,rule)</pre>
<h2><span class="mw-headline" id="Tips_and_tricks">Tips and tricks</span></h2>
<h3><span class="mw-headline" id="Keyboard_volume_control">Keyboard volume control</span></h3>
<p>See <a href="../en/Keyboard_shortcuts.html#Xorg" title="Keyboard shortcuts">Keyboard shortcuts#Xorg</a> to bind the following commands to your volume keys: <code>XF86AudioRaiseVolume</code>, <code>XF86AudioLowerVolume</code>, <code>XF86AudioMute</code> and <code>XF86AudioMicMute</code>.
</p>
<p>To raise the volume, with a limit of 150%:
</p>
<pre>$ wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
</pre>
<p>To lower the volume:
</p>
<pre>$ wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
</pre>
<p>To mute/unmute the volume:
</p>
<pre>$ wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
</pre>
<p>To mute/unmute the microphone:
</p>
<pre>$ wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
</pre>
<div class="archwiki-template-box archwiki-template-box-tip">
<strong>Tip:</strong> To use sinks or sources other than the default ones, run <code>wpctl status</code> to list all available sinks, and use sink or source numbers in place of <code>@DEFAULT_AUDIO_SINK@</code> or <code>_SOURCE@</code>.</div>
<h3><span class="mw-headline" id="Show_volume_level">Show volume level</span></h3>
<p>To get the volume level and mute status of the default sink:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">$ wpctl get-volume @DEFAULT_AUDIO_SINK@</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">Volume: 0.45</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> The mute status is only visible when the sink is muted.</div>
<h3>
<span id="Keep_Bluetooth_running_after_logout_.2F_Headless_Bluetooth"></span><span class="mw-headline" id="Keep_Bluetooth_running_after_logout_/_Headless_Bluetooth">Keep Bluetooth running after logout / Headless Bluetooth</span>
</h3>
<p>By default <code>/usr/share/wireplumber/bluetooth.lua.d/50-bluez-config.lua</code> enables the <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/pipewire/wireplumber/-/merge_requests/222/diffs?commit_id=a253aa4c4948cdd87ba222670ee17db849af85dd">logind module</a> which disables Bluetooth whenever the session is terminated. You can override this like so:
</p>
<pre style="margin-bottom: 0; border-bottom:none; padding-bottom:0.8em;">/etc/wireplumber/bluetooth.lua.d/50-bluez-config.lua (or ~/.config/wireplumber/bluetooth.lua.d/50-bluez-config.lua)</pre>
<pre style="margin-top: 0; border-top-style:dashed; padding-top: 0.8em;">bluez_monitor.properties = {
  ["with-logind"] = false,
}</pre>
<div class="archwiki-template-box archwiki-template-box-note">
<strong>Note:</strong> You also need to enable <a href="../en/Systemd/User.html#Automatic_start-up_of_systemd_user_instances" title="Systemd/User">lingering</a> for the user running <a href="../en/PipeWire.html" title="PipeWire">PipeWire</a>/Wireplumber.</div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://pipewire.pages.freedesktop.org/wireplumber/">Documentation</a> — Official documentation</li>
<li>
<a rel="nofollow" class="external text" href="https://www.collabora.com/news-and-blog/blog/2020/05/07/wireplumber-the-pipewire-session-manager/">WirePlumber, the PipeWire session manager</a> — Blog post by George Kiagiadakis (Collabora) from May 2020, detailing how WirePlumber works</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface">
<div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Multimedia.html" title="Category:Multimedia">Multimedia</a></li></ul>
</div>
<div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="../en/Category:Pages_or_sections_flagged_with_Template:Out_of_date.html" title="Category:Pages or sections flagged with Template:Out of date">Pages or sections flagged with Template:Out of date</a></li></ul>
</div>
</div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.archlinux.org/index.php?title=WirePlumber&amp;oldid=781864">https://wiki.archlinux.org/index.php?title=WirePlumber&amp;oldid=781864</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 24 June 2023, at 13:06.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 or later</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="https://terms.archlinux.org/docs/privacy-policy/">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/ArchWiki:About.html">About ArchWiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/ArchWiki:General_disclaimer.html">Disclaimers</a></li>
</ul>

	
</footer>

		</div>
	</div> 
</div> 

</body>
</html>
